{"version":3,"sources":["App.js","logo.svg","webSdk.js","reportWebVitals.js","index.js","Canvas.js"],"names":["App","faceSDK","window","reader","FingerprintReader","useState","scanStart","setScanStart","userName","setUserName","setreaderConnected","error","setError","canvasRef","useRef","canvasRef2","videoRef","useEffect","getConnectedDevices","canvas","current","canvas2","video","stob64u","str","a","replace","b64ToB64Url","Buffer","from","JSON","stringify","toString","successCallBack","e","authData","forEach","prefixedBase64","bioSample","Version","Header","Factor","Format","FormatOwner","FormatID","Type","Purpose","Quality","Encryption","Data","ImageType","ImageData","push","submitFaceData","faceCred","submitData","credentialData","tokenId","console","log","errCallBack","progressCallBack","faceCapture","init","enumerateDevices","devices","getDeviceInfo","myDevice","setCookie","name","value","days","expires","date","Date","setTime","getTime","toUTCString","document","cookie","submit","data","encodedData","axios","post","user","type","credential","id","res","token","AuthenticateUserResult","jwt","decoded","jwt_decode","location","message","response","capture","onDeviceDisconnected","device","updateReaderStatus","onSamplesAcquired","stopAcquisition","samples","readerConnected","length","startAcquisition","SampleFormat","Intermediate","className","style","width","margin","marginBottom","onClick","stopVideo","onChange","target","description","error_code","display","height","ref","autoPlay","previous_async","async","noop","identity","v","toBool","notId","root","self","global","this","only_once","fn","Error","apply","arguments","_once","noConflict","_toString","Object","prototype","_isArray","Array","isArray","obj","call","_isArrayLike","arr","_arrayEach","iterator","index","_map","result","_range","count","i","_indexOf","item","_keys","keys","k","hasOwnProperty","_keyIterator","coll","len","_restParam","func","startIndex","Math","max","rest","_withoutIndex","callback","_setImmediate","setImmediate","_delay","setTimeout","_eachOfLimit","limit","nextKey","done","running","errored","replenish","key","err","doParallel","eachOf","doParallelLimit","doSeries","eachOfSeries","_asyncMap","eachfn","results","_filter","x","sort","b","_reject","cb","_createTester","check","getResult","iteratee","_","_findGetResult","_parallel","tasks","task","args","_concat","y","concat","_queue","worker","concurrency","payload","_insert","q","pos","started","idle","drain","unshift","saturated","process","_next","workers","removed","workersList","splice","empty","paused","kill","pause","resume","resumeCount","min","w","_console_fn","_times","mapper","_applyEach","fns","go","that","pop","ensureAsync","innerArgs","sync","nextTick","each","forEachSeries","eachSeries","forEachLimit","eachLimit","forEachOf","object","iter","completed","forEachOfSeries","iterate","forEachOfLimit","eachOfLimit","map","mapSeries","mapLimit","inject","foldl","reduce","memo","foldr","reduceRight","reversed","reverse","transform","select","filter","selectLimit","filterLimit","selectSeries","filterSeries","reject","rejectLimit","rejectSeries","any","some","someLimit","all","every","everyLimit","detect","detectSeries","detectLimit","sortBy","comparator","left","right","criteria","auto","remainingTasks","runningTasks","listeners","addListener","taskComplete","slice","dep","taskCallback","safeResults","val","rkey","requires","ready","listener","idx","removeListener","retry","times","DEFAULT_TIMES","DEFAULT_INTERVAL","attempts","opts","interval","parseTimes","acc","t","parseInt","wrappedTask","wrappedCallback","wrappedResults","retryAttempt","finalAttempt","seriesCallback","retryInterval","series","waterfall","wrapIterator","next","parallel","parallelLimit","makeCallback","callArgs","concatSeries","whilst","test","doWhilst","calls","until","doUntil","during","truth","doDuring","queue","items","priorityQueue","_compareTasks","priority","sequence","compare","beg","end","mid","_binarySearch","cargo","dir","memoize","hasher","queues","memoized","l","unmemoized","unmemoize","timesSeries","timesLimit","seq","newargs","nextargs","compose","applyEach","applyEachSeries","forever","constant","values","wrapSync","asyncify","_isObject","then","module","exports","define","factory","hex_chr","hex","num","j","charAt","str2blks_SHA1","nblk","blks","charCodeAt","hex2blks_SHA1","substr","ba2blks_SHA1","ba","off","add","lsw","rol","cnt","ft","c","d","kt","calcSHA1","calcSHA1Blks","calcSHA1Hex","calcSHA1BA","calcSHA1BAEx","s","calcSHA1Raw","olda","oldb","oldc","oldd","olde","sha1","sjcl","cipher","hash","keyexchange","mode","misc","codec","exception","corrupt","invalid","bug","notReady","bitArray","bitSlice","bstart","bend","_shiftRight","undefined","clamp","extract","blength","sh","floor","a1","a2","last","shift","getPartial","bitLength","ceil","partial","_end","round","equal","carry","out","shift2","last2","_xor4","byteswapM","m","sha256","_key","_precompute","_h","_buffer","_length","reset","update","finalize","blockSize","_init","utf8String","toBits","ol","nl","_block","h","factor","prime","frac","outer","pow","words","tmp","h0","h1","h2","h3","h4","h5","h6","h7","aes","_tables","encKey","decKey","sbox","decTable","keyLen","rcon","encrypt","_crypt","decrypt","xInv","x2","x4","tEnc","tDec","encTable","sboxInv","th","input","b2","c2","nInnerRounds","kIndex","table","t0","t1","t2","t3","prng","defaultParanoia","_pools","_poolEntropy","_reseedCount","_robins","_eventId","_collectorIds","_collectorIdNext","_strength","_poolStrength","_nextReseed","_counter","_cipher","_defaultParanoia","_collectorsStarted","_callbacks","progress","seeded","_callbackI","_NOT_READY","_READY","_REQUIRES_RESEED","_MAX_WORDS_PER_BURST","_PARANOIA_LEVELS","_MILLISECONDS_PER_RESEED","_BITS_PER_RESEED","randomWords","nwords","paranoia","g","readiness","isReady","_reseedFromPools","_gate","_gen4words","setDefaultParanoia","allowZeroParanoia","addEntropy","estimatedEntropy","source","objName","valueOf","robin","oldReady","_fireEvent","getProgress","entropyRequired","startCollectors","_eventListener","loadTimeCollector","_bind","_loadTimeCollector","mouseCollector","_mouseCollector","keyboardCollector","_keyboardCollector","accelerometerCollector","_accelerometerCollector","touchCollector","_touchCollector","addEventListener","attachEvent","stopCollectors","removeEventListener","detachEvent","cbs","jsTemp","_reseed","seedWords","full","reseedData","strength","random","_addCurrentTimeToEntropy","ev","clientX","offsetX","clientY","offsetY","touch","touches","changedTouches","pageX","pageY","performance","now","ac","accelerationIncludingGravity","z","orientation","or","arg","cbsTemp","getCryptoModule","require","buf","crypt","ab","randomBytes","Uint32Array","Uint8Array","buffer","crypto","getRandomValues","msCrypto","fromBits","bl","String","fromCharCode","decodeURIComponent","escape","unescape","encodeURIComponent","base64","_chars","_noEquals","_url","bits","ta","indexOf","base64url","dbits","j_lm","BigInteger","fromNumber","fromString","nbi","am1","n","am2","xl","xh","am3","navigator","appName","am","DB","DM","DV","BI_FP","FV","F1","F2","rr","vv","BI_RM","BI_RC","int2char","intAt","bnpCopyTo","r","bnpFromInt","nbv","fromInt","bnpFromString","fromRadix","mi","ZERO","subTo","bnpClamp","bnToString","negate","toRadix","km","p","bnNegate","bnAbs","bnCompareTo","nbits","bnBitLength","bnpDLShiftTo","bnpDRShiftTo","bnpLShiftTo","bs","bm","ds","bnpRShiftTo","bnpSubTo","bnpMultiplyTo","abs","bnpSquareTo","bnpDivRemTo","pm","pt","copyTo","ts","ms","nsh","lShiftTo","ys","y0","yt","d1","d2","dlShiftTo","compareTo","ONE","qd","drShiftTo","rShiftTo","bnMod","divRemTo","Classic","cConvert","mod","cRevert","cReduce","cMulTo","multiplyTo","cSqrTo","squareTo","bnpInvDigit","Montgomery","mp","invDigit","mpl","mph","um","mt2","montConvert","montRevert","montReduce","u0","montSqrTo","montMulTo","bnpIsEven","bnpExp","r2","convert","sqrTo","mulTo","revert","bnModPowInt","isEven","exp","bnClone","bnIntValue","bnByteValue","bnShortValue","bnpChunkSize","LN2","bnSigNum","bnpToRadix","signum","cs","chunkSize","intValue","bnpFromRadix","dMultiply","dAddOffset","bnpFromNumber","testBit","bitwiseTo","shiftLeft","op_or","isProbablePrime","nextBytes","bnToByteArray","bnEquals","bnMin","bnMax","bnpBitwiseTo","op","f","op_and","bnAnd","bnOr","op_xor","bnXor","op_andnot","bnAndNot","bnNot","bnShiftLeft","bnShiftRight","lbit","bnGetLowestSetBit","cbit","bnBitCount","bnTestBit","bnpChangeBit","bnSetBit","changeBit","bnClearBit","bnFlipBit","bnpAddTo","bnAdd","addTo","bnSubtract","bnMultiply","bnSquare","bnDivide","bnRemainder","bnDivideAndRemainder","bnpDMultiply","bnpDAddOffset","NullExp","nNop","nMulTo","nSqrTo","bnPow","bnpMultiplyLowerTo","bnpMultiplyUpperTo","Barrett","q3","mu","divide","barrettConvert","barrettRevert","barrettReduce","multiplyUpperTo","multiplyLowerTo","barrettSqrTo","barrettMulTo","bnModPow","k1","g2","is1","bnGCD","clone","getLowestSetBit","bnpModInt","bnModInverse","u","subtract","modPowInt","lowprimes","lplim","bnIsProbablePrime","modInt","millerRabin","bnpMillerRabin","n1","shiftRight","modPow","byteValue","shortValue","toByteArray","equals","and","xor","andNot","not","bitCount","setBit","clearBit","flipBit","multiply","remainder","divideAndRemainder","modInverse","gcd","square","SRPClient","username","password","group","hashFn","initVal","initVals","N","gBn","one","two","toHexString","bi","padLeft","orig","join","bytesToHex","bytes","hexToBytes","match","stringToBytes","bytesToString","byteArr","toHash","paddedHash","calculateX","saltHex","usernameBytes","passwordBytes","upBytes","upHash","upHashBytes","saltUpBytes","saltUpHash","xtmp","calculateV","salt","calculateU","A","B","canCalculateA","calculateA","calculateM1","K","hashN","hexHash","hashg","hashUsername","xorNg_bytes","hashN_bytes","hashg_bytes","toHash_str","calculateM","calculateM2","B_or_M","calculateS","uu","aa","bx","calculateK","S","srpRandom","randomHexSalt","array","nlen","nZeros","toLowerCase","pack","ascii","1024","1536","2048","3072","4096","6144","8192","calculateB","calculateServerS","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$utils$$isArray","lib$es6$promise$asap$$len","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$queue","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","lib$es6$promise$asap$$browserGlobal","lib$es6$promise$asap$$BrowserMutationObserver","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","MessageChannel","lib$es6$promise$asap$$useSetTimeout","lib$es6$promise$$internal$$noop","iterations","observer","node","createTextNode","observe","characterData","lib$es6$promise$asap$$useMutationObserver","channel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useMessageChannel","vertx","runOnLoop","runOnContext","lib$es6$promise$asap$$attemptVertx","lib$es6$promise$$internal$$PENDING","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$handleMaybeThenable","promise","maybeThenable","constructor","thenable","_state","lib$es6$promise$$internal$$fulfill","_result","lib$es6$promise$$internal$$reject","lib$es6$promise$$internal$$subscribe","lib$es6$promise$$internal$$resolve","reason","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$getThen","sealed","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$tryThen","_label","lib$es6$promise$$internal$$handleForeignThenable","TypeError","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","_subscribers","parent","child","onFulfillment","onRejection","subscribers","settled","detail","lib$es6$promise$$internal$$invokeCallback","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$enumerator$$Enumerator","Constructor","enumerator","_instanceConstructor","_validateInput","_input","_remaining","_enumerate","_validationError","lib$es6$promise$enumerator$$default","_eachEntry","entry","_settledAt","_willSettleAt","resolve","state","lib$es6$promise$promise$all$$default","entries","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$resolve$$default","lib$es6$promise$promise$reject$$default","lib$es6$promise$promise$$counter","lib$es6$promise$promise$$default","lib$es6$promise$promise$$Promise","resolver","_id","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$$internal$$initializePromise","race","_setScheduler","scheduleFn","_setAsap","asapFn","_asap","lib$es6$promise$polyfill$$default","local","Function","P","Promise","cast","lib$es6$promise$umd$$ES6Promise","core","WebSdk","debug","version","WebSdkEncryptionSupport","None","Encoding","AESEncryption","WebSdkDataSupport","Binary","getQueryParam","url","RegExp","exec","ajax","method","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onreadystatechange","readyState","DONE","status","responseText","parse","urlEncodedData","urlEncodedDataPairs","send","defer","deferred","Deferred","create","tryParseJson","FixedQueue","maxSize","m_items","m_maxSize","defineProperty","get","enumerable","configurable","trimHead","trimTail","utils","Configurator","m_key","sessionData","sessionStorage","getItem","m_port","port","m_host","host","m_isSecure","isSecure","m_srp","srp","set","setItem","ensureLoaded","uri","endpoint","tryParse","catch","connectionString","urlEl","createElement","href","search","hostname","p1","p2","WebSdkAESVersion","WebSdkAESDataType","UnicodeString","UTF8String","utf8ToBase64","binstr","utf8ToBinaryString","btoa","base64ToUtf8","b64","binaryStringToUtf8","atob","escstr","code","toUpperCase","keyCharAt","getHdr","dv","DataView","getUint8","getUint32","offset","getUint16","setHdr","setUint8","setUint32","byteLength","setUint16","ab2str","blob","Blob","fileReader","FileReader","onload","event","onerror","readAsText","str2ab","ArrayBuffer","bufView","Uint16Array","strLen","binary2ab","bin","bufSrc","generateKey","rawKey","usages","extractable","subtle","importKey","iv","msGenerateKey","keyOpp","oncomplete","msEncrypt","encOpp","msDecrypt","decOpp","encryptAES","decryptAES","hexToArray","promisefy","M1","AESDecryption","hdr","encode","decode","isCryptoSupported","WebChannelOptions","options","validateVersion","supportedVersion","defineProperties","ES6Promise","configurator","WebChannelClientImpl","clientPath","wsThreshold","wsQueueInterval","wsQueueLimit","wsReconnectInterval","queueInterval","webSocket","sessionKey","reconnectTimer","onConnectionFailed","onConnectionSucceed","onDataReceivedBin","onDataReceivedTxt","resetReconnectTimer","notifyFocusChanged","isFocused","isConnected","sendData","fireConnectionFailed","hasFocus","setReconnectTimer","fireConnectionSucceed","clearInterval","setInterval","connectInternal","wsconnect","$q","WebSocket","CLOSED","binaryType","onclose","wsonclose","onopen","wsonmessage","wsdisconnect","OPEN","close","isFailed","deactivateBufferCheck","wssend","bufferedAmount","activateBufferCheck","generateSessionKey","srpData","setupSecureChannel","connectionUrl","sessionId","processMessageQueue","multipleAttempts","connect","disconnect","sendDataBin","sendDataTxt","WebChannelClient","webChannelOptions","client","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","Canvas"],"mappings":"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","file":"static/js/main.8a1b1996.chunk.js","sourcesContent":["import logo from \"./logo.svg\"\r\nimport React, { useEffect, useState, useRef } from \"react\"\r\nimport { Credential, BioSample } from \"@digitalpersona/core\"\r\nimport { FingerprintsAuth, FaceAuth } from \"@digitalpersona/authentication\"\r\nimport { ServiceError, AuthService } from \"@digitalpersona/services\"\r\nimport {\r\n  FingerprintReader,\r\n  QualityCode,\r\n  ErrorOccurred,\r\n  SampleFormat\r\n} from \"@digitalpersona/devices\"\r\nimport \"./App.css\"\r\nimport axios from \"axios\"\r\nimport jwt_decode from \"jwt-decode\"\r\nimport Canvas from \"./Canvas\"\r\nfunction App() {\r\n  const faceSDK = window.faceSDK\r\n  const host = \"sdk.techinoviq.com\"\r\n  const reader = new FingerprintReader()\r\n  const [scanStart, setScanStart] = useState(false)\r\n  const [userName, setUserName] = useState(\"dinesh@dpdemo.com\")\r\n  const [readerConnected, setreaderConnected] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const canvasRef = useRef(null)\r\n  const canvasRef2 = useRef(null)\r\n  const videoRef = useRef(null)\r\n  useEffect(() => {\r\n    // (device) => {\r\n    //   reader.onDeviceConnected()\r\n    // }\r\n    getConnectedDevices()\r\n    // checkDeviceStatus()\r\n    setreaderConnected(true)\r\n    // capture()\r\n  }, [])\r\n\r\n  const canvas = canvasRef.current\r\n  const canvas2 = canvasRef2.current\r\n  const video = videoRef.current\r\n  useEffect(() => {\r\n    // const canvas = canvasRef.current\r\n    // const context = canvas.getContext('2d')\r\n    //Our first draw\r\n    // context.fillStyle = '#000000'\r\n    // context.fillRect(0, 0, context.canvas.width, context.canvas.height)\r\n  }, [])\r\n\r\n  function b64ToB64Url(a) {\r\n    a = a.replace(/\\=/g, \"\")\r\n    a = a.replace(/\\+/g, \"-\")\r\n    a = a.replace(/\\//g, \"_\")\r\n    return a\r\n  }\r\n\r\n  function stob64u(str) {\r\n    return b64ToB64Url(Buffer.from(JSON.stringify(str)).toString(\"base64\"))\r\n  }\r\n\r\n  const successCallBack = (e) => {\r\n    let authData = []\r\n    e.forEach(function (prefixedBase64) {\r\n      var base64 = prefixedBase64.replace(\"data:image/jpeg;base64,\", \"\")\r\n      var imageData = {\r\n        Version: 1,\r\n        ImageType: 1, // JPEG_FILE\r\n        //There is no need to encode since it already encoded during conversion to JPEG\r\n        ImageData: base64 // Base64url encoded raw image\r\n      }\r\n\r\n      var bioSample = {\r\n        Version: 1,\r\n        Header: {\r\n          Factor: 2, // Facial features\r\n          Format: {\r\n            FormatOwner: 0, // Not used\r\n            FormatID: 0\r\n          },\r\n          Type: 1, // Raw image\r\n          Purpose: 1, // Verification\r\n          Quality: -1,\r\n          Encryption: 0 // Unencrypted\r\n        },\r\n        Data: stob64u(imageData)\r\n      }\r\n      authData.push(bioSample)\r\n    })\r\n    submitFaceData(userName, JSON.stringify(authData))\r\n  }\r\n\r\n  const submitFaceData = (userName, faceCred) => {\r\n    submitData(userName, stob64u(faceCred))\r\n  }\r\n\r\n  const submitData = (userName, credentialData, tokenId) => {\r\n    console.log(credentialData)\r\n  }\r\n  const errCallBack = (e) => {\r\n    console.log(e)\r\n  }\r\n  const progressCallBack = (e) => {\r\n    console.log(e)\r\n  }\r\n\r\n  const faceCapture = async () => {\r\n    faceSDK.init(\r\n      video,\r\n      { video: true },\r\n      canvas,\r\n      canvas2,\r\n      1,\r\n      successCallBack,\r\n      errCallBack,\r\n      progressCallBack\r\n    )\r\n  }\r\n  if (canvas) {\r\n    // console.log(canvas.getContext('2d'))\r\n    // faceSDK.capture();\r\n    try {\r\n      // faceSDK.getAvailableDevices().then(data => console.log(data)).catch(e => error)\r\n      // faceSDK.start();\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n    // console.log(\"ere\")\r\n    // faceSDK.start();\r\n  }\r\n\r\n  const getConnectedDevices = async () => {\r\n    try {\r\n      const devices = await reader.enumerateDevices()\r\n      console.log(devices, \"devices\")\r\n      const myDevice = await reader.getDeviceInfo(devices[0])\r\n      console.log(myDevice)\r\n      // capture()\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  function setCookie(name, value, days) {\r\n    var expires = \"\"\r\n    if (days) {\r\n      var date = new Date()\r\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000)\r\n      expires = \"; expires=\" + date.toUTCString()\r\n    }\r\n    document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\"\r\n  }\r\n  const submit = async (data) => {\r\n    try {\r\n      // const auth = new FingerprintsAuth(authService);\r\n      // console.log(data)\r\n      // const token = await auth.identify(data)\r\n\r\n      // console.log(token, \"token\")\r\n      console.log(JSON.stringify(data), \"Asdsa\")\r\n      const encodedData = Buffer.from(JSON.stringify(data)).toString(\"base64\")\r\n      console.log(encodedData)\r\n      const res = await axios.post(\r\n        `https://${host}/DPWebAuth/DPWebAuthService.svc/AuthenticateUser`,\r\n        {\r\n          user: {\r\n            name: userName,\r\n            type: 6\r\n          },\r\n          credential: {\r\n            id: \"AC184A13-60AB-40e5-A514-E10F777EC2F9\",\r\n            data: encodedData\r\n          }\r\n        }\r\n      )\r\n      const token = res.data.AuthenticateUserResult.jwt\r\n      var decoded = jwt_decode(token)\r\n      console.log(decoded)\r\n      setCookie(\"credentials\", userName)\r\n      window.location.replace(\r\n        \"http://localhost:9089/BrowserWeb/servlet/BrowserServlet\"\r\n      )\r\n      // const token = auth.identify(BioSample[data])\r\n      // console.log(auth.identify(sample))\r\n      // setsamples({ samples: BioSample[data] })\r\n      console.log(\"fingerprint acquired\")\r\n    } catch (error) {\r\n      if (error?.message == \"Request failed with status code 404\") {\r\n        console.log(error?.response?.data, \"asdsa\")\r\n        setError(error?.response?.data)\r\n        capture()\r\n      }\r\n      console.log(error, \"error\")\r\n\r\n      // capture();\r\n    }\r\n  }\r\n\r\n  const checkDeviceStatus = async () => {\r\n    console.log(\"here\")\r\n    // reader.onDeviceConnected = async (device) => {\r\n    //   // await updateReaderStatus()\r\n    //   console.log(\"Device is connected\")\r\n    //   capture()\r\n    // }\r\n  }\r\n\r\n  reader.onDeviceDisconnected = async (device) => {\r\n    await updateReaderStatus()\r\n    console.log(\"device is diconnected\")\r\n  }\r\n  reader.onSamplesAcquired = async (data) => {\r\n    setError(\"\")\r\n    console.log(\"sampler equried\")\r\n    reader.stopAcquisition()\r\n    setScanStart(false)\r\n    submit(data.samples)\r\n  }\r\n  const updateReaderStatus = async () => {\r\n    try {\r\n      const devices = await reader.enumerateDevices()\r\n      setreaderConnected({ readerConnected: devices.length > 0 })\r\n    } catch (err) {\r\n      setreaderConnected({ readerConnected: false })\r\n    }\r\n  }\r\n  const capture = async () => {\r\n    if (userName != \"\") {\r\n      console.log(\"start scan\")\r\n      setScanStart(true)\r\n      try {\r\n        const res = await reader.startAcquisition(SampleFormat.Intermediate)\r\n        console.log(res, \"Res\")\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    } else {\r\n      setError(\"Please type username\")\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      {/* <form className=\"enrollement-form\" onSubmit={submit}> */}\r\n      <button\r\n        className={\"primary btn\"}\r\n        style={{ width: \"200px\", margin: \"0 auto\", marginBottom: \"30px\" }}\r\n        onClick={() => capture()}\r\n        type=\"button\"\r\n      >\r\n        Capture Fingerprint\r\n      </button>\r\n      <button\r\n        className={\"primary btn\"}\r\n        style={{ width: \"200px\", margin: \"0 auto\", marginBottom: \"30px\" }}\r\n        onClick={() => faceSDK.stopVideo()}\r\n        type=\"button\"\r\n      >\r\n        Stop Face\r\n      </button>\r\n\r\n      <button\r\n        className={\"primary btn\"}\r\n        style={{ width: \"200px\", margin: \"0 auto\", marginBottom: \"30px\" }}\r\n        onClick={() => faceCapture()}\r\n        type=\"button\"\r\n      >\r\n        Capture FAce\r\n      </button>\r\n      <input\r\n        type=\"text\"\r\n        value={userName}\r\n        onChange={(e) => setUserName(e.target.value)}\r\n      />\r\n      <>\r\n        {scanStart ? <p>Please scan your fingeprint</p> : <></>}\r\n        {error ? (\r\n          <>\r\n            <h3>Error</h3>\r\n            <p>Description:</p>\r\n            <p>{error.description}</p>\r\n            <p>Error code:</p>\r\n            <p>{error.error_code}</p>\r\n          </>\r\n        ) : (\r\n          <p></p>\r\n        )}\r\n      </>\r\n      {/* canvas */}\r\n      <Canvas canvasRef={canvasRef2} />\r\n      {/* display canvas */}\r\n      <Canvas canvasRef={canvasRef} style={{ display: \"none\" }} />\r\n      <video\r\n        width=\"640\"\r\n        height=\"480\"\r\n        ref={videoRef}\r\n        autoPlay\r\n        style={{ display: \"none\" }}\r\n      />\r\n      {/* </form> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","/* eslint-disable */\r\n/*!\r\n * async\r\n * https://github.com/caolan/async\r\n *\r\n * Copyright 2010-2014 Caolan McMahon\r\n * Released under the MIT license\r\n */\r\n;(function () {\r\n\r\n    var async = {};\r\n    function noop() {}\r\n    function identity(v) {\r\n        return v;\r\n    }\r\n    function toBool(v) {\r\n        return !!v;\r\n    }\r\n    function notId(v) {\r\n        return !v;\r\n    }\r\n\r\n    // global on the server, window in the browser\r\n    var previous_async;\r\n\r\n    // Establish the root object, `window` (`self`) in the browser, `global`\r\n    // on the server, or `this` in some virtual machines. We use `self`\r\n    // instead of `window` for `WebWorker` support.\r\n    var root = typeof self === 'object' && self === self && self ||\r\n            typeof global === 'object' && global.global === global && global ||\r\n            this;\r\n\r\n    if (root != null) {\r\n        previous_async = root.async;\r\n    }\r\n\r\n    async.noConflict = function () {\r\n        root.async = previous_async;\r\n        return async;\r\n    };\r\n\r\n    function only_once(fn) {\r\n        return function() {\r\n            if (fn === null) throw new Error(\"Callback was already called.\");\r\n            fn.apply(this, arguments);\r\n            fn = null;\r\n        };\r\n    }\r\n\r\n    function _once(fn) {\r\n        return function() {\r\n            if (fn === null) return;\r\n            fn.apply(this, arguments);\r\n            fn = null;\r\n        };\r\n    }\r\n\r\n    //// cross-browser compatiblity functions ////\r\n\r\n    var _toString = Object.prototype.toString;\r\n\r\n    var _isArray = Array.isArray || function (obj) {\r\n        return _toString.call(obj) === '[object Array]';\r\n    };\r\n\r\n    // Ported from underscore.js isObject\r\n    var _isObject = function(obj) {\r\n        var type = typeof obj;\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    };\r\n\r\n    function _isArrayLike(arr) {\r\n        return _isArray(arr) || (\r\n            // has a positive integer length property\r\n            typeof arr.length === \"number\" &&\r\n            arr.length >= 0 &&\r\n            arr.length % 1 === 0\r\n        );\r\n    }\r\n\r\n    function _arrayEach(arr, iterator) {\r\n        var index = -1,\r\n            length = arr.length;\r\n\r\n        while (++index < length) {\r\n            iterator(arr[index], index, arr);\r\n        }\r\n    }\r\n\r\n    function _map(arr, iterator) {\r\n        var index = -1,\r\n            length = arr.length,\r\n            result = Array(length);\r\n\r\n        while (++index < length) {\r\n            result[index] = iterator(arr[index], index, arr);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function _range(count) {\r\n        return _map(Array(count), function (v, i) { return i; });\r\n    }\r\n\r\n    function _reduce(arr, iterator, memo) {\r\n        _arrayEach(arr, function (x, i, a) {\r\n            memo = iterator(memo, x, i, a);\r\n        });\r\n        return memo;\r\n    }\r\n\r\n    function _forEachOf(object, iterator) {\r\n        _arrayEach(_keys(object), function (key) {\r\n            iterator(object[key], key);\r\n        });\r\n    }\r\n\r\n    function _indexOf(arr, item) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i] === item) return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    var _keys = Object.keys || function (obj) {\r\n        var keys = [];\r\n        for (var k in obj) {\r\n            if (obj.hasOwnProperty(k)) {\r\n                keys.push(k);\r\n            }\r\n        }\r\n        return keys;\r\n    };\r\n\r\n    function _keyIterator(coll) {\r\n        var i = -1;\r\n        var len;\r\n        var keys;\r\n        if (_isArrayLike(coll)) {\r\n            len = coll.length;\r\n            return function next() {\r\n                i++;\r\n                return i < len ? i : null;\r\n            };\r\n        } else {\r\n            keys = _keys(coll);\r\n            len = keys.length;\r\n            return function next() {\r\n                i++;\r\n                return i < len ? keys[i] : null;\r\n            };\r\n        }\r\n    }\r\n\r\n    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)\r\n    // This accumulates the arguments passed into an array, after a given index.\r\n    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).\r\n    function _restParam(func, startIndex) {\r\n        startIndex = startIndex == null ? func.length - 1 : +startIndex;\r\n        return function() {\r\n            var length = Math.max(arguments.length - startIndex, 0);\r\n            var rest = Array(length);\r\n            for (var index = 0; index < length; index++) {\r\n                rest[index] = arguments[index + startIndex];\r\n            }\r\n            switch (startIndex) {\r\n                case 0: return func.call(this, rest);\r\n                case 1: return func.call(this, arguments[0], rest);\r\n            }\r\n            // Currently unused but handle cases outside of the switch statement:\r\n            // var args = Array(startIndex + 1);\r\n            // for (index = 0; index < startIndex; index++) {\r\n            //     args[index] = arguments[index];\r\n            // }\r\n            // args[startIndex] = rest;\r\n            // return func.apply(this, args);\r\n        };\r\n    }\r\n\r\n    function _withoutIndex(iterator) {\r\n        return function (value, index, callback) {\r\n            return iterator(value, callback);\r\n        };\r\n    }\r\n\r\n    //// exported async module functions ////\r\n\r\n    //// nextTick implementation with browser-compatible fallback ////\r\n\r\n    // capture the global reference to guard against fakeTimer mocks\r\n    var _setImmediate = typeof setImmediate === 'function' && setImmediate;\r\n\r\n    var _delay = _setImmediate ? function(fn) {\r\n        // not a direct alias for IE10 compatibility\r\n        _setImmediate(fn);\r\n    } : function(fn) {\r\n        setTimeout(function() {\r\n            fn();\r\n        }, 0);\r\n    };\r\n\r\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\r\n        async.nextTick = process.nextTick;\r\n    } else {\r\n        async.nextTick = _delay;\r\n    }\r\n    async.setImmediate = _setImmediate ? _delay : async.nextTick;\r\n\r\n\r\n    async.forEach =\r\n    async.each = function (arr, iterator, callback) {\r\n        return async.eachOf(arr, _withoutIndex(iterator), callback);\r\n    };\r\n\r\n    async.forEachSeries =\r\n    async.eachSeries = function (arr, iterator, callback) {\r\n        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);\r\n    };\r\n\r\n\r\n    async.forEachLimit =\r\n    async.eachLimit = function (arr, limit, iterator, callback) {\r\n        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);\r\n    };\r\n\r\n    async.forEachOf =\r\n    async.eachOf = function (object, iterator, callback) {\r\n        callback = _once(callback || noop);\r\n        object = object || [];\r\n\r\n        var iter = _keyIterator(object);\r\n        var key, completed = 0;\r\n\r\n        while ((key = iter()) != null) {\r\n            completed += 1;\r\n            iterator(object[key], key, only_once(done));\r\n        }\r\n\r\n        if (completed === 0) callback(null);\r\n\r\n        function done(err) {\r\n            completed--;\r\n            if (err) {\r\n                callback(err);\r\n            }\r\n            // Check key is null in case iterator isn't exhausted\r\n            // and done resolved synchronously.\r\n            else if (key === null && completed <= 0) {\r\n                callback(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    async.forEachOfSeries =\r\n    async.eachOfSeries = function (obj, iterator, callback) {\r\n        callback = _once(callback || noop);\r\n        obj = obj || [];\r\n        var nextKey = _keyIterator(obj);\r\n        var key = nextKey();\r\n        function iterate() {\r\n            var sync = true;\r\n            if (key === null) {\r\n                return callback(null);\r\n            }\r\n            iterator(obj[key], key, only_once(function (err) {\r\n                if (err) {\r\n                    callback(err);\r\n                }\r\n                else {\r\n                    key = nextKey();\r\n                    if (key === null) {\r\n                        return callback(null);\r\n                    } else {\r\n                        if (sync) {\r\n                            async.setImmediate(iterate);\r\n                        } else {\r\n                            iterate();\r\n                        }\r\n                    }\r\n                }\r\n            }));\r\n            sync = false;\r\n        }\r\n        iterate();\r\n    };\r\n\r\n\r\n\r\n    async.forEachOfLimit =\r\n    async.eachOfLimit = function (obj, limit, iterator, callback) {\r\n        _eachOfLimit(limit)(obj, iterator, callback);\r\n    };\r\n\r\n    function _eachOfLimit(limit) {\r\n\r\n        return function (obj, iterator, callback) {\r\n            callback = _once(callback || noop);\r\n            obj = obj || [];\r\n            var nextKey = _keyIterator(obj);\r\n            if (limit <= 0) {\r\n                return callback(null);\r\n            }\r\n            var done = false;\r\n            var running = 0;\r\n            var errored = false;\r\n\r\n            (function replenish () {\r\n                if (done && running <= 0) {\r\n                    return callback(null);\r\n                }\r\n\r\n                while (running < limit && !errored) {\r\n                    var key = nextKey();\r\n                    if (key === null) {\r\n                        done = true;\r\n                        if (running <= 0) {\r\n                            callback(null);\r\n                        }\r\n                        return;\r\n                    }\r\n                    running += 1;\r\n                    iterator(obj[key], key, only_once(function (err) {\r\n                        running -= 1;\r\n                        if (err) {\r\n                            callback(err);\r\n                            errored = true;\r\n                        }\r\n                        else {\r\n                            replenish();\r\n                        }\r\n                    }));\r\n                }\r\n            })();\r\n        };\r\n    }\r\n\r\n\r\n    function doParallel(fn) {\r\n        return function (obj, iterator, callback) {\r\n            return fn(async.eachOf, obj, iterator, callback);\r\n        };\r\n    }\r\n    function doParallelLimit(fn) {\r\n        return function (obj, limit, iterator, callback) {\r\n            return fn(_eachOfLimit(limit), obj, iterator, callback);\r\n        };\r\n    }\r\n    function doSeries(fn) {\r\n        return function (obj, iterator, callback) {\r\n            return fn(async.eachOfSeries, obj, iterator, callback);\r\n        };\r\n    }\r\n\r\n    function _asyncMap(eachfn, arr, iterator, callback) {\r\n        callback = _once(callback || noop);\r\n        arr = arr || [];\r\n        var results = _isArrayLike(arr) ? [] : {};\r\n        eachfn(arr, function (value, index, callback) {\r\n            iterator(value, function (err, v) {\r\n                results[index] = v;\r\n                callback(err);\r\n            });\r\n        }, function (err) {\r\n            callback(err, results);\r\n        });\r\n    }\r\n\r\n    async.map = doParallel(_asyncMap);\r\n    async.mapSeries = doSeries(_asyncMap);\r\n    async.mapLimit = doParallelLimit(_asyncMap);\r\n\r\n    // reduce only has a series version, as doing reduce in parallel won't\r\n    // work in many situations.\r\n    async.inject =\r\n    async.foldl =\r\n    async.reduce = function (arr, memo, iterator, callback) {\r\n        async.eachOfSeries(arr, function (x, i, callback) {\r\n            iterator(memo, x, function (err, v) {\r\n                memo = v;\r\n                callback(err);\r\n            });\r\n        }, function (err) {\r\n            callback(err, memo);\r\n        });\r\n    };\r\n\r\n    async.foldr =\r\n    async.reduceRight = function (arr, memo, iterator, callback) {\r\n        var reversed = _map(arr, identity).reverse();\r\n        async.reduce(reversed, memo, iterator, callback);\r\n    };\r\n\r\n    async.transform = function (arr, memo, iterator, callback) {\r\n        if (arguments.length === 3) {\r\n            callback = iterator;\r\n            iterator = memo;\r\n            memo = _isArray(arr) ? [] : {};\r\n        }\r\n\r\n        async.eachOf(arr, function(v, k, cb) {\r\n            iterator(memo, v, k, cb);\r\n        }, function(err) {\r\n            callback(err, memo);\r\n        });\r\n    };\r\n\r\n    function _filter(eachfn, arr, iterator, callback) {\r\n        var results = [];\r\n        eachfn(arr, function (x, index, callback) {\r\n            iterator(x, function (v) {\r\n                if (v) {\r\n                    results.push({index: index, value: x});\r\n                }\r\n                callback();\r\n            });\r\n        }, function () {\r\n            callback(_map(results.sort(function (a, b) {\r\n                return a.index - b.index;\r\n            }), function (x) {\r\n                return x.value;\r\n            }));\r\n        });\r\n    }\r\n\r\n    async.select =\r\n    async.filter = doParallel(_filter);\r\n\r\n    async.selectLimit =\r\n    async.filterLimit = doParallelLimit(_filter);\r\n\r\n    async.selectSeries =\r\n    async.filterSeries = doSeries(_filter);\r\n\r\n    function _reject(eachfn, arr, iterator, callback) {\r\n        _filter(eachfn, arr, function(value, cb) {\r\n            iterator(value, function(v) {\r\n                cb(!v);\r\n            });\r\n        }, callback);\r\n    }\r\n    async.reject = doParallel(_reject);\r\n    async.rejectLimit = doParallelLimit(_reject);\r\n    async.rejectSeries = doSeries(_reject);\r\n\r\n    function _createTester(eachfn, check, getResult) {\r\n        return function(arr, limit, iterator, cb) {\r\n            function done() {\r\n                if (cb) cb(getResult(false, void 0));\r\n            }\r\n            function iteratee(x, _, callback) {\r\n                if (!cb) return callback();\r\n                iterator(x, function (v) {\r\n                    if (cb && check(v)) {\r\n                        cb(getResult(true, x));\r\n                        cb = iterator = false;\r\n                    }\r\n                    callback();\r\n                });\r\n            }\r\n            if (arguments.length > 3) {\r\n                eachfn(arr, limit, iteratee, done);\r\n            } else {\r\n                cb = iterator;\r\n                iterator = limit;\r\n                eachfn(arr, iteratee, done);\r\n            }\r\n        };\r\n    }\r\n\r\n    async.any =\r\n    async.some = _createTester(async.eachOf, toBool, identity);\r\n\r\n    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);\r\n\r\n    async.all =\r\n    async.every = _createTester(async.eachOf, notId, notId);\r\n\r\n    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);\r\n\r\n    function _findGetResult(v, x) {\r\n        return x;\r\n    }\r\n    async.detect = _createTester(async.eachOf, identity, _findGetResult);\r\n    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);\r\n    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);\r\n\r\n    async.sortBy = function (arr, iterator, callback) {\r\n        async.map(arr, function (x, callback) {\r\n            iterator(x, function (err, criteria) {\r\n                if (err) {\r\n                    callback(err);\r\n                }\r\n                else {\r\n                    callback(null, {value: x, criteria: criteria});\r\n                }\r\n            });\r\n        }, function (err, results) {\r\n            if (err) {\r\n                return callback(err);\r\n            }\r\n            else {\r\n                callback(null, _map(results.sort(comparator), function (x) {\r\n                    return x.value;\r\n                }));\r\n            }\r\n\r\n        });\r\n\r\n        function comparator(left, right) {\r\n            var a = left.criteria, b = right.criteria;\r\n            return a < b ? -1 : a > b ? 1 : 0;\r\n        }\r\n    };\r\n\r\n    async.auto = function (tasks, concurrency, callback) {\r\n        if (!callback) {\r\n            // concurrency is optional, shift the args.\r\n            callback = concurrency;\r\n            concurrency = null;\r\n        }\r\n        callback = _once(callback || noop);\r\n        var keys = _keys(tasks);\r\n        var remainingTasks = keys.length;\r\n        if (!remainingTasks) {\r\n            return callback(null);\r\n        }\r\n        if (!concurrency) {\r\n            concurrency = remainingTasks;\r\n        }\r\n\r\n        var results = {};\r\n        var runningTasks = 0;\r\n\r\n        var listeners = [];\r\n        function addListener(fn) {\r\n            listeners.unshift(fn);\r\n        }\r\n        function removeListener(fn) {\r\n            var idx = _indexOf(listeners, fn);\r\n            if (idx >= 0) listeners.splice(idx, 1);\r\n        }\r\n        function taskComplete() {\r\n            remainingTasks--;\r\n            _arrayEach(listeners.slice(0), function (fn) {\r\n                fn();\r\n            });\r\n        }\r\n\r\n        addListener(function () {\r\n            if (!remainingTasks) {\r\n                callback(null, results);\r\n            }\r\n        });\r\n\r\n        _arrayEach(keys, function (k) {\r\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\r\n            var taskCallback = _restParam(function(err, args) {\r\n                runningTasks--;\r\n                if (args.length <= 1) {\r\n                    args = args[0];\r\n                }\r\n                if (err) {\r\n                    var safeResults = {};\r\n                    _forEachOf(results, function(val, rkey) {\r\n                        safeResults[rkey] = val;\r\n                    });\r\n                    safeResults[k] = args;\r\n                    callback(err, safeResults);\r\n                }\r\n                else {\r\n                    results[k] = args;\r\n                    async.setImmediate(taskComplete);\r\n                }\r\n            });\r\n            var requires = task.slice(0, task.length - 1);\r\n            // prevent dead-locks\r\n            var len = requires.length;\r\n            var dep;\r\n            while (len--) {\r\n                if (!(dep = tasks[requires[len]])) {\r\n                    throw new Error('Has inexistant dependency');\r\n                }\r\n                if (_isArray(dep) && _indexOf(dep, k) >= 0) {\r\n                    throw new Error('Has cyclic dependencies');\r\n                }\r\n            }\r\n            function ready() {\r\n                return runningTasks < concurrency && _reduce(requires, function (a, x) {\r\n                    return (a && results.hasOwnProperty(x));\r\n                }, true) && !results.hasOwnProperty(k);\r\n            }\r\n            if (ready()) {\r\n                runningTasks++;\r\n                task[task.length - 1](taskCallback, results);\r\n            }\r\n            else {\r\n                addListener(listener);\r\n            }\r\n            function listener() {\r\n                if (ready()) {\r\n                    runningTasks++;\r\n                    removeListener(listener);\r\n                    task[task.length - 1](taskCallback, results);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    async.retry = function(times, task, callback) {\r\n        var DEFAULT_TIMES = 5;\r\n        var DEFAULT_INTERVAL = 0;\r\n\r\n        var attempts = [];\r\n\r\n        var opts = {\r\n            times: DEFAULT_TIMES,\r\n            interval: DEFAULT_INTERVAL\r\n        };\r\n\r\n        function parseTimes(acc, t){\r\n            if(typeof t === 'number'){\r\n                acc.times = parseInt(t, 10) || DEFAULT_TIMES;\r\n            } else if(typeof t === 'object'){\r\n                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;\r\n                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;\r\n            } else {\r\n                throw new Error('Unsupported argument type for \\'times\\': ' + typeof t);\r\n            }\r\n        }\r\n\r\n        var length = arguments.length;\r\n        if (length < 1 || length > 3) {\r\n            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');\r\n        } else if (length <= 2 && typeof times === 'function') {\r\n            callback = task;\r\n            task = times;\r\n        }\r\n        if (typeof times !== 'function') {\r\n            parseTimes(opts, times);\r\n        }\r\n        opts.callback = callback;\r\n        opts.task = task;\r\n\r\n        function wrappedTask(wrappedCallback, wrappedResults) {\r\n            function retryAttempt(task, finalAttempt) {\r\n                return function(seriesCallback) {\r\n                    task(function(err, result){\r\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\r\n                    }, wrappedResults);\r\n                };\r\n            }\r\n\r\n            function retryInterval(interval){\r\n                return function(seriesCallback){\r\n                    setTimeout(function(){\r\n                        seriesCallback(null);\r\n                    }, interval);\r\n                };\r\n            }\r\n\r\n            while (opts.times) {\r\n\r\n                var finalAttempt = !(opts.times-=1);\r\n                attempts.push(retryAttempt(opts.task, finalAttempt));\r\n                if(!finalAttempt && opts.interval > 0){\r\n                    attempts.push(retryInterval(opts.interval));\r\n                }\r\n            }\r\n\r\n            async.series(attempts, function(done, data){\r\n                data = data[data.length - 1];\r\n                (wrappedCallback || opts.callback)(data.err, data.result);\r\n            });\r\n        }\r\n\r\n        // If a callback is passed, run this as a controll flow\r\n        return opts.callback ? wrappedTask() : wrappedTask;\r\n    };\r\n\r\n    async.waterfall = function (tasks, callback) {\r\n        callback = _once(callback || noop);\r\n        if (!_isArray(tasks)) {\r\n            var err = new Error('First argument to waterfall must be an array of functions');\r\n            return callback(err);\r\n        }\r\n        if (!tasks.length) {\r\n            return callback();\r\n        }\r\n        function wrapIterator(iterator) {\r\n            return _restParam(function (err, args) {\r\n                if (err) {\r\n                    callback.apply(null, [err].concat(args));\r\n                }\r\n                else {\r\n                    var next = iterator.next();\r\n                    if (next) {\r\n                        args.push(wrapIterator(next));\r\n                    }\r\n                    else {\r\n                        args.push(callback);\r\n                    }\r\n                    ensureAsync(iterator).apply(null, args);\r\n                }\r\n            });\r\n        }\r\n        wrapIterator(async.iterator(tasks))();\r\n    };\r\n\r\n    function _parallel(eachfn, tasks, callback) {\r\n        callback = callback || noop;\r\n        var results = _isArrayLike(tasks) ? [] : {};\r\n\r\n        eachfn(tasks, function (task, key, callback) {\r\n            task(_restParam(function (err, args) {\r\n                if (args.length <= 1) {\r\n                    args = args[0];\r\n                }\r\n                results[key] = args;\r\n                callback(err);\r\n            }));\r\n        }, function (err) {\r\n            callback(err, results);\r\n        });\r\n    }\r\n\r\n    async.parallel = function (tasks, callback) {\r\n        _parallel(async.eachOf, tasks, callback);\r\n    };\r\n\r\n    async.parallelLimit = function(tasks, limit, callback) {\r\n        _parallel(_eachOfLimit(limit), tasks, callback);\r\n    };\r\n\r\n    async.series = function(tasks, callback) {\r\n        _parallel(async.eachOfSeries, tasks, callback);\r\n    };\r\n\r\n    async.iterator = function (tasks) {\r\n        function makeCallback(index) {\r\n            function fn() {\r\n                if (tasks.length) {\r\n                    tasks[index].apply(null, arguments);\r\n                }\r\n                return fn.next();\r\n            }\r\n            fn.next = function () {\r\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\r\n            };\r\n            return fn;\r\n        }\r\n        return makeCallback(0);\r\n    };\r\n\r\n    async.apply = _restParam(function (fn, args) {\r\n        return _restParam(function (callArgs) {\r\n            return fn.apply(\r\n                null, args.concat(callArgs)\r\n            );\r\n        });\r\n    });\r\n\r\n    function _concat(eachfn, arr, fn, callback) {\r\n        var result = [];\r\n        eachfn(arr, function (x, index, cb) {\r\n            fn(x, function (err, y) {\r\n                result = result.concat(y || []);\r\n                cb(err);\r\n            });\r\n        }, function (err) {\r\n            callback(err, result);\r\n        });\r\n    }\r\n    async.concat = doParallel(_concat);\r\n    async.concatSeries = doSeries(_concat);\r\n\r\n    async.whilst = function (test, iterator, callback) {\r\n        callback = callback || noop;\r\n        if (test()) {\r\n            var next = _restParam(function(err, args) {\r\n                if (err) {\r\n                    callback(err);\r\n                } else if (test.apply(this, args)) {\r\n                    iterator(next);\r\n                } else {\r\n                    callback(null);\r\n                }\r\n            });\r\n            iterator(next);\r\n        } else {\r\n            callback(null);\r\n        }\r\n    };\r\n\r\n    async.doWhilst = function (iterator, test, callback) {\r\n        var calls = 0;\r\n        return async.whilst(function() {\r\n            return ++calls <= 1 || test.apply(this, arguments);\r\n        }, iterator, callback);\r\n    };\r\n\r\n    async.until = function (test, iterator, callback) {\r\n        return async.whilst(function() {\r\n            return !test.apply(this, arguments);\r\n        }, iterator, callback);\r\n    };\r\n\r\n    async.doUntil = function (iterator, test, callback) {\r\n        return async.doWhilst(iterator, function() {\r\n            return !test.apply(this, arguments);\r\n        }, callback);\r\n    };\r\n\r\n    async.during = function (test, iterator, callback) {\r\n        callback = callback || noop;\r\n\r\n        var next = _restParam(function(err, args) {\r\n            if (err) {\r\n                callback(err);\r\n            } else {\r\n                args.push(check);\r\n                test.apply(this, args);\r\n            }\r\n        });\r\n\r\n        var check = function(err, truth) {\r\n            if (err) {\r\n                callback(err);\r\n            } else if (truth) {\r\n                iterator(next);\r\n            } else {\r\n                callback(null);\r\n            }\r\n        };\r\n\r\n        test(check);\r\n    };\r\n\r\n    async.doDuring = function (iterator, test, callback) {\r\n        var calls = 0;\r\n        async.during(function(next) {\r\n            if (calls++ < 1) {\r\n                next(null, true);\r\n            } else {\r\n                test.apply(this, arguments);\r\n            }\r\n        }, iterator, callback);\r\n    };\r\n\r\n    function _queue(worker, concurrency, payload) {\r\n        if (concurrency == null) {\r\n            concurrency = 1;\r\n        }\r\n        else if(concurrency === 0) {\r\n            throw new Error('Concurrency must not be zero');\r\n        }\r\n        function _insert(q, data, pos, callback) {\r\n            if (callback != null && typeof callback !== \"function\") {\r\n                throw new Error(\"task callback must be a function\");\r\n            }\r\n            q.started = true;\r\n            if (!_isArray(data)) {\r\n                data = [data];\r\n            }\r\n            if(data.length === 0 && q.idle()) {\r\n                // call drain immediately if there are no tasks\r\n                return async.setImmediate(function() {\r\n                    q.drain();\r\n                });\r\n            }\r\n            _arrayEach(data, function(task) {\r\n                var item = {\r\n                    data: task,\r\n                    callback: callback || noop\r\n                };\r\n\r\n                if (pos) {\r\n                    q.tasks.unshift(item);\r\n                } else {\r\n                    q.tasks.push(item);\r\n                }\r\n\r\n                if (q.tasks.length === q.concurrency) {\r\n                    q.saturated();\r\n                }\r\n            });\r\n            async.setImmediate(q.process);\r\n        }\r\n        function _next(q, tasks) {\r\n            return function(){\r\n                workers -= 1;\r\n\r\n                var removed = false;\r\n                var args = arguments;\r\n                _arrayEach(tasks, function (task) {\r\n                    _arrayEach(workersList, function (worker, index) {\r\n                        if (worker === task && !removed) {\r\n                            workersList.splice(index, 1);\r\n                            removed = true;\r\n                        }\r\n                    });\r\n\r\n                    task.callback.apply(task, args);\r\n                });\r\n                if (q.tasks.length + workers === 0) {\r\n                    q.drain();\r\n                }\r\n                q.process();\r\n            };\r\n        }\r\n\r\n        var workers = 0;\r\n        var workersList = [];\r\n        var q = {\r\n            tasks: [],\r\n            concurrency: concurrency,\r\n            payload: payload,\r\n            saturated: noop,\r\n            empty: noop,\r\n            drain: noop,\r\n            started: false,\r\n            paused: false,\r\n            push: function (data, callback) {\r\n                _insert(q, data, false, callback);\r\n            },\r\n            kill: function () {\r\n                q.drain = noop;\r\n                q.tasks = [];\r\n            },\r\n            unshift: function (data, callback) {\r\n                _insert(q, data, true, callback);\r\n            },\r\n            process: function () {\r\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\r\n                    while(workers < q.concurrency && q.tasks.length){\r\n                        var tasks = q.payload ?\r\n                            q.tasks.splice(0, q.payload) :\r\n                            q.tasks.splice(0, q.tasks.length);\r\n\r\n                        var data = _map(tasks, function (task) {\r\n                            return task.data;\r\n                        });\r\n\r\n                        if (q.tasks.length === 0) {\r\n                            q.empty();\r\n                        }\r\n                        workers += 1;\r\n                        workersList.push(tasks[0]);\r\n                        var cb = only_once(_next(q, tasks));\r\n                        worker(data, cb);\r\n                    }\r\n                }\r\n            },\r\n            length: function () {\r\n                return q.tasks.length;\r\n            },\r\n            running: function () {\r\n                return workers;\r\n            },\r\n            workersList: function () {\r\n                return workersList;\r\n            },\r\n            idle: function() {\r\n                return q.tasks.length + workers === 0;\r\n            },\r\n            pause: function () {\r\n                q.paused = true;\r\n            },\r\n            resume: function () {\r\n                if (q.paused === false) { return; }\r\n                q.paused = false;\r\n                var resumeCount = Math.min(q.concurrency, q.tasks.length);\r\n                // Need to call q.process once per concurrent\r\n                // worker to preserve full concurrency after pause\r\n                for (var w = 1; w <= resumeCount; w++) {\r\n                    async.setImmediate(q.process);\r\n                }\r\n            }\r\n        };\r\n        return q;\r\n    }\r\n\r\n    async.queue = function (worker, concurrency) {\r\n        var q = _queue(function (items, cb) {\r\n            worker(items[0], cb);\r\n        }, concurrency, 1);\r\n\r\n        return q;\r\n    };\r\n\r\n    async.priorityQueue = function (worker, concurrency) {\r\n\r\n        function _compareTasks(a, b){\r\n            return a.priority - b.priority;\r\n        }\r\n\r\n        function _binarySearch(sequence, item, compare) {\r\n            var beg = -1,\r\n                end = sequence.length - 1;\r\n            while (beg < end) {\r\n                var mid = beg + ((end - beg + 1) >>> 1);\r\n                if (compare(item, sequence[mid]) >= 0) {\r\n                    beg = mid;\r\n                } else {\r\n                    end = mid - 1;\r\n                }\r\n            }\r\n            return beg;\r\n        }\r\n\r\n        function _insert(q, data, priority, callback) {\r\n            if (callback != null && typeof callback !== \"function\") {\r\n                throw new Error(\"task callback must be a function\");\r\n            }\r\n            q.started = true;\r\n            if (!_isArray(data)) {\r\n                data = [data];\r\n            }\r\n            if(data.length === 0) {\r\n                // call drain immediately if there are no tasks\r\n                return async.setImmediate(function() {\r\n                    q.drain();\r\n                });\r\n            }\r\n            _arrayEach(data, function(task) {\r\n                var item = {\r\n                    data: task,\r\n                    priority: priority,\r\n                    callback: typeof callback === 'function' ? callback : noop\r\n                };\r\n\r\n                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\r\n\r\n                if (q.tasks.length === q.concurrency) {\r\n                    q.saturated();\r\n                }\r\n                async.setImmediate(q.process);\r\n            });\r\n        }\r\n\r\n        // Start with a normal queue\r\n        var q = async.queue(worker, concurrency);\r\n\r\n        // Override push to accept second parameter representing priority\r\n        q.push = function (data, priority, callback) {\r\n            _insert(q, data, priority, callback);\r\n        };\r\n\r\n        // Remove unshift function\r\n        delete q.unshift;\r\n\r\n        return q;\r\n    };\r\n\r\n    async.cargo = function (worker, payload) {\r\n        return _queue(worker, 1, payload);\r\n    };\r\n\r\n    function _console_fn(name) {\r\n        return _restParam(function (fn, args) {\r\n            fn.apply(null, args.concat([_restParam(function (err, args) {\r\n                if (typeof console === 'object') {\r\n                    if (err) {\r\n                        if (console.error) {\r\n                            console.error(err);\r\n                        }\r\n                    }\r\n                    else if (console[name]) {\r\n                        _arrayEach(args, function (x) {\r\n                            console[name](x);\r\n                        });\r\n                    }\r\n                }\r\n            })]));\r\n        });\r\n    }\r\n    async.log = _console_fn('log');\r\n    async.dir = _console_fn('dir');\r\n    /*async.info = _console_fn('info');\r\n    async.warn = _console_fn('warn');\r\n    async.error = _console_fn('error');*/\r\n\r\n    async.memoize = function (fn, hasher) {\r\n        var memo = {};\r\n        var queues = {};\r\n        hasher = hasher || identity;\r\n        var memoized = _restParam(function memoized(args) {\r\n            var callback = args.pop();\r\n            var key = hasher.apply(null, args);\r\n            if (key in memo) {\r\n                async.setImmediate(function () {\r\n                    callback.apply(null, memo[key]);\r\n                });\r\n            }\r\n            else if (key in queues) {\r\n                queues[key].push(callback);\r\n            }\r\n            else {\r\n                queues[key] = [callback];\r\n                fn.apply(null, args.concat([_restParam(function (args) {\r\n                    memo[key] = args;\r\n                    var q = queues[key];\r\n                    delete queues[key];\r\n                    for (var i = 0, l = q.length; i < l; i++) {\r\n                        q[i].apply(null, args);\r\n                    }\r\n                })]));\r\n            }\r\n        });\r\n        memoized.memo = memo;\r\n        memoized.unmemoized = fn;\r\n        return memoized;\r\n    };\r\n\r\n    async.unmemoize = function (fn) {\r\n        return function () {\r\n            return (fn.unmemoized || fn).apply(null, arguments);\r\n        };\r\n    };\r\n\r\n    function _times(mapper) {\r\n        return function (count, iterator, callback) {\r\n            mapper(_range(count), iterator, callback);\r\n        };\r\n    }\r\n\r\n    async.times = _times(async.map);\r\n    async.timesSeries = _times(async.mapSeries);\r\n    async.timesLimit = function (count, limit, iterator, callback) {\r\n        return async.mapLimit(_range(count), limit, iterator, callback);\r\n    };\r\n\r\n    async.seq = function (/* functions... */) {\r\n        var fns = arguments;\r\n        return _restParam(function (args) {\r\n            var that = this;\r\n\r\n            var callback = args[args.length - 1];\r\n            if (typeof callback == 'function') {\r\n                args.pop();\r\n            } else {\r\n                callback = noop;\r\n            }\r\n\r\n            async.reduce(fns, args, function (newargs, fn, cb) {\r\n                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {\r\n                    cb(err, nextargs);\r\n                })]));\r\n            },\r\n            function (err, results) {\r\n                callback.apply(that, [err].concat(results));\r\n            });\r\n        });\r\n    };\r\n\r\n    async.compose = function (/* functions... */) {\r\n        return async.seq.apply(null, Array.prototype.reverse.call(arguments));\r\n    };\r\n\r\n\r\n    function _applyEach(eachfn) {\r\n        return _restParam(function(fns, args) {\r\n            var go = _restParam(function(args) {\r\n                var that = this;\r\n                var callback = args.pop();\r\n                return eachfn(fns, function (fn, _, cb) {\r\n                    fn.apply(that, args.concat([cb]));\r\n                },\r\n                callback);\r\n            });\r\n            if (args.length) {\r\n                return go.apply(this, args);\r\n            }\r\n            else {\r\n                return go;\r\n            }\r\n        });\r\n    }\r\n\r\n    async.applyEach = _applyEach(async.eachOf);\r\n    async.applyEachSeries = _applyEach(async.eachOfSeries);\r\n\r\n\r\n    async.forever = function (fn, callback) {\r\n        var done = only_once(callback || noop);\r\n        var task = ensureAsync(fn);\r\n        function next(err) {\r\n            if (err) {\r\n                return done(err);\r\n            }\r\n            task(next);\r\n        }\r\n        next();\r\n    };\r\n\r\n    function ensureAsync(fn) {\r\n        return _restParam(function (args) {\r\n            var callback = args.pop();\r\n            args.push(function () {\r\n                var innerArgs = arguments;\r\n                if (sync) {\r\n                    async.setImmediate(function () {\r\n                        callback.apply(null, innerArgs);\r\n                    });\r\n                } else {\r\n                    callback.apply(null, innerArgs);\r\n                }\r\n            });\r\n            var sync = true;\r\n            fn.apply(this, args);\r\n            sync = false;\r\n        });\r\n    }\r\n\r\n    async.ensureAsync = ensureAsync;\r\n\r\n    async.constant = _restParam(function(values) {\r\n        var args = [null].concat(values);\r\n        return function (callback) {\r\n            return callback.apply(this, args);\r\n        };\r\n    });\r\n\r\n    async.wrapSync =\r\n    async.asyncify = function asyncify(func) {\r\n        return _restParam(function (args) {\r\n            var callback = args.pop();\r\n            var result;\r\n            try {\r\n                result = func.apply(this, args);\r\n            } catch (e) {\r\n                return callback(e);\r\n            }\r\n            // if result is Promise object\r\n            if (_isObject(result) && typeof result.then === \"function\") {\r\n                result.then(function(value) {\r\n                    callback(null, value);\r\n                })[\"catch\"](function(err) {\r\n                    callback(err.message ? err : new Error(err));\r\n                });\r\n            } else {\r\n                callback(null, result);\r\n            }\r\n        });\r\n    };\r\n\r\n    // Node.js\r\n    if (typeof module === 'object' && module.exports) {\r\n        module.exports = async;\r\n    }\r\n    // AMD / RequireJS\r\n    else if (typeof define === 'function' && define.amd) {\r\n        define('async', function () {\r\n            return async;\r\n        });\r\n    }\r\n    // included directly via <script> tag\r\n    else {\r\n        root.async = async;\r\n    }\r\n\r\n}());\r\n\r\n;(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('sha1',[], factory);\r\n    } else {\r\n        window.sha1 = factory();\r\n    }\r\n})(function () {\r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n     * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\r\n     * in FIPS PUB 180-1\r\n     * Copyright (C) Paul Johnston 2000.\r\n     * See http://pajhome.org.uk/site/legal.html for details.\r\n     *\r\n     * Modified by Tom Wu (tjw@cs.stanford.edu) for the\r\n     * SRP JavaScript implementation.\r\n     */\r\n    var sha1 = function() {\r\n        /*\r\n        * Convert a 32-bit number to a hex string with ms-byte first\r\n        */\r\n        var hex_chr = \"0123456789abcdef\";\r\n\r\n        function hex(num) {\r\n            var str = \"\";\r\n            for (var j = 7; j >= 0; j--)\r\n                str += hex_chr.charAt((num >> (j * 4)) & 0x0F);\r\n            return str;\r\n        }\r\n\r\n        /*\r\n             * Convert a string to a sequence of 16-word blocks, stored as an array.\r\n             * Append padding bits and the length, as described in the SHA1 standard.\r\n             */\r\n        function str2blks_SHA1(str) {\r\n            var nblk = ((str.length + 8) >> 6) + 1;\r\n            var blks = new Array(nblk * 16);\r\n            for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\r\n            for (i = 0; i < str.length; i++)\r\n                blks[i >> 2] |= str.charCodeAt(i) << (24 - (i % 4) * 8);\r\n            blks[i >> 2] |= 0x80 << (24 - (i % 4) * 8);\r\n            blks[nblk * 16 - 1] = str.length * 8;\r\n            return blks;\r\n        }\r\n\r\n        /*\r\n             * Input is in hex format - trailing odd nibble gets a zero appended.\r\n             */\r\n        function hex2blks_SHA1(hex) {\r\n            var len = (hex.length + 1) >> 1;\r\n            var nblk = ((len + 8) >> 6) + 1;\r\n            var blks = new Array(nblk * 16);\r\n            for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\r\n            for (i = 0; i < len; i++)\r\n                blks[i >> 2] |= parseInt(hex.substr(2 * i, 2), 16) << (24 - (i % 4) * 8);\r\n            blks[i >> 2] |= 0x80 << (24 - (i % 4) * 8);\r\n            blks[nblk * 16 - 1] = len * 8;\r\n            return blks;\r\n        }\r\n\r\n        function ba2blks_SHA1(ba, off, len) {\r\n            var nblk = ((len + 8) >> 6) + 1;\r\n            var blks = new Array(nblk * 16);\r\n            for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\r\n            for (i = 0; i < len; i++)\r\n                blks[i >> 2] |= (ba[off + i] & 0xFF) << (24 - (i % 4) * 8);\r\n            blks[i >> 2] |= 0x80 << (24 - (i % 4) * 8);\r\n            blks[nblk * 16 - 1] = len * 8;\r\n            return blks;\r\n        }\r\n\r\n        /*\r\n             * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n             * to work around bugs in some JS interpreters.\r\n             */\r\n        function add(x, y) {\r\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n            var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n            return (msw << 16) | (lsw & 0xFFFF);\r\n        }\r\n\r\n        /*\r\n             * Bitwise rotate a 32-bit number to the left\r\n             */\r\n        function rol(num, cnt) {\r\n            return (num << cnt) | (num >>> (32 - cnt));\r\n        }\r\n\r\n        /*\r\n             * Perform the appropriate triplet combination function for the current\r\n             * iteration\r\n             */\r\n        function ft(t, b, c, d) {\r\n            if (t < 20) return (b & c) | ((~b) & d);\r\n            if (t < 40) return b ^ c ^ d;\r\n            if (t < 60) return (b & c) | (b & d) | (c & d);\r\n            return b ^ c ^ d;\r\n        }\r\n\r\n        /*\r\n             * Determine the appropriate additive constant for the current iteration\r\n             */\r\n        function kt(t) {\r\n            return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 :\r\n            (t < 60) ? -1894007588 : -899497514;\r\n        }\r\n\r\n        /*\r\n             * Take a string and return the hex representation of its SHA-1.\r\n             */\r\n        function calcSHA1(str) {\r\n            return calcSHA1Blks(str2blks_SHA1(str));\r\n        }\r\n\r\n        function calcSHA1Hex(str) {\r\n            return calcSHA1Blks(hex2blks_SHA1(str));\r\n        }\r\n\r\n        function calcSHA1BA(ba) {\r\n            return calcSHA1Blks(ba2blks_SHA1(ba, 0, ba.length));\r\n        }\r\n\r\n        function calcSHA1BAEx(ba, off, len) {\r\n            return calcSHA1Blks(ba2blks_SHA1(ba, off, len));\r\n        }\r\n\r\n        function calcSHA1Blks(x) {\r\n            var s = calcSHA1Raw(x);\r\n            return hex(s[0]) + hex(s[1]) + hex(s[2]) + hex(s[3]) + hex(s[4]);\r\n        }\r\n\r\n        function calcSHA1Raw(x) {\r\n            var w = new Array(80);\r\n\r\n            var a = 1732584193;\r\n            var b = -271733879;\r\n            var c = -1732584194;\r\n            var d = 271733878;\r\n            var e = -1009589776;\r\n\r\n            for (var i = 0; i < x.length; i += 16) {\r\n                var olda = a;\r\n                var oldb = b;\r\n                var oldc = c;\r\n                var oldd = d;\r\n                var olde = e;\r\n\r\n                for (var j = 0; j < 80; j++) {\r\n                    var t;\r\n                    if (j < 16) w[j] = x[i + j];\r\n                    else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\r\n                    t = add(add(rol(a, 5), ft(j, b, c, d)), add(add(e, w[j]), kt(j)));\r\n                    e = d;\r\n                    d = c;\r\n                    c = rol(b, 30);\r\n                    b = a;\r\n                    a = t;\r\n                }\r\n\r\n                a = add(a, olda);\r\n                b = add(b, oldb);\r\n                c = add(c, oldc);\r\n                d = add(d, oldd);\r\n                e = add(e, olde);\r\n            }\r\n            return new Array(a, b, c, d, e);\r\n        }\r\n\r\n        function core_sha1(x, len) {\r\n            x[len >> 5] |= 0x80 << (24 - len % 32);\r\n            x[((len + 64 >> 9) << 4) + 15] = len;\r\n            return calcSHA1Raw(x);\r\n        }\r\n\r\n        return {\r\n            calcSHA1: calcSHA1,\r\n            calcSHA1Hex: calcSHA1Hex,\r\n            calcSHA1BA: calcSHA1BA,\r\n            calcSHA1BAEx: calcSHA1BAEx\r\n        }\r\n    }\r\n\r\n    return sha1();\r\n});\r\n\r\n\r\n;(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('sjcl', [], factory);\r\n    } else {\r\n        window.sjcl = factory();\r\n    }\r\n})(function () {\r\n\r\n    // SJCL configured with:\r\n    // --without-all --with-sha256 --with-aes --with-random --with-bitArray --with-codecHex --with-codecBase64 --compress=none\r\n\r\n    /** @fileOverview Javascript cryptography implementation.\r\n     *\r\n     * Crush to remove comments, shorten variable names and\r\n     * generally reduce transmission size.\r\n     *\r\n     * @author Emily Stark\r\n     * @author Mike Hamburg\r\n     * @author Dan Boneh\r\n     */\r\n\r\n    \"use strict\";\r\n    /*jslint indent: 2, bitwise: false, nomen: false, plusplus: false, white: false, regexp: false */\r\n    /*global document, window, escape, unescape, module, require, Uint32Array */\r\n\r\n    /** @namespace The Stanford Javascript Crypto Library, top-level namespace. */\r\n    var sjcl = {\r\n        /** @namespace Symmetric ciphers. */\r\n        cipher: {},\r\n\r\n        /** @namespace Hash functions.  Right now only SHA256 is implemented. */\r\n        hash: {},\r\n\r\n        /** @namespace Key exchange functions.  Right now only SRP is implemented. */\r\n        keyexchange: {},\r\n\r\n        /** @namespace Block cipher modes of operation. */\r\n        mode: {},\r\n\r\n        /** @namespace Miscellaneous.  HMAC and PBKDF2. */\r\n        misc: {},\r\n\r\n        /**\r\n         * @namespace Bit array encoders and decoders.\r\n         *\r\n         * @description\r\n         * The members of this namespace are functions which translate between\r\n         * SJCL's bitArrays and other objects (usually strings).  Because it\r\n         * isn't always clear which direction is encoding and which is decoding,\r\n         * the method names are \"fromBits\" and \"toBits\".\r\n         */\r\n        codec: {},\r\n\r\n        /** @namespace Exceptions. */\r\n        exception: {\r\n            /** @constructor Ciphertext is corrupt. */\r\n            corrupt: function (message) {\r\n                this.toString = function () { return \"CORRUPT: \" + this.message; };\r\n                this.message = message;\r\n            },\r\n\r\n            /** @constructor Invalid parameter. */\r\n            invalid: function (message) {\r\n                this.toString = function () { return \"INVALID: \" + this.message; };\r\n                this.message = message;\r\n            },\r\n\r\n            /** @constructor Bug or missing feature in SJCL. @constructor */\r\n            bug: function (message) {\r\n                this.toString = function () { return \"BUG: \" + this.message; };\r\n                this.message = message;\r\n            },\r\n\r\n            /** @constructor Something isn't ready. */\r\n            notReady: function (message) {\r\n                this.toString = function () { return \"NOT READY: \" + this.message; };\r\n                this.message = message;\r\n            }\r\n        }\r\n    };\r\n\r\n    /** @fileOverview Arrays of bits, encoded as arrays of Numbers.\r\n  *\r\n  * @author Emily Stark\r\n  * @author Mike Hamburg\r\n  * @author Dan Boneh\r\n  */\r\n\r\n    /** @namespace Arrays of bits, encoded as arrays of Numbers.\r\n     *\r\n     * @description\r\n     * <p>\r\n     * These objects are the currency accepted by SJCL's crypto functions.\r\n     * </p>\r\n     *\r\n     * <p>\r\n     * Most of our crypto primitives operate on arrays of 4-byte words internally,\r\n     * but many of them can take arguments that are not a multiple of 4 bytes.\r\n     * This library encodes arrays of bits (whose size need not be a multiple of 8\r\n     * bits) as arrays of 32-bit words.  The bits are packed, big-endian, into an\r\n     * array of words, 32 bits at a time.  Since the words are double-precision\r\n     * floating point numbers, they fit some extra data.  We use this (in a private,\r\n     * possibly-changing manner) to encode the number of bits actually  present\r\n     * in the last word of the array.\r\n     * </p>\r\n     *\r\n     * <p>\r\n     * Because bitwise ops clear this out-of-band data, these arrays can be passed\r\n     * to ciphers like AES which want arrays of words.\r\n     * </p>\r\n     */\r\n    sjcl.bitArray = {\r\n        /**\r\n         * Array slices in units of bits.\r\n         * @param {bitArray} a The array to slice.\r\n         * @param {Number} bstart The offset to the start of the slice, in bits.\r\n         * @param {Number} bend The offset to the end of the slice, in bits.  If this is undefined,\r\n         * slice until the end of the array.\r\n         * @return {bitArray} The requested slice.\r\n         */\r\n        bitSlice: function (a, bstart, bend) {\r\n            a = sjcl.bitArray._shiftRight(a.slice(bstart / 32), 32 - (bstart & 31)).slice(1);\r\n            return (bend === undefined) ? a : sjcl.bitArray.clamp(a, bend - bstart);\r\n        },\r\n\r\n        /**\r\n         * Extract a number packed into a bit array.\r\n         * @param {bitArray} a The array to slice.\r\n         * @param {Number} bstart The offset to the start of the slice, in bits.\r\n         * @param {Number} length The length of the number to extract.\r\n         * @return {Number} The requested slice.\r\n         */\r\n        extract: function (a, bstart, blength) {\r\n            // FIXME: this Math.floor is not necessary at all, but for some reason\r\n            // seems to suppress a bug in the Chromium JIT.\r\n            var x, sh = Math.floor((-bstart - blength) & 31);\r\n            if ((bstart + blength - 1 ^ bstart) & -32) {\r\n                // it crosses a boundary\r\n                x = (a[bstart / 32 | 0] << (32 - sh)) ^ (a[bstart / 32 + 1 | 0] >>> sh);\r\n            } else {\r\n                // within a single word\r\n                x = a[bstart / 32 | 0] >>> sh;\r\n            }\r\n            return x & ((1 << blength) - 1);\r\n        },\r\n\r\n        /**\r\n         * Concatenate two bit arrays.\r\n         * @param {bitArray} a1 The first array.\r\n         * @param {bitArray} a2 The second array.\r\n         * @return {bitArray} The concatenation of a1 and a2.\r\n         */\r\n        concat: function (a1, a2) {\r\n            if (a1.length === 0 || a2.length === 0) {\r\n                return a1.concat(a2);\r\n            }\r\n\r\n            var last = a1[a1.length - 1], shift = sjcl.bitArray.getPartial(last);\r\n            if (shift === 32) {\r\n                return a1.concat(a2);\r\n            } else {\r\n                return sjcl.bitArray._shiftRight(a2, shift, last | 0, a1.slice(0, a1.length - 1));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Find the length of an array of bits.\r\n         * @param {bitArray} a The array.\r\n         * @return {Number} The length of a, in bits.\r\n         */\r\n        bitLength: function (a) {\r\n            var l = a.length, x;\r\n            if (l === 0) { return 0; }\r\n            x = a[l - 1];\r\n            return (l - 1) * 32 + sjcl.bitArray.getPartial(x);\r\n        },\r\n\r\n        /**\r\n         * Truncate an array.\r\n         * @param {bitArray} a The array.\r\n         * @param {Number} len The length to truncate to, in bits.\r\n         * @return {bitArray} A new array, truncated to len bits.\r\n         */\r\n        clamp: function (a, len) {\r\n            if (a.length * 32 < len) { return a; }\r\n            a = a.slice(0, Math.ceil(len / 32));\r\n            var l = a.length;\r\n            len = len & 31;\r\n            if (l > 0 && len) {\r\n                a[l - 1] = sjcl.bitArray.partial(len, a[l - 1] & 0x80000000 >> (len - 1), 1);\r\n            }\r\n            return a;\r\n        },\r\n\r\n        /**\r\n         * Make a partial word for a bit array.\r\n         * @param {Number} len The number of bits in the word.\r\n         * @param {Number} x The bits.\r\n         * @param {Number} [0] _end Pass 1 if x has already been shifted to the high side.\r\n         * @return {Number} The partial word.\r\n         */\r\n        partial: function (len, x, _end) {\r\n            if (len === 32) { return x; }\r\n            return (_end ? x | 0 : x << (32 - len)) + len * 0x10000000000;\r\n        },\r\n\r\n        /**\r\n         * Get the number of bits used by a partial word.\r\n         * @param {Number} x The partial word.\r\n         * @return {Number} The number of bits used by the partial word.\r\n         */\r\n        getPartial: function (x) {\r\n            return Math.round(x / 0x10000000000) || 32;\r\n        },\r\n\r\n        /**\r\n         * Compare two arrays for equality in a predictable amount of time.\r\n         * @param {bitArray} a The first array.\r\n         * @param {bitArray} b The second array.\r\n         * @return {boolean} true if a == b; false otherwise.\r\n         */\r\n        equal: function (a, b) {\r\n            if (sjcl.bitArray.bitLength(a) !== sjcl.bitArray.bitLength(b)) {\r\n                return false;\r\n            }\r\n            var x = 0, i;\r\n            for (i = 0; i < a.length; i++) {\r\n                x |= a[i] ^ b[i];\r\n            }\r\n            return (x === 0);\r\n        },\r\n\r\n        /** Shift an array right.\r\n         * @param {bitArray} a The array to shift.\r\n         * @param {Number} shift The number of bits to shift.\r\n         * @param {Number} [carry=0] A byte to carry in\r\n         * @param {bitArray} [out=[]] An array to prepend to the output.\r\n         * @private\r\n         */\r\n        _shiftRight: function (a, shift, carry, out) {\r\n            var i, last2 = 0, shift2;\r\n            if (out === undefined) { out = []; }\r\n\r\n            for (; shift >= 32; shift -= 32) {\r\n                out.push(carry);\r\n                carry = 0;\r\n            }\r\n            if (shift === 0) {\r\n                return out.concat(a);\r\n            }\r\n\r\n            for (i = 0; i < a.length; i++) {\r\n                out.push(carry | a[i] >>> shift);\r\n                carry = a[i] << (32 - shift);\r\n            }\r\n            last2 = a.length ? a[a.length - 1] : 0;\r\n            shift2 = sjcl.bitArray.getPartial(last2);\r\n            out.push(sjcl.bitArray.partial(shift + shift2 & 31, (shift + shift2 > 32) ? carry : out.pop(), 1));\r\n            return out;\r\n        },\r\n\r\n        /** xor a block of 4 words together.\r\n         * @private\r\n         */\r\n        _xor4: function (x, y) {\r\n            return [x[0] ^ y[0], x[1] ^ y[1], x[2] ^ y[2], x[3] ^ y[3]];\r\n        },\r\n\r\n        /** byteswap a word array inplace.\r\n         * (does not handle partial words)\r\n         * @param {sjcl.bitArray} a word array\r\n         * @return {sjcl.bitArray} byteswapped array\r\n         */\r\n        byteswapM: function (a) {\r\n            var i, v, m = 0xff00;\r\n            for (i = 0; i < a.length; ++i) {\r\n                v = a[i];\r\n                a[i] = (v >>> 24) | ((v >>> 8) & m) | ((v & m) << 8) | (v << 24);\r\n            }\r\n            return a;\r\n        }\r\n    };\r\n\r\n    /** @fileOverview Javascript SHA-256 implementation.\r\n *\r\n * An older version of this implementation is available in the public\r\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\r\n * Stanford University 2008-2010 and BSD-licensed for liability\r\n * reasons.\r\n *\r\n * Special thanks to Aldo Cortesi for pointing out several bugs in\r\n * this code.\r\n *\r\n * @author Emily Stark\r\n * @author Mike Hamburg\r\n * @author Dan Boneh\r\n */\r\n\r\n    /**\r\n     * Context for a SHA-256 operation in progress.\r\n     * @constructor\r\n     * @class Secure Hash Algorithm, 256 bits.\r\n     */\r\n    sjcl.hash.sha256 = function (hash) {\r\n        if (!this._key[0]) { this._precompute(); }\r\n        if (hash) {\r\n            this._h = hash._h.slice(0);\r\n            this._buffer = hash._buffer.slice(0);\r\n            this._length = hash._length;\r\n        } else {\r\n            this.reset();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Hash a string or an array of words.\r\n     * @static\r\n     * @param {bitArray|String} data the data to hash.\r\n     * @return {bitArray} The hash value, an array of 16 big-endian words.\r\n     */\r\n    sjcl.hash.sha256.hash = function (data) {\r\n        return (new sjcl.hash.sha256()).update(data).finalize();\r\n    };\r\n\r\n    sjcl.hash.sha256.prototype = {\r\n        /**\r\n         * The hash's block size, in bits.\r\n         * @constant\r\n         */\r\n        blockSize: 512,\r\n\r\n        /**\r\n         * Reset the hash state.\r\n         * @return this\r\n         */\r\n        reset: function () {\r\n            this._h = this._init.slice(0);\r\n            this._buffer = [];\r\n            this._length = 0;\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Input several words to the hash.\r\n         * @param {bitArray|String} data the data to hash.\r\n         * @return this\r\n         */\r\n        update: function (data) {\r\n            if (typeof data === \"string\") {\r\n                data = sjcl.codec.utf8String.toBits(data);\r\n            }\r\n            var i, b = this._buffer = sjcl.bitArray.concat(this._buffer, data),\r\n                ol = this._length,\r\n                nl = this._length = ol + sjcl.bitArray.bitLength(data);\r\n            for (i = 512 + ol & -512; i <= nl; i += 512) {\r\n                this._block(b.splice(0, 16));\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Complete hashing and output the hash value.\r\n         * @return {bitArray} The hash value, an array of 8 big-endian words.\r\n         */\r\n        finalize: function () {\r\n            var i, b = this._buffer, h = this._h;\r\n\r\n            // Round out and push the buffer\r\n            b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1, 1)]);\r\n\r\n            // Round out the buffer to a multiple of 16 words, less the 2 length words.\r\n            for (i = b.length + 2; i & 15; i++) {\r\n                b.push(0);\r\n            }\r\n\r\n            // append the length\r\n            b.push(Math.floor(this._length / 0x100000000));\r\n            b.push(this._length | 0);\r\n\r\n            while (b.length) {\r\n                this._block(b.splice(0, 16));\r\n            }\r\n\r\n            this.reset();\r\n            return h;\r\n        },\r\n\r\n        /**\r\n         * The SHA-256 initialization vector, to be precomputed.\r\n         * @private\r\n         */\r\n        _init: [],\r\n        /*\r\n        _init:[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],\r\n        */\r\n\r\n        /**\r\n         * The SHA-256 hash key, to be precomputed.\r\n         * @private\r\n         */\r\n        _key: [],\r\n        /*\r\n        _key:\r\n          [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\r\n           0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\r\n           0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\r\n           0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\r\n           0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\r\n           0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\r\n           0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\r\n           0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2],\r\n        */\r\n\r\n\r\n        /**\r\n         * Function to precompute _init and _key.\r\n         * @private\r\n         */\r\n        _precompute: function () {\r\n            var i = 0, prime = 2, factor;\r\n\r\n            function frac(x) { return (x - Math.floor(x)) * 0x100000000 | 0; }\r\n\r\n            outer: for (; i < 64; prime++) {\r\n                for (factor = 2; factor * factor <= prime; factor++) {\r\n                    if (prime % factor === 0) {\r\n                        // not a prime\r\n                        continue outer;\r\n                    }\r\n                }\r\n\r\n                if (i < 8) {\r\n                    this._init[i] = frac(Math.pow(prime, 1 / 2));\r\n                }\r\n                this._key[i] = frac(Math.pow(prime, 1 / 3));\r\n                i++;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Perform one cycle of SHA-256.\r\n         * @param {bitArray} words one block of words.\r\n         * @private\r\n         */\r\n        _block: function (words) {\r\n            var i, tmp, a, b,\r\n              w = words.slice(0),\r\n              h = this._h,\r\n              k = this._key,\r\n              h0 = h[0], h1 = h[1], h2 = h[2], h3 = h[3],\r\n              h4 = h[4], h5 = h[5], h6 = h[6], h7 = h[7];\r\n\r\n            /* Rationale for placement of |0 :\r\n             * If a value can overflow is original 32 bits by a factor of more than a few\r\n             * million (2^23 ish), there is a possibility that it might overflow the\r\n             * 53-bit mantissa and lose precision.\r\n             *\r\n             * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\r\n             * propagates around the loop, and on the hash state h[].  I don't believe\r\n             * that the clamps on h4 and on h0 are strictly necessary, but it's close\r\n             * (for h4 anyway), and better safe than sorry.\r\n             *\r\n             * The clamps on h[] are necessary for the output to be correct even in the\r\n             * common case and for short inputs.\r\n             */\r\n            for (i = 0; i < 64; i++) {\r\n                // load up the input word for this round\r\n                if (i < 16) {\r\n                    tmp = w[i];\r\n                } else {\r\n                    a = w[(i + 1) & 15];\r\n                    b = w[(i + 14) & 15];\r\n                    tmp = w[i & 15] = ((a >>> 7 ^ a >>> 18 ^ a >>> 3 ^ a << 25 ^ a << 14) +\r\n                                     (b >>> 17 ^ b >>> 19 ^ b >>> 10 ^ b << 15 ^ b << 13) +\r\n                                     w[i & 15] + w[(i + 9) & 15]) | 0;\r\n                }\r\n\r\n                tmp = (tmp + h7 + (h4 >>> 6 ^ h4 >>> 11 ^ h4 >>> 25 ^ h4 << 26 ^ h4 << 21 ^ h4 << 7) + (h6 ^ h4 & (h5 ^ h6)) + k[i]); // | 0;\r\n\r\n                // shift register\r\n                h7 = h6; h6 = h5; h5 = h4;\r\n                h4 = h3 + tmp | 0;\r\n                h3 = h2; h2 = h1; h1 = h0;\r\n\r\n                h0 = (tmp + ((h1 & h2) ^ (h3 & (h1 ^ h2))) + (h1 >>> 2 ^ h1 >>> 13 ^ h1 >>> 22 ^ h1 << 30 ^ h1 << 19 ^ h1 << 10)) | 0;\r\n            }\r\n\r\n            h[0] = h[0] + h0 | 0;\r\n            h[1] = h[1] + h1 | 0;\r\n            h[2] = h[2] + h2 | 0;\r\n            h[3] = h[3] + h3 | 0;\r\n            h[4] = h[4] + h4 | 0;\r\n            h[5] = h[5] + h5 | 0;\r\n            h[6] = h[6] + h6 | 0;\r\n            h[7] = h[7] + h7 | 0;\r\n        }\r\n    };\r\n\r\n    /** @fileOverview Low-level AES implementation.\r\n *\r\n * This file contains a low-level implementation of AES, optimized for\r\n * size and for efficiency on several browsers.  It is based on\r\n * OpenSSL's aes_core.c, a public-domain implementation by Vincent\r\n * Rijmen, Antoon Bosselaers and Paulo Barreto.\r\n *\r\n * An older version of this implementation is available in the public\r\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\r\n * Stanford University 2008-2010 and BSD-licensed for liability\r\n * reasons.\r\n *\r\n * @author Emily Stark\r\n * @author Mike Hamburg\r\n * @author Dan Boneh\r\n */\r\n\r\n    /**\r\n     * Schedule out an AES key for both encryption and decryption.  This\r\n     * is a low-level class.  Use a cipher mode to do bulk encryption.\r\n     *\r\n     * @constructor\r\n     * @param {Array} key The key as an array of 4, 6 or 8 words.\r\n     *\r\n     * @class Advanced Encryption Standard (low-level interface)\r\n     */\r\n    sjcl.cipher.aes = function (key) {\r\n        if (!this._tables[0][0][0]) {\r\n            this._precompute();\r\n        }\r\n\r\n        var i, j, tmp,\r\n          encKey, decKey,\r\n          sbox = this._tables[0][4], decTable = this._tables[1],\r\n          keyLen = key.length, rcon = 1;\r\n\r\n        if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\r\n            throw new sjcl.exception.invalid(\"invalid aes key size\");\r\n        }\r\n\r\n        this._key = [encKey = key.slice(0), decKey = []];\r\n\r\n        // schedule encryption keys\r\n        for (i = keyLen; i < 4 * keyLen + 28; i++) {\r\n            tmp = encKey[i - 1];\r\n\r\n            // apply sbox\r\n            if (i % keyLen === 0 || (keyLen === 8 && i % keyLen === 4)) {\r\n                tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255];\r\n\r\n                // shift rows and add rcon\r\n                if (i % keyLen === 0) {\r\n                    tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\r\n                    rcon = rcon << 1 ^ (rcon >> 7) * 283;\r\n                }\r\n            }\r\n\r\n            encKey[i] = encKey[i - keyLen] ^ tmp;\r\n        }\r\n\r\n        // schedule decryption keys\r\n        for (j = 0; i; j++, i--) {\r\n            tmp = encKey[j & 3 ? i : i - 4];\r\n            if (i <= 4 || j < 4) {\r\n                decKey[j] = tmp;\r\n            } else {\r\n                decKey[j] = decTable[0][sbox[tmp >>> 24]] ^\r\n                            decTable[1][sbox[tmp >> 16 & 255]] ^\r\n                            decTable[2][sbox[tmp >> 8 & 255]] ^\r\n                            decTable[3][sbox[tmp & 255]];\r\n            }\r\n        }\r\n    };\r\n\r\n    sjcl.cipher.aes.prototype = {\r\n        // public\r\n        /* Something like this might appear here eventually\r\n        name: \"AES\",\r\n        blockSize: 4,\r\n        keySizes: [4,6,8],\r\n        */\r\n\r\n        /**\r\n         * Encrypt an array of 4 big-endian words.\r\n         * @param {Array} data The plaintext.\r\n         * @return {Array} The ciphertext.\r\n         */\r\n        encrypt: function (data) { return this._crypt(data, 0); },\r\n\r\n        /**\r\n         * Decrypt an array of 4 big-endian words.\r\n         * @param {Array} data The ciphertext.\r\n         * @return {Array} The plaintext.\r\n         */\r\n        decrypt: function (data) { return this._crypt(data, 1); },\r\n\r\n        /**\r\n         * The expanded S-box and inverse S-box tables.  These will be computed\r\n         * on the client so that we don't have to send them down the wire.\r\n         *\r\n         * There are two tables, _tables[0] is for encryption and\r\n         * _tables[1] is for decryption.\r\n         *\r\n         * The first 4 sub-tables are the expanded S-box with MixColumns.  The\r\n         * last (_tables[01][4]) is the S-box itself.\r\n         *\r\n         * @private\r\n         */\r\n        _tables: [[[], [], [], [], []], [[], [], [], [], []]],\r\n\r\n        /**\r\n         * Expand the S-box tables.\r\n         *\r\n         * @private\r\n         */\r\n        _precompute: function () {\r\n            var encTable = this._tables[0], decTable = this._tables[1],\r\n                sbox = encTable[4], sboxInv = decTable[4],\r\n                i, x, xInv, d = [], th = [], x2, x4, x8, s, tEnc, tDec;\r\n\r\n            // Compute double and third tables\r\n            for (i = 0; i < 256; i++) {\r\n                th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\r\n            }\r\n\r\n            for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\r\n                // Compute sbox\r\n                s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\r\n                s = s >> 8 ^ s & 255 ^ 99;\r\n                sbox[x] = s;\r\n                sboxInv[s] = x;\r\n\r\n                // Compute MixColumns\r\n                x8 = d[x4 = d[x2 = d[x]]];\r\n                tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\r\n                tEnc = d[s] * 0x101 ^ s * 0x1010100;\r\n\r\n                for (i = 0; i < 4; i++) {\r\n                    encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\r\n                    decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\r\n                }\r\n            }\r\n\r\n            // Compactify.  Considerable speedup on Firefox.\r\n            for (i = 0; i < 5; i++) {\r\n                encTable[i] = encTable[i].slice(0);\r\n                decTable[i] = decTable[i].slice(0);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Encryption and decryption core.\r\n         * @param {Array} input Four words to be encrypted or decrypted.\r\n         * @param dir The direction, 0 for encrypt and 1 for decrypt.\r\n         * @return {Array} The four encrypted or decrypted words.\r\n         * @private\r\n         */\r\n        _crypt: function (input, dir) {\r\n            if (input.length !== 4) {\r\n                throw new sjcl.exception.invalid(\"invalid aes block size\");\r\n            }\r\n\r\n            var key = this._key[dir],\r\n                // state variables a,b,c,d are loaded with pre-whitened data\r\n                a = input[0] ^ key[0],\r\n                b = input[dir ? 3 : 1] ^ key[1],\r\n                c = input[2] ^ key[2],\r\n                d = input[dir ? 1 : 3] ^ key[3],\r\n                a2, b2, c2,\r\n\r\n                nInnerRounds = key.length / 4 - 2,\r\n                i,\r\n                kIndex = 4,\r\n                out = [0, 0, 0, 0],\r\n                table = this._tables[dir],\r\n\r\n                // load up the tables\r\n                t0 = table[0],\r\n                t1 = table[1],\r\n                t2 = table[2],\r\n                t3 = table[3],\r\n                sbox = table[4];\r\n\r\n            // Inner rounds.  Cribbed from OpenSSL.\r\n            for (i = 0; i < nInnerRounds; i++) {\r\n                a2 = t0[a >>> 24] ^ t1[b >> 16 & 255] ^ t2[c >> 8 & 255] ^ t3[d & 255] ^ key[kIndex];\r\n                b2 = t0[b >>> 24] ^ t1[c >> 16 & 255] ^ t2[d >> 8 & 255] ^ t3[a & 255] ^ key[kIndex + 1];\r\n                c2 = t0[c >>> 24] ^ t1[d >> 16 & 255] ^ t2[a >> 8 & 255] ^ t3[b & 255] ^ key[kIndex + 2];\r\n                d = t0[d >>> 24] ^ t1[a >> 16 & 255] ^ t2[b >> 8 & 255] ^ t3[c & 255] ^ key[kIndex + 3];\r\n                kIndex += 4;\r\n                a = a2; b = b2; c = c2;\r\n            }\r\n\r\n            // Last round.\r\n            for (i = 0; i < 4; i++) {\r\n                out[dir ? 3 & -i : i] =\r\n                  sbox[a >>> 24] << 24 ^\r\n                  sbox[b >> 16 & 255] << 16 ^\r\n                  sbox[c >> 8 & 255] << 8 ^\r\n                  sbox[d & 255] ^\r\n                  key[kIndex++];\r\n                a2 = a; a = b; b = c; c = d; d = a2;\r\n            }\r\n\r\n            return out;\r\n        }\r\n    };\r\n\r\n\r\n    /** @fileOverview Random number generator.\r\n *\r\n * @author Emily Stark\r\n * @author Mike Hamburg\r\n * @author Dan Boneh\r\n * @author Michael Brooks\r\n */\r\n\r\n    /** @constructor\r\n     * @class Random number generator\r\n     * @description\r\n     * <b>Use sjcl.random as a singleton for this class!</b>\r\n     * <p>\r\n     * This random number generator is a derivative of Ferguson and Schneier's\r\n     * generator Fortuna.  It collects entropy from various events into several\r\n     * pools, implemented by streaming SHA-256 instances.  It differs from\r\n     * ordinary Fortuna in a few ways, though.\r\n     * </p>\r\n     *\r\n     * <p>\r\n     * Most importantly, it has an entropy estimator.  This is present because\r\n     * there is a strong conflict here between making the generator available\r\n     * as soon as possible, and making sure that it doesn't \"run on empty\".\r\n     * In Fortuna, there is a saved state file, and the system is likely to have\r\n     * time to warm up.\r\n     * </p>\r\n     *\r\n     * <p>\r\n     * Second, because users are unlikely to stay on the page for very long,\r\n     * and to speed startup time, the number of pools increases logarithmically:\r\n     * a new pool is created when the previous one is actually used for a reseed.\r\n     * This gives the same asymptotic guarantees as Fortuna, but gives more\r\n     * entropy to early reseeds.\r\n     * </p>\r\n     *\r\n     * <p>\r\n     * The entire mechanism here feels pretty klunky.  Furthermore, there are\r\n     * several improvements that should be made, including support for\r\n     * dedicated cryptographic functions that may be present in some browsers;\r\n     * state files in local storage; cookies containing randomness; etc.  So\r\n     * look for improvements in future versions.\r\n     * </p>\r\n     */\r\n    sjcl.prng = function (defaultParanoia) {\r\n\r\n        /* private */\r\n        this._pools = [new sjcl.hash.sha256()];\r\n        this._poolEntropy = [0];\r\n        this._reseedCount = 0;\r\n        this._robins = {};\r\n        this._eventId = 0;\r\n\r\n        this._collectorIds = {};\r\n        this._collectorIdNext = 0;\r\n\r\n        this._strength = 0;\r\n        this._poolStrength = 0;\r\n        this._nextReseed = 0;\r\n        this._key = [0, 0, 0, 0, 0, 0, 0, 0];\r\n        this._counter = [0, 0, 0, 0];\r\n        this._cipher = undefined;\r\n        this._defaultParanoia = defaultParanoia;\r\n\r\n        /* event listener stuff */\r\n        this._collectorsStarted = false;\r\n        this._callbacks = { progress: {}, seeded: {} };\r\n        this._callbackI = 0;\r\n\r\n        /* constants */\r\n        this._NOT_READY = 0;\r\n        this._READY = 1;\r\n        this._REQUIRES_RESEED = 2;\r\n\r\n        this._MAX_WORDS_PER_BURST = 65536;\r\n        this._PARANOIA_LEVELS = [0, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024];\r\n        this._MILLISECONDS_PER_RESEED = 30000;\r\n        this._BITS_PER_RESEED = 80;\r\n    };\r\n\r\n    sjcl.prng.prototype = {\r\n        /** Generate several random words, and return them in an array.\r\n         * A word consists of 32 bits (4 bytes)\r\n         * @param {Number} nwords The number of words to generate.\r\n         */\r\n        randomWords: function (nwords, paranoia) {\r\n            var out = [], i, readiness = this.isReady(paranoia), g;\r\n\r\n            if (readiness === this._NOT_READY) {\r\n                throw new sjcl.exception.notReady(\"generator isn't seeded\");\r\n            } else if (readiness & this._REQUIRES_RESEED) {\r\n                this._reseedFromPools(!(readiness & this._READY));\r\n            }\r\n\r\n            for (i = 0; i < nwords; i += 4) {\r\n                if ((i + 1) % this._MAX_WORDS_PER_BURST === 0) {\r\n                    this._gate();\r\n                }\r\n\r\n                g = this._gen4words();\r\n                out.push(g[0], g[1], g[2], g[3]);\r\n            }\r\n            this._gate();\r\n\r\n            return out.slice(0, nwords);\r\n        },\r\n\r\n        setDefaultParanoia: function (paranoia, allowZeroParanoia) {\r\n            if (paranoia === 0 && allowZeroParanoia !== \"Setting paranoia=0 will ruin your security; use it only for testing\") {\r\n                throw \"Setting paranoia=0 will ruin your security; use it only for testing\";\r\n            }\r\n\r\n            this._defaultParanoia = paranoia;\r\n        },\r\n\r\n        /**\r\n         * Add entropy to the pools.\r\n         * @param data The entropic value.  Should be a 32-bit integer, array of 32-bit integers, or string\r\n         * @param {Number} estimatedEntropy The estimated entropy of data, in bits\r\n         * @param {String} source The source of the entropy, eg \"mouse\"\r\n         */\r\n        addEntropy: function (data, estimatedEntropy, source) {\r\n            source = source || \"user\";\r\n\r\n            var id,\r\n              i, tmp,\r\n              t = (new Date()).valueOf(),\r\n              robin = this._robins[source],\r\n              oldReady = this.isReady(), err = 0, objName;\r\n\r\n            id = this._collectorIds[source];\r\n            if (id === undefined) { id = this._collectorIds[source] = this._collectorIdNext++; }\r\n\r\n            if (robin === undefined) { robin = this._robins[source] = 0; }\r\n            this._robins[source] = (this._robins[source] + 1) % this._pools.length;\r\n\r\n            switch (typeof (data)) {\r\n\r\n                case \"number\":\r\n                    if (estimatedEntropy === undefined) {\r\n                        estimatedEntropy = 1;\r\n                    }\r\n                    this._pools[robin].update([id, this._eventId++, 1, estimatedEntropy, t, 1, data | 0]);\r\n                    break;\r\n\r\n                case \"object\":\r\n                    objName = Object.prototype.toString.call(data);\r\n                    if (objName === \"[object Uint32Array]\") {\r\n                        tmp = [];\r\n                        for (i = 0; i < data.length; i++) {\r\n                            tmp.push(data[i]);\r\n                        }\r\n                        data = tmp;\r\n                    } else {\r\n                        if (objName !== \"[object Array]\") {\r\n                            err = 1;\r\n                        }\r\n                        for (i = 0; i < data.length && !err; i++) {\r\n                            if (typeof (data[i]) !== \"number\") {\r\n                                err = 1;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!err) {\r\n                        if (estimatedEntropy === undefined) {\r\n                            /* horrible entropy estimator */\r\n                            estimatedEntropy = 0;\r\n                            for (i = 0; i < data.length; i++) {\r\n                                tmp = data[i];\r\n                                while (tmp > 0) {\r\n                                    estimatedEntropy++;\r\n                                    tmp = tmp >>> 1;\r\n                                }\r\n                            }\r\n                        }\r\n                        this._pools[robin].update([id, this._eventId++, 2, estimatedEntropy, t, data.length].concat(data));\r\n                    }\r\n                    break;\r\n\r\n                case \"string\":\r\n                    if (estimatedEntropy === undefined) {\r\n                        /* English text has just over 1 bit per character of entropy.\r\n                         * But this might be HTML or something, and have far less\r\n                         * entropy than English...  Oh well, let's just say one bit.\r\n                         */\r\n                        estimatedEntropy = data.length;\r\n                    }\r\n                    this._pools[robin].update([id, this._eventId++, 3, estimatedEntropy, t, data.length]);\r\n                    this._pools[robin].update(data);\r\n                    break;\r\n\r\n                default:\r\n                    err = 1;\r\n            }\r\n            if (err) {\r\n                throw new sjcl.exception.bug(\"random: addEntropy only supports number, array of numbers or string\");\r\n            }\r\n\r\n            /* record the new strength */\r\n            this._poolEntropy[robin] += estimatedEntropy;\r\n            this._poolStrength += estimatedEntropy;\r\n\r\n            /* fire off events */\r\n            if (oldReady === this._NOT_READY) {\r\n                if (this.isReady() !== this._NOT_READY) {\r\n                    this._fireEvent(\"seeded\", Math.max(this._strength, this._poolStrength));\r\n                }\r\n                this._fireEvent(\"progress\", this.getProgress());\r\n            }\r\n        },\r\n\r\n        /** Is the generator ready? */\r\n        isReady: function (paranoia) {\r\n            var entropyRequired = this._PARANOIA_LEVELS[(paranoia !== undefined) ? paranoia : this._defaultParanoia];\r\n\r\n            if (this._strength && this._strength >= entropyRequired) {\r\n                return (this._poolEntropy[0] > this._BITS_PER_RESEED && (new Date()).valueOf() > this._nextReseed) ?\r\n                  this._REQUIRES_RESEED | this._READY :\r\n                  this._READY;\r\n            } else {\r\n                return (this._poolStrength >= entropyRequired) ?\r\n                  this._REQUIRES_RESEED | this._NOT_READY :\r\n                  this._NOT_READY;\r\n            }\r\n        },\r\n\r\n        /** Get the generator's progress toward readiness, as a fraction */\r\n        getProgress: function (paranoia) {\r\n            var entropyRequired = this._PARANOIA_LEVELS[paranoia ? paranoia : this._defaultParanoia];\r\n\r\n            if (this._strength >= entropyRequired) {\r\n                return 1.0;\r\n            } else {\r\n                return (this._poolStrength > entropyRequired) ?\r\n                  1.0 :\r\n                  this._poolStrength / entropyRequired;\r\n            }\r\n        },\r\n\r\n        /** start the built-in entropy collectors */\r\n        startCollectors: function () {\r\n            if (this._collectorsStarted) { return; }\r\n\r\n            this._eventListener = {\r\n                loadTimeCollector: this._bind(this._loadTimeCollector),\r\n                mouseCollector: this._bind(this._mouseCollector),\r\n                keyboardCollector: this._bind(this._keyboardCollector),\r\n                accelerometerCollector: this._bind(this._accelerometerCollector),\r\n                touchCollector: this._bind(this._touchCollector)\r\n            };\r\n\r\n            if (window.addEventListener) {\r\n                window.addEventListener(\"load\", this._eventListener.loadTimeCollector, false);\r\n                window.addEventListener(\"keypress\", this._eventListener.keyboardCollector, false);\r\n            } else if (document.attachEvent) {\r\n                document.attachEvent(\"onload\", this._eventListener.loadTimeCollector);\r\n                document.attachEvent(\"keypress\", this._eventListener.keyboardCollector);\r\n            } else {\r\n                throw new sjcl.exception.bug(\"can't attach event\");\r\n            }\r\n\r\n            this._collectorsStarted = true;\r\n        },\r\n\r\n        /** stop the built-in entropy collectors */\r\n        stopCollectors: function () {\r\n            if (!this._collectorsStarted) { return; }\r\n\r\n            if (window.removeEventListener) {\r\n                window.removeEventListener(\"load\", this._eventListener.loadTimeCollector, false);\r\n                window.removeEventListener(\"keypress\", this._eventListener.keyboardCollector, false);\r\n            } else if (document.detachEvent) {\r\n                document.detachEvent(\"onload\", this._eventListener.loadTimeCollector);\r\n                document.detachEvent(\"keypress\", this._eventListener.keyboardCollector);\r\n            }\r\n\r\n            this._collectorsStarted = false;\r\n        },\r\n\r\n        /* use a cookie to store entropy.\r\n        useCookie: function (all_cookies) {\r\n            throw new sjcl.exception.bug(\"random: useCookie is unimplemented\");\r\n        },*/\r\n\r\n        /** add an event listener for progress or seeded-ness. */\r\n        addEventListener: function (name, callback) {\r\n            this._callbacks[name][this._callbackI++] = callback;\r\n        },\r\n\r\n        /** remove an event listener for progress or seeded-ness */\r\n        removeEventListener: function (name, cb) {\r\n            var i, j, cbs = this._callbacks[name], jsTemp = [];\r\n\r\n            /* I'm not sure if this is necessary; in C++, iterating over a\r\n             * collection and modifying it at the same time is a no-no.\r\n             */\r\n\r\n            for (j in cbs) {\r\n                if (cbs.hasOwnProperty(j) && cbs[j] === cb) {\r\n                    jsTemp.push(j);\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < jsTemp.length; i++) {\r\n                j = jsTemp[i];\r\n                delete cbs[j];\r\n            }\r\n        },\r\n\r\n        _bind: function (func) {\r\n            var that = this;\r\n            return function () {\r\n                func.apply(that, arguments);\r\n            };\r\n        },\r\n\r\n        /** Generate 4 random words, no reseed, no gate.\r\n         * @private\r\n         */\r\n        _gen4words: function () {\r\n            for (var i = 0; i < 4; i++) {\r\n                this._counter[i] = this._counter[i] + 1 | 0;\r\n                if (this._counter[i]) { break; }\r\n            }\r\n            return this._cipher.encrypt(this._counter);\r\n        },\r\n\r\n        /* Rekey the AES instance with itself after a request, or every _MAX_WORDS_PER_BURST words.\r\n         * @private\r\n         */\r\n        _gate: function () {\r\n            this._key = this._gen4words().concat(this._gen4words());\r\n            this._cipher = new sjcl.cipher.aes(this._key);\r\n        },\r\n\r\n        /** Reseed the generator with the given words\r\n         * @private\r\n         */\r\n        _reseed: function (seedWords) {\r\n            this._key = sjcl.hash.sha256.hash(this._key.concat(seedWords));\r\n            this._cipher = new sjcl.cipher.aes(this._key);\r\n            for (var i = 0; i < 4; i++) {\r\n                this._counter[i] = this._counter[i] + 1 | 0;\r\n                if (this._counter[i]) { break; }\r\n            }\r\n        },\r\n\r\n        /** reseed the data from the entropy pools\r\n         * @param full If set, use all the entropy pools in the reseed.\r\n         */\r\n        _reseedFromPools: function (full) {\r\n            var reseedData = [], strength = 0, i;\r\n\r\n            this._nextReseed = reseedData[0] =\r\n              (new Date()).valueOf() + this._MILLISECONDS_PER_RESEED;\r\n\r\n            for (i = 0; i < 16; i++) {\r\n                /* On some browsers, this is cryptographically random.  So we might\r\n                 * as well toss it in the pot and stir...\r\n                 */\r\n                reseedData.push(Math.random() * 0x100000000 | 0);\r\n            }\r\n\r\n            for (i = 0; i < this._pools.length; i++) {\r\n                reseedData = reseedData.concat(this._pools[i].finalize());\r\n                strength += this._poolEntropy[i];\r\n                this._poolEntropy[i] = 0;\r\n\r\n                if (!full && (this._reseedCount & (1 << i))) { break; }\r\n            }\r\n\r\n            /* if we used the last pool, push a new one onto the stack */\r\n            if (this._reseedCount >= 1 << this._pools.length) {\r\n                this._pools.push(new sjcl.hash.sha256());\r\n                this._poolEntropy.push(0);\r\n            }\r\n\r\n            /* how strong was this reseed? */\r\n            this._poolStrength -= strength;\r\n            if (strength > this._strength) {\r\n                this._strength = strength;\r\n            }\r\n\r\n            this._reseedCount++;\r\n            this._reseed(reseedData);\r\n        },\r\n\r\n        _keyboardCollector: function () {\r\n            this._addCurrentTimeToEntropy(1);\r\n        },\r\n\r\n        _mouseCollector: function (ev) {\r\n            var x, y;\r\n\r\n            try {\r\n                x = ev.x || ev.clientX || ev.offsetX || 0;\r\n                y = ev.y || ev.clientY || ev.offsetY || 0;\r\n            } catch (err) {\r\n                // Event originated from a secure element. No mouse position available.\r\n                x = 0;\r\n                y = 0;\r\n            }\r\n\r\n            if (x != 0 && y != 0) {\r\n                sjcl.random.addEntropy([x, y], 2, \"mouse\");\r\n            }\r\n\r\n            this._addCurrentTimeToEntropy(0);\r\n        },\r\n\r\n        _touchCollector: function (ev) {\r\n            var touch = ev.touches[0] || ev.changedTouches[0];\r\n            var x = touch.pageX || touch.clientX,\r\n                y = touch.pageY || touch.clientY;\r\n\r\n            sjcl.random.addEntropy([x, y], 1, \"touch\");\r\n\r\n            this._addCurrentTimeToEntropy(0);\r\n        },\r\n\r\n        _loadTimeCollector: function () {\r\n            this._addCurrentTimeToEntropy(2);\r\n        },\r\n\r\n        _addCurrentTimeToEntropy: function (estimatedEntropy) {\r\n            if (typeof window !== 'undefined' && window.performance && typeof window.performance.now === \"function\") {\r\n                //how much entropy do we want to add here?\r\n                sjcl.random.addEntropy(window.performance.now(), estimatedEntropy, \"loadtime\");\r\n            } else {\r\n                sjcl.random.addEntropy((new Date()).valueOf(), estimatedEntropy, \"loadtime\");\r\n            }\r\n        },\r\n        _accelerometerCollector: function (ev) {\r\n            var ac = ev.accelerationIncludingGravity.x || ev.accelerationIncludingGravity.y || ev.accelerationIncludingGravity.z;\r\n            if (window.orientation) {\r\n                var or = window.orientation;\r\n                if (typeof or === \"number\") {\r\n                    sjcl.random.addEntropy(or, 1, \"accelerometer\");\r\n                }\r\n            }\r\n            if (ac) {\r\n                sjcl.random.addEntropy(ac, 2, \"accelerometer\");\r\n            }\r\n            this._addCurrentTimeToEntropy(0);\r\n        },\r\n\r\n        _fireEvent: function (name, arg) {\r\n            var j, cbs = sjcl.random._callbacks[name], cbsTemp = [];\r\n            /* TODO: there is a race condition between removing collectors and firing them */\r\n\r\n            /* I'm not sure if this is necessary; in C++, iterating over a\r\n             * collection and modifying it at the same time is a no-no.\r\n             */\r\n\r\n            for (j in cbs) {\r\n                if (cbs.hasOwnProperty(j)) {\r\n                    cbsTemp.push(cbs[j]);\r\n                }\r\n            }\r\n\r\n            for (j = 0; j < cbsTemp.length; j++) {\r\n                cbsTemp[j](arg);\r\n            }\r\n        }\r\n    };\r\n\r\n    /** an instance for the prng.\r\n    * @see sjcl.prng\r\n    */\r\n    sjcl.random = new sjcl.prng(6);\r\n\r\n    (function () {\r\n        // function for getting nodejs crypto module. catches and ignores errors.\r\n        function getCryptoModule() {\r\n            try {\r\n                return require('crypto');\r\n            }\r\n            catch (e) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        try {\r\n            var buf, crypt, ab;\r\n\r\n            // get cryptographically strong entropy depending on runtime environment\r\n            if (typeof module !== 'undefined' && module.exports && (crypt = getCryptoModule()) && crypt.randomBytes) {\r\n                buf = crypt.randomBytes(1024 / 8);\r\n                buf = new Uint32Array(new Uint8Array(buf).buffer);\r\n                sjcl.random.addEntropy(buf, 1024, \"crypto.randomBytes\");\r\n\r\n            } else if (typeof window !== 'undefined' && typeof Uint32Array !== 'undefined') {\r\n                ab = new Uint32Array(32);\r\n                if (window.crypto && window.crypto.getRandomValues) {\r\n                    window.crypto.getRandomValues(ab);\r\n                } else if (window.msCrypto && window.msCrypto.getRandomValues) {\r\n                    window.msCrypto.getRandomValues(ab);\r\n                } else {\r\n                    return;\r\n                }\r\n\r\n                // get cryptographically strong entropy in Webkit\r\n                sjcl.random.addEntropy(ab, 1024, \"crypto.getRandomValues\");\r\n\r\n            } else {\r\n                // no getRandomValues :-(\r\n            }\r\n        } catch (e) {\r\n            if (typeof window !== 'undefined' && window.console) {\r\n                console.log(\"There was an error collecting entropy from the browser:\");\r\n                console.log(e);\r\n                //we do not want the library to fail due to randomness not being maintained.\r\n            }\r\n        }\r\n    }());\r\n\r\n\r\n\r\n    /** @fileOverview Bit array codec implementations.\r\n     *\r\n     * @author Emily Stark\r\n     * @author Mike Hamburg\r\n     * @author Dan Boneh\r\n     */\r\n\r\n    /** @namespace Hexadecimal */\r\n    sjcl.codec.hex = {\r\n        /** Convert from a bitArray to a hex string. */\r\n        fromBits: function (arr) {\r\n            var out = \"\", i;\r\n            for (i = 0; i < arr.length; i++) {\r\n                out += ((arr[i] | 0) + 0xF00000000000).toString(16).substr(4);\r\n            }\r\n            return out.substr(0, sjcl.bitArray.bitLength(arr) / 4);//.replace(/(.{8})/g, \"$1 \");\r\n        },\r\n        /** Convert from a hex string to a bitArray. */\r\n        toBits: function (str) {\r\n            var i, out = [], len;\r\n            str = str.replace(/\\s|0x/g, \"\");\r\n            len = str.length;\r\n            str = str + \"00000000\";\r\n            for (i = 0; i < str.length; i += 8) {\r\n                out.push(parseInt(str.substr(i, 8), 16) ^ 0);\r\n            }\r\n            return sjcl.bitArray.clamp(out, len * 4);\r\n        }\r\n    };\r\n\r\n    /** @fileOverview Bit array codec implementations.\r\n *\r\n * @author Emily Stark\r\n * @author Mike Hamburg\r\n * @author Dan Boneh\r\n */\r\n\r\n    /**\r\n     * UTF-8 strings\r\n     * @namespace\r\n     */\r\n    sjcl.codec.utf8String = {\r\n        /** Convert from a bitArray to a UTF-8 string. */\r\n        fromBits: function (arr) {\r\n            var out = \"\", bl = sjcl.bitArray.bitLength(arr), i, tmp;\r\n            for (i = 0; i < bl / 8; i++) {\r\n                if ((i & 3) === 0) {\r\n                    tmp = arr[i / 4];\r\n                }\r\n                out += String.fromCharCode(tmp >>> 24);\r\n                tmp <<= 8;\r\n            }\r\n            return decodeURIComponent(escape(out));\r\n        },\r\n\r\n        /** Convert from a UTF-8 string to a bitArray. */\r\n        toBits: function (str) {\r\n            str = unescape(encodeURIComponent(str));\r\n            var out = [], i, tmp = 0;\r\n            for (i = 0; i < str.length; i++) {\r\n                tmp = tmp << 8 | str.charCodeAt(i);\r\n                if ((i & 3) === 3) {\r\n                    out.push(tmp);\r\n                    tmp = 0;\r\n                }\r\n            }\r\n            if (i & 3) {\r\n                out.push(sjcl.bitArray.partial(8 * (i & 3), tmp));\r\n            }\r\n            return out;\r\n        }\r\n    };\r\n\r\n    /** @fileOverview Bit array codec implementations.\r\n     *\r\n     * @author Emily Stark\r\n     * @author Mike Hamburg\r\n     * @author Dan Boneh\r\n     */\r\n\r\n    /**\r\n     * Base64 encoding/decoding\r\n     * @namespace\r\n     */\r\n    sjcl.codec.base64 = {\r\n        /** The base64 alphabet.\r\n         * @private\r\n         */\r\n        _chars: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\r\n\r\n        /** Convert from a bitArray to a base64 string. */\r\n        fromBits: function (arr, _noEquals, _url) {\r\n            var out = \"\", i, bits = 0, c = sjcl.codec.base64._chars, ta = 0, bl = sjcl.bitArray.bitLength(arr);\r\n            if (_url) {\r\n                c = c.substr(0, 62) + '-_';\r\n            }\r\n            for (i = 0; out.length * 6 < bl;) {\r\n                out += c.charAt((ta ^ arr[i] >>> bits) >>> 26);\r\n                if (bits < 6) {\r\n                    ta = arr[i] << (6 - bits);\r\n                    bits += 26;\r\n                    i++;\r\n                } else {\r\n                    ta <<= 6;\r\n                    bits -= 6;\r\n                }\r\n            }\r\n            while ((out.length & 3) && !_noEquals) { out += \"=\"; }\r\n            return out;\r\n        },\r\n\r\n        /** Convert from a base64 string to a bitArray */\r\n        toBits: function (str, _url) {\r\n            str = str.replace(/\\s|=/g, '');\r\n            var out = [], i, bits = 0, c = sjcl.codec.base64._chars, ta = 0, x;\r\n            if (_url) {\r\n                c = c.substr(0, 62) + '-_';\r\n            }\r\n            for (i = 0; i < str.length; i++) {\r\n                x = c.indexOf(str.charAt(i));\r\n                if (x < 0) {\r\n                    throw new sjcl.exception.invalid(\"this isn't base64!\");\r\n                }\r\n                if (bits > 26) {\r\n                    bits -= 26;\r\n                    out.push(ta ^ x >>> bits);\r\n                    ta = x << (32 - bits);\r\n                } else {\r\n                    bits += 6;\r\n                    ta ^= x << (32 - bits);\r\n                }\r\n            }\r\n            if (bits & 56) {\r\n                out.push(sjcl.bitArray.partial(bits & 56, ta, 1));\r\n            }\r\n            return out;\r\n        }\r\n    };\r\n\r\n    sjcl.codec.base64url = {\r\n        fromBits: function (arr) { return sjcl.codec.base64.fromBits(arr, 1, 1); },\r\n        toBits: function (str) { return sjcl.codec.base64.toBits(str, 1); }\r\n    };\r\n    return sjcl;\r\n});\r\n\r\n;(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('BigInteger', [], factory);\r\n    } else {\r\n        window.BigInteger = factory();\r\n    }\r\n})(function() {\r\n\r\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * Basic JavaScript BN library - subset useful for RSA encryption.\r\n * Copyright (c) 2005  Tom Wu\r\n * All Rights Reserved.\r\n * See \"LICENSE\" for details.\r\n */\r\n\r\n// Bits per digit\r\n    ;\r\n    var dbits;\r\n\r\n// JavaScript engine analysis\r\n    var canary = 0xdeadbeefcafe;\r\n    var j_lm = ((canary & 0xffffff) == 0xefcafe);\r\n\r\n// (public) Constructor\r\n    function BigInteger(a, b, c) {\r\n        if (a != null)\r\n            if (\"number\" == typeof a) this.fromNumber(a, b, c);\r\n            else if (b == null && \"string\" != typeof a) this.fromString(a, 256);\r\n            else this.fromString(a, b);\r\n    }\r\n\r\n// return new, unset BigInteger\r\n    function nbi() { return new BigInteger(null); }\r\n\r\n// am: Compute w_j += (x*this_i), propagate carries,\r\n// c is initial carry, returns final carry.\r\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\r\n// We need to select the fastest one that works in this environment.\r\n\r\n// am1: use a single mult and divide to get the high bits,\r\n// max digit bits should be 26 because\r\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\r\n    function am1(i, x, w, j, c, n) {\r\n        while (--n >= 0) {\r\n            var v = x * this[i++] + w[j] + c;\r\n            c = Math.floor(v / 0x4000000);\r\n            w[j++] = v & 0x3ffffff;\r\n        }\r\n        return c;\r\n    }\r\n\r\n// am2 avoids a big mult-and-extract completely.\r\n// Max digit bits should be <= 30 because we do bitwise ops\r\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\r\n    function am2(i, x, w, j, c, n) {\r\n        var xl = x & 0x7fff, xh = x >> 15;\r\n        while (--n >= 0) {\r\n            var l = this[i] & 0x7fff;\r\n            var h = this[i++] >> 15;\r\n            var m = xh * l + h * xl;\r\n            l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\r\n            c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\r\n            w[j++] = l & 0x3fffffff;\r\n        }\r\n        return c;\r\n    }\r\n\r\n// Alternately, set max digit bits to 28 since some\r\n// browsers slow down when dealing with 32-bit numbers.\r\n    function am3(i, x, w, j, c, n) {\r\n        var xl = x & 0x3fff, xh = x >> 14;\r\n        while (--n >= 0) {\r\n            var l = this[i] & 0x3fff;\r\n            var h = this[i++] >> 14;\r\n            var m = xh * l + h * xl;\r\n            l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\r\n            c = (l >> 28) + (m >> 14) + xh * h;\r\n            w[j++] = l & 0xfffffff;\r\n        }\r\n        return c;\r\n    }\r\n\r\n    if (j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\r\n        BigInteger.prototype.am = am2;\r\n        dbits = 30;\r\n    } else if (j_lm && (navigator.appName != \"Netscape\")) {\r\n        BigInteger.prototype.am = am1;\r\n        dbits = 26;\r\n    } else { // Mozilla/Netscape seems to prefer am3\r\n        BigInteger.prototype.am = am3;\r\n        dbits = 28;\r\n    }\r\n\r\n    BigInteger.prototype.DB = dbits;\r\n    BigInteger.prototype.DM = ((1 << dbits) - 1);\r\n    BigInteger.prototype.DV = (1 << dbits);\r\n\r\n    var BI_FP = 52;\r\n    BigInteger.prototype.FV = Math.pow(2, BI_FP);\r\n    BigInteger.prototype.F1 = BI_FP - dbits;\r\n    BigInteger.prototype.F2 = 2 * dbits - BI_FP;\r\n\r\n// Digit conversions\r\n    var BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n    var BI_RC = new Array();\r\n    var rr, vv;\r\n    rr = \"0\".charCodeAt(0);\r\n    for (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\r\n    rr = \"a\".charCodeAt(0);\r\n    for (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\n    rr = \"A\".charCodeAt(0);\r\n    for (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\n\r\n    function int2char(n) { return BI_RM.charAt(n); }\r\n\r\n    function intAt(s, i) {\r\n        var c = BI_RC[s.charCodeAt(i)];\r\n        return (c == null) ? -1 : c;\r\n    }\r\n\r\n// (protected) copy this to r\r\n    function bnpCopyTo(r) {\r\n        for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\r\n        r.t = this.t;\r\n        r.s = this.s;\r\n    }\r\n\r\n// (protected) set from integer value x, -DV <= x < DV\r\n    function bnpFromInt(x) {\r\n        this.t = 1;\r\n        this.s = (x < 0) ? -1 : 0;\r\n        if (x > 0) this[0] = x;\r\n        else if (x < -1) this[0] = x + DV;\r\n        else this.t = 0;\r\n    }\r\n\r\n// return bigint initialized to value\r\n    function nbv(i) {\r\n        var r = nbi();\r\n        r.fromInt(i);\r\n        return r;\r\n    }\r\n\r\n// (protected) set from string and radix\r\n    function bnpFromString(s, b) {\r\n        var k;\r\n        if (b == 16) k = 4;\r\n        else if (b == 8) k = 3;\r\n        else if (b == 256) k = 8; // byte array\r\n        else if (b == 2) k = 1;\r\n        else if (b == 32) k = 5;\r\n        else if (b == 4) k = 2;\r\n        else {\r\n            this.fromRadix(s, b);\r\n            return;\r\n        }\r\n        this.t = 0;\r\n        this.s = 0;\r\n        var i = s.length, mi = false, sh = 0;\r\n        while (--i >= 0) {\r\n            var x = (k == 8) ? s[i] & 0xff : intAt(s, i);\r\n            if (x < 0) {\r\n                if (s.charAt(i) == \"-\") mi = true;\r\n                continue;\r\n            }\r\n            mi = false;\r\n            if (sh == 0)\r\n                this[this.t++] = x;\r\n            else if (sh + k > this.DB) {\r\n                this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\r\n                this[this.t++] = (x >> (this.DB - sh));\r\n            } else\r\n                this[this.t - 1] |= x << sh;\r\n            sh += k;\r\n            if (sh >= this.DB) sh -= this.DB;\r\n        }\r\n        if (k == 8 && (s[0] & 0x80) != 0) {\r\n            this.s = -1;\r\n            if (sh > 0) this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\r\n        }\r\n        this.clamp();\r\n        if (mi) BigInteger.ZERO.subTo(this, this);\r\n    }\r\n\r\n// (protected) clamp off excess high words\r\n    function bnpClamp() {\r\n        var c = this.s & this.DM;\r\n        while (this.t > 0 && this[this.t - 1] == c)--this.t;\r\n    }\r\n\r\n// (public) return string representation in given radix\r\n    function bnToString(b) {\r\n        if (this.s < 0) return \"-\" + this.negate().toString(b);\r\n        var k;\r\n        if (b == 16) k = 4;\r\n        else if (b == 8) k = 3;\r\n        else if (b == 2) k = 1;\r\n        else if (b == 32) k = 5;\r\n        else if (b == 4) k = 2;\r\n        else return this.toRadix(b);\r\n        var km = (1 << k) - 1, d, m = false, r = \"\", i = this.t;\r\n        var p = this.DB - (i * this.DB) % k;\r\n        if (i-- > 0) {\r\n            if (p < this.DB && (d = this[i] >> p) > 0) {\r\n                m = true;\r\n                r = int2char(d);\r\n            }\r\n            while (i >= 0) {\r\n                if (p < k) {\r\n                    d = (this[i] & ((1 << p) - 1)) << (k - p);\r\n                    d |= this[--i] >> (p += this.DB - k);\r\n                } else {\r\n                    d = (this[i] >> (p -= k)) & km;\r\n                    if (p <= 0) {\r\n                        p += this.DB;\r\n                        --i;\r\n                    }\r\n                }\r\n                if (d > 0) m = true;\r\n                if (m) r += int2char(d);\r\n            }\r\n        }\r\n        return m ? r : \"0\";\r\n    }\r\n\r\n// (public) -this\r\n    function bnNegate() {\r\n        var r = nbi();\r\n        BigInteger.ZERO.subTo(this, r);\r\n        return r;\r\n    }\r\n\r\n// (public) |this|\r\n    function bnAbs() { return (this.s < 0) ? this.negate() : this; }\r\n\r\n// (public) return + if this > a, - if this < a, 0 if equal\r\n    function bnCompareTo(a) {\r\n        var r = this.s - a.s;\r\n        if (r != 0) return r;\r\n        var i = this.t;\r\n        r = i - a.t;\r\n        if (r != 0) return (this.s < 0) ? -r : r;\r\n        while (--i >= 0) if ((r = this[i] - a[i]) != 0) return r;\r\n        return 0;\r\n    }\r\n\r\n// returns bit length of the integer x\r\n    function nbits(x) {\r\n        var r = 1, t;\r\n        if ((t = x >>> 16) != 0) {\r\n            x = t;\r\n            r += 16;\r\n        }\r\n        if ((t = x >> 8) != 0) {\r\n            x = t;\r\n            r += 8;\r\n        }\r\n        if ((t = x >> 4) != 0) {\r\n            x = t;\r\n            r += 4;\r\n        }\r\n        if ((t = x >> 2) != 0) {\r\n            x = t;\r\n            r += 2;\r\n        }\r\n        if ((t = x >> 1) != 0) {\r\n            x = t;\r\n            r += 1;\r\n        }\r\n        return r;\r\n    }\r\n\r\n// (public) return the number of bits in \"this\"\r\n    function bnBitLength() {\r\n        if (this.t <= 0) return 0;\r\n        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\r\n    }\r\n\r\n// (protected) r = this << n*DB\r\n    function bnpDLShiftTo(n, r) {\r\n        var i;\r\n        for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\r\n        for (i = n - 1; i >= 0; --i) r[i] = 0;\r\n        r.t = this.t + n;\r\n        r.s = this.s;\r\n    }\r\n\r\n// (protected) r = this >> n*DB\r\n    function bnpDRShiftTo(n, r) {\r\n        for (var i = n; i < this.t; ++i) r[i - n] = this[i];\r\n        r.t = Math.max(this.t - n, 0);\r\n        r.s = this.s;\r\n    }\r\n\r\n// (protected) r = this << n\r\n    function bnpLShiftTo(n, r) {\r\n        var bs = n % this.DB;\r\n        var cbs = this.DB - bs;\r\n        var bm = (1 << cbs) - 1;\r\n        var ds = Math.floor(n / this.DB), c = (this.s << bs) & this.DM, i;\r\n        for (i = this.t - 1; i >= 0; --i) {\r\n            r[i + ds + 1] = (this[i] >> cbs) | c;\r\n            c = (this[i] & bm) << bs;\r\n        }\r\n        for (i = ds - 1; i >= 0; --i) r[i] = 0;\r\n        r[ds] = c;\r\n        r.t = this.t + ds + 1;\r\n        r.s = this.s;\r\n        r.clamp();\r\n    }\r\n\r\n// (protected) r = this >> n\r\n    function bnpRShiftTo(n, r) {\r\n        r.s = this.s;\r\n        var ds = Math.floor(n / this.DB);\r\n        if (ds >= this.t) {\r\n            r.t = 0;\r\n            return;\r\n        }\r\n        var bs = n % this.DB;\r\n        var cbs = this.DB - bs;\r\n        var bm = (1 << bs) - 1;\r\n        r[0] = this[ds] >> bs;\r\n        for (var i = ds + 1; i < this.t; ++i) {\r\n            r[i - ds - 1] |= (this[i] & bm) << cbs;\r\n            r[i - ds] = this[i] >> bs;\r\n        }\r\n        if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\r\n        r.t = this.t - ds;\r\n        r.clamp();\r\n    }\r\n\r\n// (protected) r = this - a\r\n    function bnpSubTo(a, r) {\r\n        var i = 0, c = 0, m = Math.min(a.t, this.t);\r\n        while (i < m) {\r\n            c += this[i] - a[i];\r\n            r[i++] = c & this.DM;\r\n            c >>= this.DB;\r\n        }\r\n        if (a.t < this.t) {\r\n            c -= a.s;\r\n            while (i < this.t) {\r\n                c += this[i];\r\n                r[i++] = c & this.DM;\r\n                c >>= this.DB;\r\n            }\r\n            c += this.s;\r\n        } else {\r\n            c += this.s;\r\n            while (i < a.t) {\r\n                c -= a[i];\r\n                r[i++] = c & this.DM;\r\n                c >>= this.DB;\r\n            }\r\n            c -= a.s;\r\n        }\r\n        r.s = (c < 0) ? -1 : 0;\r\n        if (c < -1) r[i++] = this.DV + c;\r\n        else if (c > 0) r[i++] = c;\r\n        r.t = i;\r\n        r.clamp();\r\n    }\r\n\r\n// (protected) r = this * a, r != this,a (HAC 14.12)\r\n// \"this\" should be the larger one if appropriate.\r\n    function bnpMultiplyTo(a, r) {\r\n        var x = this.abs(), y = a.abs();\r\n        var i = x.t;\r\n        r.t = i + y.t;\r\n        while (--i >= 0) r[i] = 0;\r\n        for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\r\n        r.s = 0;\r\n        r.clamp();\r\n        if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\r\n    }\r\n\r\n// (protected) r = this^2, r != this (HAC 14.16)\r\n    function bnpSquareTo(r) {\r\n        var x = this.abs();\r\n        var i = r.t = 2 * x.t;\r\n        while (--i >= 0) r[i] = 0;\r\n        for (i = 0; i < x.t - 1; ++i) {\r\n            var c = x.am(i, x[i], r, 2 * i, 0, 1);\r\n            if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\r\n                r[i + x.t] -= x.DV;\r\n                r[i + x.t + 1] = 1;\r\n            }\r\n        }\r\n        if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\r\n        r.s = 0;\r\n        r.clamp();\r\n    }\r\n\r\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\r\n// r != q, this != m.  q or r may be null.\r\n    function bnpDivRemTo(m, q, r) {\r\n        var pm = m.abs();\r\n        if (pm.t <= 0) return;\r\n        var pt = this.abs();\r\n        if (pt.t < pm.t) {\r\n            if (q != null) q.fromInt(0);\r\n            if (r != null) this.copyTo(r);\r\n            return;\r\n        }\r\n        if (r == null) r = nbi();\r\n        var y = nbi(), ts = this.s, ms = m.s;\r\n        var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\r\n        if (nsh > 0) {\r\n            pm.lShiftTo(nsh, y);\r\n            pt.lShiftTo(nsh, r);\r\n        } else {\r\n            pm.copyTo(y);\r\n            pt.copyTo(r);\r\n        }\r\n        var ys = y.t;\r\n        var y0 = y[ys - 1];\r\n        if (y0 == 0) return;\r\n        var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\r\n        var d1 = this.FV / yt, d2 = (1 << this.F1) / yt, e = 1 << this.F2;\r\n        var i = r.t, j = i - ys, t = (q == null) ? nbi() : q;\r\n        y.dlShiftTo(j, t);\r\n        if (r.compareTo(t) >= 0) {\r\n            r[r.t++] = 1;\r\n            r.subTo(t, r);\r\n        }\r\n        BigInteger.ONE.dlShiftTo(ys, t);\r\n        t.subTo(y, y); // \"negative\" y so we can replace sub with am later\r\n        while (y.t < ys) y[y.t++] = 0;\r\n        while (--j >= 0) {\r\n            // Estimate quotient digit\r\n            var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\r\n            if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) { // Try it out\r\n                y.dlShiftTo(j, t);\r\n                r.subTo(t, r);\r\n                while (r[i] < --qd) r.subTo(t, r);\r\n            }\r\n        }\r\n        if (q != null) {\r\n            r.drShiftTo(ys, q);\r\n            if (ts != ms) BigInteger.ZERO.subTo(q, q);\r\n        }\r\n        r.t = ys;\r\n        r.clamp();\r\n        if (nsh > 0) r.rShiftTo(nsh, r); // Denormalize remainder\r\n        if (ts < 0) BigInteger.ZERO.subTo(r, r);\r\n    }\r\n\r\n// (public) this mod a\r\n    function bnMod(a) {\r\n        var r = nbi();\r\n        this.abs().divRemTo(a, null, r);\r\n        if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\r\n        return r;\r\n    }\r\n\r\n// Modular reduction using \"classic\" algorithm\r\n    function Classic(m) { this.m = m; }\r\n\r\n    function cConvert(x) {\r\n        if (x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\r\n        else return x;\r\n    }\r\n\r\n    function cRevert(x) { return x; }\r\n\r\n    function cReduce(x) { x.divRemTo(this.m, null, x); }\r\n\r\n    function cMulTo(x, y, r) {\r\n        x.multiplyTo(y, r);\r\n        this.reduce(r);\r\n    }\r\n\r\n    function cSqrTo(x, r) {\r\n        x.squareTo(r);\r\n        this.reduce(r);\r\n    }\r\n\r\n    Classic.prototype.convert = cConvert;\r\n    Classic.prototype.revert = cRevert;\r\n    Classic.prototype.reduce = cReduce;\r\n    Classic.prototype.mulTo = cMulTo;\r\n    Classic.prototype.sqrTo = cSqrTo;\r\n\r\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\r\n// justification:\r\n//         xy == 1 (mod m)\r\n//         xy =  1+km\r\n//   xy(2-xy) = (1+km)(1-km)\r\n// x[y(2-xy)] = 1-k^2m^2\r\n// x[y(2-xy)] == 1 (mod m^2)\r\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\r\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\r\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\r\n    function bnpInvDigit() {\r\n        if (this.t < 1) return 0;\r\n        var x = this[0];\r\n        if ((x & 1) == 0) return 0;\r\n        var y = x & 3; // y == 1/x mod 2^2\r\n        y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4\r\n        y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8\r\n        y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16\r\n        // last step - calculate inverse mod DV directly;\r\n        // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\r\n        y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits\r\n        // we really want the negative inverse, and -DV < y < DV\r\n        return (y > 0) ? this.DV - y : -y;\r\n    }\r\n\r\n// Montgomery reduction\r\n    function Montgomery(m) {\r\n        this.m = m;\r\n        this.mp = m.invDigit();\r\n        this.mpl = this.mp & 0x7fff;\r\n        this.mph = this.mp >> 15;\r\n        this.um = (1 << (m.DB - 15)) - 1;\r\n        this.mt2 = 2 * m.t;\r\n    }\r\n\r\n// xR mod m\r\n    function montConvert(x) {\r\n        var r = nbi();\r\n        x.abs().dlShiftTo(this.m.t, r);\r\n        r.divRemTo(this.m, null, r);\r\n        if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\r\n        return r;\r\n    }\r\n\r\n// x/R mod m\r\n    function montRevert(x) {\r\n        var r = nbi();\r\n        x.copyTo(r);\r\n        this.reduce(r);\r\n        return r;\r\n    }\r\n\r\n// x = x/R mod m (HAC 14.32)\r\n    function montReduce(x) {\r\n        while (x.t <= this.mt2) // pad x so am has enough room later\r\n            x[x.t++] = 0;\r\n        for (var i = 0; i < this.m.t; ++i) {\r\n            // faster way of calculating u0 = x[i]*mp mod DV\r\n            var j = x[i] & 0x7fff;\r\n            var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\r\n            // use am to combine the multiply-shift-add into one call\r\n            j = i + this.m.t;\r\n            x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\r\n            // propagate carry\r\n            while (x[j] >= x.DV) {\r\n                x[j] -= x.DV;\r\n                x[++j]++;\r\n            }\r\n        }\r\n        x.clamp();\r\n        x.drShiftTo(this.m.t, x);\r\n        if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\r\n    }\r\n\r\n// r = \"x^2/R mod m\"; x != r\r\n    function montSqrTo(x, r) {\r\n        x.squareTo(r);\r\n        this.reduce(r);\r\n    }\r\n\r\n// r = \"xy/R mod m\"; x,y != r\r\n    function montMulTo(x, y, r) {\r\n        x.multiplyTo(y, r);\r\n        this.reduce(r);\r\n    }\r\n\r\n    Montgomery.prototype.convert = montConvert;\r\n    Montgomery.prototype.revert = montRevert;\r\n    Montgomery.prototype.reduce = montReduce;\r\n    Montgomery.prototype.mulTo = montMulTo;\r\n    Montgomery.prototype.sqrTo = montSqrTo;\r\n\r\n// (protected) true iff this is even\r\n    function bnpIsEven() { return ((this.t > 0) ? (this[0] & 1) : this.s) == 0; }\r\n\r\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\r\n    function bnpExp(e, z) {\r\n        if (e > 0xffffffff || e < 1) return BigInteger.ONE;\r\n        var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e) - 1;\r\n        g.copyTo(r);\r\n        while (--i >= 0) {\r\n            z.sqrTo(r, r2);\r\n            if ((e & (1 << i)) > 0) z.mulTo(r2, g, r);\r\n            else {\r\n                var t = r;\r\n                r = r2;\r\n                r2 = t;\r\n            }\r\n        }\r\n        return z.revert(r);\r\n    }\r\n\r\n// (public) this^e % m, 0 <= e < 2^32\r\n    function bnModPowInt(e, m) {\r\n        var z;\r\n        if (e < 256 || m.isEven()) z = new Classic(m);\r\n        else z = new Montgomery(m);\r\n        return this.exp(e, z);\r\n    }\r\n\r\n// protected\r\n    BigInteger.prototype.copyTo = bnpCopyTo;\r\n    BigInteger.prototype.fromInt = bnpFromInt;\r\n    BigInteger.prototype.fromString = bnpFromString;\r\n    BigInteger.prototype.clamp = bnpClamp;\r\n    BigInteger.prototype.dlShiftTo = bnpDLShiftTo;\r\n    BigInteger.prototype.drShiftTo = bnpDRShiftTo;\r\n    BigInteger.prototype.lShiftTo = bnpLShiftTo;\r\n    BigInteger.prototype.rShiftTo = bnpRShiftTo;\r\n    BigInteger.prototype.subTo = bnpSubTo;\r\n    BigInteger.prototype.multiplyTo = bnpMultiplyTo;\r\n    BigInteger.prototype.squareTo = bnpSquareTo;\r\n    BigInteger.prototype.divRemTo = bnpDivRemTo;\r\n    BigInteger.prototype.invDigit = bnpInvDigit;\r\n    BigInteger.prototype.isEven = bnpIsEven;\r\n    BigInteger.prototype.exp = bnpExp;\r\n\r\n// public\r\n    BigInteger.prototype.toString = bnToString;\r\n    BigInteger.prototype.negate = bnNegate;\r\n    BigInteger.prototype.abs = bnAbs;\r\n    BigInteger.prototype.compareTo = bnCompareTo;\r\n    BigInteger.prototype.bitLength = bnBitLength;\r\n    BigInteger.prototype.mod = bnMod;\r\n    BigInteger.prototype.modPowInt = bnModPowInt;\r\n\r\n// \"constants\"\r\n    BigInteger.ZERO = nbv(0);\r\n    BigInteger.ONE = nbv(1);\r\n\r\n// Copyright (c) 2005-2009  Tom Wu\r\n// All Rights Reserved.\r\n// See \"LICENSE\" for details.\r\n\r\n// Extended JavaScript BN functions, required for RSA private ops.\r\n\r\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\r\n// Version 1.2: square() API, isProbablePrime fix\r\n\r\n// (public)\r\n    function bnClone() {\r\n        var r = nbi();\r\n        this.copyTo(r);\r\n        return r;\r\n    }\r\n\r\n// (public) return value as integer\r\n    function bnIntValue() {\r\n        if (this.s < 0) {\r\n            if (this.t == 1) return this[0] - this.DV;\r\n            else if (this.t == 0) return -1;\r\n        } else if (this.t == 1) return this[0];\r\n        else if (this.t == 0) return 0;\r\n        // assumes 16 < DB < 32\r\n        return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\r\n    }\r\n\r\n// (public) return value as byte\r\n    function bnByteValue() { return (this.t == 0) ? this.s : (this[0] << 24) >> 24; }\r\n\r\n// (public) return value as short (assumes DB>=16)\r\n    function bnShortValue() { return (this.t == 0) ? this.s : (this[0] << 16) >> 16; }\r\n\r\n// (protected) return x s.t. r^x < DV\r\n    function bnpChunkSize(r) { return Math.floor(Math.LN2 * this.DB / Math.log(r)); }\r\n\r\n// (public) 0 if this == 0, 1 if this > 0\r\n    function bnSigNum() {\r\n        if (this.s < 0) return -1;\r\n        else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\r\n        else return 1;\r\n    }\r\n\r\n// (protected) convert to radix string\r\n    function bnpToRadix(b) {\r\n        if (b == null) b = 10;\r\n        if (this.signum() == 0 || b < 2 || b > 36) return \"0\";\r\n        var cs = this.chunkSize(b);\r\n        var a = Math.pow(b, cs);\r\n        var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\r\n        this.divRemTo(d, y, z);\r\n        while (y.signum() > 0) {\r\n            r = (a + z.intValue()).toString(b).substr(1) + r;\r\n            y.divRemTo(d, y, z);\r\n        }\r\n        return z.intValue().toString(b) + r;\r\n    }\r\n\r\n// (protected) convert from radix string\r\n    function bnpFromRadix(s, b) {\r\n        this.fromInt(0);\r\n        if (b == null) b = 10;\r\n        var cs = this.chunkSize(b);\r\n        var d = Math.pow(b, cs), mi = false, j = 0, w = 0;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            var x = intAt(s, i);\r\n            if (x < 0) {\r\n                if (s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\r\n                continue;\r\n            }\r\n            w = b * w + x;\r\n            if (++j >= cs) {\r\n                this.dMultiply(d);\r\n                this.dAddOffset(w, 0);\r\n                j = 0;\r\n                w = 0;\r\n            }\r\n        }\r\n        if (j > 0) {\r\n            this.dMultiply(Math.pow(b, j));\r\n            this.dAddOffset(w, 0);\r\n        }\r\n        if (mi) BigInteger.ZERO.subTo(this, this);\r\n    }\r\n\r\n// (protected) alternate constructor\r\n    function bnpFromNumber(a, b, c) {\r\n        if (\"number\" == typeof b) {\r\n            // new BigInteger(int,int,RNG)\r\n            if (a < 2) this.fromInt(1);\r\n            else {\r\n                this.fromNumber(a, c);\r\n                if (!this.testBit(a - 1)) // force MSB set\r\n                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\r\n                if (this.isEven()) this.dAddOffset(1, 0); // force odd\r\n                while (!this.isProbablePrime(b)) {\r\n                    this.dAddOffset(2, 0);\r\n                    if (this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\r\n                }\r\n            }\r\n        } else {\r\n            // new BigInteger(int,RNG)\r\n            var x = new Array(), t = a & 7;\r\n            x.length = (a >> 3) + 1;\r\n            b.nextBytes(x);\r\n            if (t > 0) x[0] &= ((1 << t) - 1);\r\n            else x[0] = 0;\r\n            this.fromString(x, 256);\r\n        }\r\n    }\r\n\r\n// (public) convert to bigendian byte array\r\n    function bnToByteArray() {\r\n        var i = this.t, r = new Array();\r\n        r[0] = this.s;\r\n        var p = this.DB - (i * this.DB) % 8, d, k = 0;\r\n        if (i-- > 0) {\r\n            if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p)\r\n                r[k++] = d | (this.s << (this.DB - p));\r\n            while (i >= 0) {\r\n                if (p < 8) {\r\n                    d = (this[i] & ((1 << p) - 1)) << (8 - p);\r\n                    d |= this[--i] >> (p += this.DB - 8);\r\n                } else {\r\n                    d = (this[i] >> (p -= 8)) & 0xff;\r\n                    if (p <= 0) {\r\n                        p += this.DB;\r\n                        --i;\r\n                    }\r\n                }\r\n                if ((d & 0x80) != 0) d |= -256;\r\n                if (k == 0 && (this.s & 0x80) != (d & 0x80))++k;\r\n                if (k > 0 || d != this.s) r[k++] = d;\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function bnEquals(a) { return (this.compareTo(a) == 0); }\r\n\r\n    function bnMin(a) { return (this.compareTo(a) < 0) ? this : a; }\r\n\r\n    function bnMax(a) { return (this.compareTo(a) > 0) ? this : a; }\r\n\r\n// (protected) r = this op a (bitwise)\r\n    function bnpBitwiseTo(a, op, r) {\r\n        var i, f, m = Math.min(a.t, this.t);\r\n        for (i = 0; i < m; ++i) r[i] = op(this[i], a[i]);\r\n        if (a.t < this.t) {\r\n            f = a.s & this.DM;\r\n            for (i = m; i < this.t; ++i) r[i] = op(this[i], f);\r\n            r.t = this.t;\r\n        } else {\r\n            f = this.s & this.DM;\r\n            for (i = m; i < a.t; ++i) r[i] = op(f, a[i]);\r\n            r.t = a.t;\r\n        }\r\n        r.s = op(this.s, a.s);\r\n        r.clamp();\r\n    }\r\n\r\n// (public) this & a\r\n    function op_and(x, y) { return x & y; }\r\n\r\n    function bnAnd(a) {\r\n        var r = nbi();\r\n        this.bitwiseTo(a, op_and, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this | a\r\n    function op_or(x, y) { return x | y; }\r\n\r\n    function bnOr(a) {\r\n        var r = nbi();\r\n        this.bitwiseTo(a, op_or, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this ^ a\r\n    function op_xor(x, y) { return x ^ y; }\r\n\r\n    function bnXor(a) {\r\n        var r = nbi();\r\n        this.bitwiseTo(a, op_xor, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this & ~a\r\n    function op_andnot(x, y) { return x & ~y; }\r\n\r\n    function bnAndNot(a) {\r\n        var r = nbi();\r\n        this.bitwiseTo(a, op_andnot, r);\r\n        return r;\r\n    }\r\n\r\n// (public) ~this\r\n    function bnNot() {\r\n        var r = nbi();\r\n        for (var i = 0; i < this.t; ++i) r[i] = this.DM & ~this[i];\r\n        r.t = this.t;\r\n        r.s = ~this.s;\r\n        return r;\r\n    }\r\n\r\n// (public) this << n\r\n    function bnShiftLeft(n) {\r\n        var r = nbi();\r\n        if (n < 0) this.rShiftTo(-n, r);\r\n        else this.lShiftTo(n, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this >> n\r\n    function bnShiftRight(n) {\r\n        var r = nbi();\r\n        if (n < 0) this.lShiftTo(-n, r);\r\n        else this.rShiftTo(n, r);\r\n        return r;\r\n    }\r\n\r\n// return index of lowest 1-bit in x, x < 2^31\r\n    function lbit(x) {\r\n        if (x == 0) return -1;\r\n        var r = 0;\r\n        if ((x & 0xffff) == 0) {\r\n            x >>= 16;\r\n            r += 16;\r\n        }\r\n        if ((x & 0xff) == 0) {\r\n            x >>= 8;\r\n            r += 8;\r\n        }\r\n        if ((x & 0xf) == 0) {\r\n            x >>= 4;\r\n            r += 4;\r\n        }\r\n        if ((x & 3) == 0) {\r\n            x >>= 2;\r\n            r += 2;\r\n        }\r\n        if ((x & 1) == 0)++r;\r\n        return r;\r\n    }\r\n\r\n// (public) returns index of lowest 1-bit (or -1 if none)\r\n    function bnGetLowestSetBit() {\r\n        for (var i = 0; i < this.t; ++i)\r\n            if (this[i] != 0) return i * this.DB + lbit(this[i]);\r\n        if (this.s < 0) return this.t * this.DB;\r\n        return -1;\r\n    }\r\n\r\n// return number of 1 bits in x\r\n    function cbit(x) {\r\n        var r = 0;\r\n        while (x != 0) {\r\n            x &= x - 1;\r\n            ++r;\r\n        }\r\n        return r;\r\n    }\r\n\r\n// (public) return number of set bits\r\n    function bnBitCount() {\r\n        var r = 0, x = this.s & this.DM;\r\n        for (var i = 0; i < this.t; ++i) r += cbit(this[i] ^ x);\r\n        return r;\r\n    }\r\n\r\n// (public) true iff nth bit is set\r\n    function bnTestBit(n) {\r\n        var j = Math.floor(n / this.DB);\r\n        if (j >= this.t) return (this.s != 0);\r\n        return ((this[j] & (1 << (n % this.DB))) != 0);\r\n    }\r\n\r\n// (protected) this op (1<<n)\r\n    function bnpChangeBit(n, op) {\r\n        var r = BigInteger.ONE.shiftLeft(n);\r\n        this.bitwiseTo(r, op, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this | (1<<n)\r\n    function bnSetBit(n) { return this.changeBit(n, op_or); }\r\n\r\n// (public) this & ~(1<<n)\r\n    function bnClearBit(n) { return this.changeBit(n, op_andnot); }\r\n\r\n// (public) this ^ (1<<n)\r\n    function bnFlipBit(n) { return this.changeBit(n, op_xor); }\r\n\r\n// (protected) r = this + a\r\n    function bnpAddTo(a, r) {\r\n        var i = 0, c = 0, m = Math.min(a.t, this.t);\r\n        while (i < m) {\r\n            c += this[i] + a[i];\r\n            r[i++] = c & this.DM;\r\n            c >>= this.DB;\r\n        }\r\n        if (a.t < this.t) {\r\n            c += a.s;\r\n            while (i < this.t) {\r\n                c += this[i];\r\n                r[i++] = c & this.DM;\r\n                c >>= this.DB;\r\n            }\r\n            c += this.s;\r\n        } else {\r\n            c += this.s;\r\n            while (i < a.t) {\r\n                c += a[i];\r\n                r[i++] = c & this.DM;\r\n                c >>= this.DB;\r\n            }\r\n            c += a.s;\r\n        }\r\n        r.s = (c < 0) ? -1 : 0;\r\n        if (c > 0) r[i++] = c;\r\n        else if (c < -1) r[i++] = this.DV + c;\r\n        r.t = i;\r\n        r.clamp();\r\n    }\r\n\r\n// (public) this + a\r\n    function bnAdd(a) {\r\n        var r = nbi();\r\n        this.addTo(a, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this - a\r\n    function bnSubtract(a) {\r\n        var r = nbi();\r\n        this.subTo(a, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this * a\r\n    function bnMultiply(a) {\r\n        var r = nbi();\r\n        this.multiplyTo(a, r);\r\n        return r;\r\n    }\r\n\r\n// (public) this^2\r\n    function bnSquare() {\r\n        var r = nbi();\r\n        this.squareTo(r);\r\n        return r;\r\n    }\r\n\r\n// (public) this / a\r\n    function bnDivide(a) {\r\n        var r = nbi();\r\n        this.divRemTo(a, r, null);\r\n        return r;\r\n    }\r\n\r\n// (public) this % a\r\n    function bnRemainder(a) {\r\n        var r = nbi();\r\n        this.divRemTo(a, null, r);\r\n        return r;\r\n    }\r\n\r\n// (public) [this/a,this%a]\r\n    function bnDivideAndRemainder(a) {\r\n        var q = nbi(), r = nbi();\r\n        this.divRemTo(a, q, r);\r\n        return new Array(q, r);\r\n    }\r\n\r\n// (protected) this *= n, this >= 0, 1 < n < DV\r\n    function bnpDMultiply(n) {\r\n        this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\r\n        ++this.t;\r\n        this.clamp();\r\n    }\r\n\r\n// (protected) this += n << w words, this >= 0\r\n    function bnpDAddOffset(n, w) {\r\n        if (n == 0) return;\r\n        while (this.t <= w) this[this.t++] = 0;\r\n        this[w] += n;\r\n        while (this[w] >= this.DV) {\r\n            this[w] -= this.DV;\r\n            if (++w >= this.t) this[this.t++] = 0;\r\n            ++this[w];\r\n        }\r\n    }\r\n\r\n// A \"null\" reducer\r\n    function NullExp() {}\r\n\r\n    function nNop(x) { return x; }\r\n\r\n    function nMulTo(x, y, r) { x.multiplyTo(y, r); }\r\n\r\n    function nSqrTo(x, r) { x.squareTo(r); }\r\n\r\n    NullExp.prototype.convert = nNop;\r\n    NullExp.prototype.revert = nNop;\r\n    NullExp.prototype.mulTo = nMulTo;\r\n    NullExp.prototype.sqrTo = nSqrTo;\r\n\r\n// (public) this^e\r\n    function bnPow(e) { return this.exp(e, new NullExp()); }\r\n\r\n// (protected) r = lower n words of \"this * a\", a.t <= n\r\n// \"this\" should be the larger one if appropriate.\r\n    function bnpMultiplyLowerTo(a, n, r) {\r\n        var i = Math.min(this.t + a.t, n);\r\n        r.s = 0; // assumes a,this >= 0\r\n        r.t = i;\r\n        while (i > 0) r[--i] = 0;\r\n        var j;\r\n        for (j = r.t - this.t; i < j; ++i) r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\r\n        for (j = Math.min(a.t, n); i < j; ++i) this.am(0, a[i], r, i, 0, n - i);\r\n        r.clamp();\r\n    }\r\n\r\n// (protected) r = \"this * a\" without lower n words, n > 0\r\n// \"this\" should be the larger one if appropriate.\r\n    function bnpMultiplyUpperTo(a, n, r) {\r\n        --n;\r\n        var i = r.t = this.t + a.t - n;\r\n        r.s = 0; // assumes a,this >= 0\r\n        while (--i >= 0) r[i] = 0;\r\n        for (i = Math.max(n - this.t, 0); i < a.t; ++i)\r\n            r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\r\n        r.clamp();\r\n        r.drShiftTo(1, r);\r\n    }\r\n\r\n// Barrett modular reduction\r\n    function Barrett(m) {\r\n        // setup Barrett\r\n        this.r2 = nbi();\r\n        this.q3 = nbi();\r\n        BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\r\n        this.mu = this.r2.divide(m);\r\n        this.m = m;\r\n    }\r\n\r\n    function barrettConvert(x) {\r\n        if (x.s < 0 || x.t > 2 * this.m.t) return x.mod(this.m);\r\n        else if (x.compareTo(this.m) < 0) return x;\r\n        else {\r\n            var r = nbi();\r\n            x.copyTo(r);\r\n            this.reduce(r);\r\n            return r;\r\n        }\r\n    }\r\n\r\n    function barrettRevert(x) { return x; }\r\n\r\n// x = x mod m (HAC 14.42)\r\n    function barrettReduce(x) {\r\n        x.drShiftTo(this.m.t - 1, this.r2);\r\n        if (x.t > this.m.t + 1) {\r\n            x.t = this.m.t + 1;\r\n            x.clamp();\r\n        }\r\n        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\r\n        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\r\n        while (x.compareTo(this.r2) < 0) x.dAddOffset(1, this.m.t + 1);\r\n        x.subTo(this.r2, x);\r\n        while (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\r\n    }\r\n\r\n// r = x^2 mod m; x != r\r\n    function barrettSqrTo(x, r) {\r\n        x.squareTo(r);\r\n        this.reduce(r);\r\n    }\r\n\r\n// r = x*y mod m; x,y != r\r\n    function barrettMulTo(x, y, r) {\r\n        x.multiplyTo(y, r);\r\n        this.reduce(r);\r\n    }\r\n\r\n    Barrett.prototype.convert = barrettConvert;\r\n    Barrett.prototype.revert = barrettRevert;\r\n    Barrett.prototype.reduce = barrettReduce;\r\n    Barrett.prototype.mulTo = barrettMulTo;\r\n    Barrett.prototype.sqrTo = barrettSqrTo;\r\n\r\n// (public) this^e % m (HAC 14.85)\r\n    function bnModPow(e, m) {\r\n        var i = e.bitLength(), k, r = nbv(1), z;\r\n        if (i <= 0) return r;\r\n        else if (i < 18) k = 1;\r\n        else if (i < 48) k = 3;\r\n        else if (i < 144) k = 4;\r\n        else if (i < 768) k = 5;\r\n        else k = 6;\r\n        if (i < 8)\r\n            z = new Classic(m);\r\n        else if (m.isEven())\r\n            z = new Barrett(m);\r\n        else\r\n            z = new Montgomery(m);\r\n\r\n        // precomputation\r\n        var g = new Array(), n = 3, k1 = k - 1, km = (1 << k) - 1;\r\n        g[1] = z.convert(this);\r\n        if (k > 1) {\r\n            var g2 = nbi();\r\n            z.sqrTo(g[1], g2);\r\n            while (n <= km) {\r\n                g[n] = nbi();\r\n                z.mulTo(g2, g[n - 2], g[n]);\r\n                n += 2;\r\n            }\r\n        }\r\n\r\n        var j = e.t - 1, w, is1 = true, r2 = nbi(), t;\r\n        i = nbits(e[j]) - 1;\r\n        while (j >= 0) {\r\n            if (i >= k1) w = (e[j] >> (i - k1)) & km;\r\n            else {\r\n                w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\r\n                if (j > 0) w |= e[j - 1] >> (this.DB + i - k1);\r\n            }\r\n\r\n            n = k;\r\n            while ((w & 1) == 0) {\r\n                w >>= 1;\r\n                --n;\r\n            }\r\n            if ((i -= n) < 0) {\r\n                i += this.DB;\r\n                --j;\r\n            }\r\n            if (is1) { // ret == 1, don't bother squaring or multiplying it\r\n                g[w].copyTo(r);\r\n                is1 = false;\r\n            } else {\r\n                while (n > 1) {\r\n                    z.sqrTo(r, r2);\r\n                    z.sqrTo(r2, r);\r\n                    n -= 2;\r\n                }\r\n                if (n > 0) z.sqrTo(r, r2);\r\n                else {\r\n                    t = r;\r\n                    r = r2;\r\n                    r2 = t;\r\n                }\r\n                z.mulTo(r2, g[w], r);\r\n            }\r\n\r\n            while (j >= 0 && (e[j] & (1 << i)) == 0) {\r\n                z.sqrTo(r, r2);\r\n                t = r;\r\n                r = r2;\r\n                r2 = t;\r\n                if (--i < 0) {\r\n                    i = this.DB - 1;\r\n                    --j;\r\n                }\r\n            }\r\n        }\r\n        return z.revert(r);\r\n    }\r\n\r\n// (public) gcd(this,a) (HAC 14.54)\r\n    function bnGCD(a) {\r\n        var x = (this.s < 0) ? this.negate() : this.clone();\r\n        var y = (a.s < 0) ? a.negate() : a.clone();\r\n        if (x.compareTo(y) < 0) {\r\n            var t = x;\r\n            x = y;\r\n            y = t;\r\n        }\r\n        var i = x.getLowestSetBit(), g = y.getLowestSetBit();\r\n        if (g < 0) return x;\r\n        if (i < g) g = i;\r\n        if (g > 0) {\r\n            x.rShiftTo(g, x);\r\n            y.rShiftTo(g, y);\r\n        }\r\n        while (x.signum() > 0) {\r\n            if ((i = x.getLowestSetBit()) > 0) x.rShiftTo(i, x);\r\n            if ((i = y.getLowestSetBit()) > 0) y.rShiftTo(i, y);\r\n            if (x.compareTo(y) >= 0) {\r\n                x.subTo(y, x);\r\n                x.rShiftTo(1, x);\r\n            } else {\r\n                y.subTo(x, y);\r\n                y.rShiftTo(1, y);\r\n            }\r\n        }\r\n        if (g > 0) y.lShiftTo(g, y);\r\n        return y;\r\n    }\r\n\r\n// (protected) this % n, n < 2^26\r\n    function bnpModInt(n) {\r\n        if (n <= 0) return 0;\r\n        var d = this.DV % n, r = (this.s < 0) ? n - 1 : 0;\r\n        if (this.t > 0)\r\n            if (d == 0) r = this[0] % n;\r\n            else for (var i = this.t - 1; i >= 0; --i) r = (d * r + this[i]) % n;\r\n        return r;\r\n    }\r\n\r\n// (public) 1/this % m (HAC 14.61)\r\n    function bnModInverse(m) {\r\n        var ac = m.isEven();\r\n        if ((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\r\n        var u = m.clone(), v = this.clone();\r\n        var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\r\n        while (u.signum() != 0) {\r\n            while (u.isEven()) {\r\n                u.rShiftTo(1, u);\r\n                if (ac) {\r\n                    if (!a.isEven() || !b.isEven()) {\r\n                        a.addTo(this, a);\r\n                        b.subTo(m, b);\r\n                    }\r\n                    a.rShiftTo(1, a);\r\n                } else if (!b.isEven()) b.subTo(m, b);\r\n                b.rShiftTo(1, b);\r\n            }\r\n            while (v.isEven()) {\r\n                v.rShiftTo(1, v);\r\n                if (ac) {\r\n                    if (!c.isEven() || !d.isEven()) {\r\n                        c.addTo(this, c);\r\n                        d.subTo(m, d);\r\n                    }\r\n                    c.rShiftTo(1, c);\r\n                } else if (!d.isEven()) d.subTo(m, d);\r\n                d.rShiftTo(1, d);\r\n            }\r\n            if (u.compareTo(v) >= 0) {\r\n                u.subTo(v, u);\r\n                if (ac) a.subTo(c, a);\r\n                b.subTo(d, b);\r\n            } else {\r\n                v.subTo(u, v);\r\n                if (ac) c.subTo(a, c);\r\n                d.subTo(b, d);\r\n            }\r\n        }\r\n        if (v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\r\n        if (d.compareTo(m) >= 0) return d.subtract(m);\r\n        if (d.signum() < 0) d.addTo(m, d);\r\n        else return d;\r\n        if (d.signum() < 0) return d.add(m);\r\n        else return d;\r\n    }\r\n\r\n    var lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\r\n    var lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\r\n\r\n// (public) test primality with certainty >= 1-.5^t\r\n    function bnIsProbablePrime(t) {\r\n        var i, x = this.abs();\r\n        if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\r\n            for (i = 0; i < lowprimes.length; ++i)\r\n                if (x[0] == lowprimes[i]) return true;\r\n            return false;\r\n        }\r\n        if (x.isEven()) return false;\r\n        i = 1;\r\n        while (i < lowprimes.length) {\r\n            var m = lowprimes[i], j = i + 1;\r\n            while (j < lowprimes.length && m < lplim) m *= lowprimes[j++];\r\n            m = x.modInt(m);\r\n            while (i < j) if (m % lowprimes[i++] == 0) return false;\r\n        }\r\n        return x.millerRabin(t);\r\n    }\r\n\r\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\r\n    function bnpMillerRabin(t) {\r\n        var n1 = this.subtract(BigInteger.ONE);\r\n        var k = n1.getLowestSetBit();\r\n        if (k <= 0) return false;\r\n        var r = n1.shiftRight(k);\r\n        t = (t + 1) >> 1;\r\n        if (t > lowprimes.length) t = lowprimes.length;\r\n        var a = nbi();\r\n        for (var i = 0; i < t; ++i) {\r\n            //Pick bases at random, instead of starting at 2\r\n            a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\r\n            var y = a.modPow(r, this);\r\n            if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\r\n                var j = 1;\r\n                while (j++ < k && y.compareTo(n1) != 0) {\r\n                    y = y.modPowInt(2, this);\r\n                    if (y.compareTo(BigInteger.ONE) == 0) return false;\r\n                }\r\n                if (y.compareTo(n1) != 0) return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n// protected\r\n    BigInteger.prototype.chunkSize = bnpChunkSize;\r\n    BigInteger.prototype.toRadix = bnpToRadix;\r\n    BigInteger.prototype.fromRadix = bnpFromRadix;\r\n    BigInteger.prototype.fromNumber = bnpFromNumber;\r\n    BigInteger.prototype.bitwiseTo = bnpBitwiseTo;\r\n    BigInteger.prototype.changeBit = bnpChangeBit;\r\n    BigInteger.prototype.addTo = bnpAddTo;\r\n    BigInteger.prototype.dMultiply = bnpDMultiply;\r\n    BigInteger.prototype.dAddOffset = bnpDAddOffset;\r\n    BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\r\n    BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\r\n    BigInteger.prototype.modInt = bnpModInt;\r\n    BigInteger.prototype.millerRabin = bnpMillerRabin;\r\n\r\n// public\r\n    BigInteger.prototype.clone = bnClone;\r\n    BigInteger.prototype.intValue = bnIntValue;\r\n    BigInteger.prototype.byteValue = bnByteValue;\r\n    BigInteger.prototype.shortValue = bnShortValue;\r\n    BigInteger.prototype.signum = bnSigNum;\r\n    BigInteger.prototype.toByteArray = bnToByteArray;\r\n    BigInteger.prototype.equals = bnEquals;\r\n    BigInteger.prototype.min = bnMin;\r\n    BigInteger.prototype.max = bnMax;\r\n    BigInteger.prototype.and = bnAnd;\r\n    BigInteger.prototype.or = bnOr;\r\n    BigInteger.prototype.xor = bnXor;\r\n    BigInteger.prototype.andNot = bnAndNot;\r\n    BigInteger.prototype.not = bnNot;\r\n    BigInteger.prototype.shiftLeft = bnShiftLeft;\r\n    BigInteger.prototype.shiftRight = bnShiftRight;\r\n    BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\r\n    BigInteger.prototype.bitCount = bnBitCount;\r\n    BigInteger.prototype.testBit = bnTestBit;\r\n    BigInteger.prototype.setBit = bnSetBit;\r\n    BigInteger.prototype.clearBit = bnClearBit;\r\n    BigInteger.prototype.flipBit = bnFlipBit;\r\n    BigInteger.prototype.add = bnAdd;\r\n    BigInteger.prototype.subtract = bnSubtract;\r\n    BigInteger.prototype.multiply = bnMultiply;\r\n    BigInteger.prototype.divide = bnDivide;\r\n    BigInteger.prototype.remainder = bnRemainder;\r\n    BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\r\n    BigInteger.prototype.modPow = bnModPow;\r\n    BigInteger.prototype.modInverse = bnModInverse;\r\n    BigInteger.prototype.pow = bnPow;\r\n    BigInteger.prototype.gcd = bnGCD;\r\n    BigInteger.prototype.isProbablePrime = bnIsProbablePrime;\r\n\r\n    // JSBN-specific extension\r\n    BigInteger.prototype.square = bnSquare;\r\n\r\n    return BigInteger;\r\n});\r\n;(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('SRPClient', [\r\n            'sha1',\r\n            'sjcl',\r\n            'BigInteger'\r\n        ], factory);\r\n    } else {\r\n        window.SRPClient = factory(sha1, sjcl, BigInteger);\r\n    }\r\n})(function (sha1, sjcl, BigInteger) {\r\n\r\n    /*\r\n     * Construct an SRP object with a username,\r\n     * password, and the bits identifying the\r\n     * group (1024 [default], 1536 or 2048 bits).\r\n     */\r\n    var SRPClient = function (username, password, group, hashFn) {\r\n\r\n        // Verify presence of username.\r\n        if (!username)\r\n            throw 'Username cannot be empty.';\r\n\r\n        // Store username/password.\r\n        this.username = username;\r\n        this.password = password;\r\n\r\n        // Initialize hash function\r\n        this.hashFn = hashFn || 'sha-1';\r\n\r\n        // Retrieve initialization values.\r\n        var group = group || 1024;\r\n        var initVal = this.initVals[group];\r\n\r\n        // Set N and g from initialization values.\r\n        this.N = new BigInteger(initVal.N, 16);\r\n        this.g = new BigInteger(initVal.g, 16);\r\n        this.gBn = new BigInteger(initVal.g, 16);\r\n\r\n        // Pre-compute k from N and g.\r\n        this.k = this.k();\r\n\r\n        // Convenience big integer objects for 1 and 2.\r\n        this.one = new BigInteger(\"1\", 16);\r\n        this.two = new BigInteger(\"2\", 16);\r\n\r\n    };\r\n\r\n    /*\r\n     * Implementation of an SRP client conforming\r\n     * to the SRP protocol 6A (see RFC5054).\r\n    */\r\n    SRPClient.prototype = {\r\n        toHexString: function(bi) {\r\n            var hex = bi.toString(16);\r\n            if (hex.length % 2 === 1) {\r\n                hex = \"0\" + hex;\r\n            }\r\n            return hex;\r\n        },\r\n        padLeft: function(orig, len) {\r\n            if (orig.length > len) return orig;\r\n\r\n            var arr = Array(len - orig.length + 1);\r\n            return arr.join(\"0\") + orig;\r\n        },\r\n        bytesToHex: function(bytes) {\r\n            var self = this;\r\n            var b = bytes.map(function(x) { return self.padLeft(self.toHexString(x), 2); });\r\n            return b.join(\"\");\r\n        },\r\n        hexToBytes: function(hex) {\r\n            if (hex.length % 2 === 1) throw new Error(\"hexToBytes can't have a string with an odd number of characters.\");\r\n            if (hex.indexOf(\"0x\") === 0) hex = hex.slice(2);\r\n            return hex.match(/../g).map(function(x) { return parseInt(x, 16) });\r\n        },\r\n        stringToBytes: function(str) {\r\n            var bytes = [];\r\n            for (var i = 0; i < str.length; ++i) {\r\n                bytes.push(str.charCodeAt(i));\r\n            }\r\n            return bytes;\r\n        },\r\n        bytesToString: function (byteArr) {\r\n            var str = '';\r\n            for (var i = 0; i < byteArr.length; i++)\r\n                str += String.fromCharCode(byteArr[i]);\r\n\r\n            return str;\r\n        },\r\n\r\n        /*\r\n     * Calculate k = H(N || g), which is used\r\n     * throughout various SRP calculations.\r\n     */\r\n        k: function() {\r\n\r\n            // Convert to hex values.\r\n            var toHash = [\r\n                this.toHexString(this.N),\r\n                this.toHexString(this.g)\r\n            ];\r\n\r\n            // Return hash as a BigInteger.\r\n            return this.paddedHash(toHash);\r\n\r\n        },\r\n\r\n        /*\r\n     * Calculate x = SHA1(s | SHA1(I | \":\" | P))\r\n     */\r\n        calculateX: function(saltHex) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!saltHex) throw 'Missing parameter.'\r\n\r\n            if (!this.username || !this.password)\r\n                throw 'Username and password cannot be empty.';\r\n\r\n            var usernameBytes = this.stringToBytes(this.username);\r\n            var passwordBytes = this.hexToBytes(this.password);\r\n\r\n            var upBytes = usernameBytes.concat([58]).concat(passwordBytes);\r\n            var upHash = this.hash(this.bytesToString(upBytes));\r\n            var upHashBytes = this.hexToBytes(upHash);\r\n\r\n            var saltBytes = this.hexToBytes(saltHex);\r\n            var saltUpBytes = saltBytes.concat(upHashBytes);\r\n            var saltUpHash = this.hash(this.bytesToString(saltUpBytes));\r\n\r\n            var xtmp = new BigInteger(saltUpHash, 16);\r\n            if (xtmp.compareTo(this.N) < 0) {\r\n                return xtmp;\r\n            }\r\n            else {\r\n                var one = new BigInteger(1,16);\r\n                return xtmp.mod(this.N.subtract(one));\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n     * Calculate v = g^x % N\r\n     */\r\n        calculateV: function(salt) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!salt) throw 'Missing parameter.';\r\n\r\n            // Get X from the salt value.\r\n            var x = this.calculateX(salt);\r\n\r\n            // Calculate and return the verifier.\r\n            return this.g.modPow(x, this.N);\r\n\r\n        },\r\n\r\n        /*\r\n     * Calculate u = SHA1(PAD(A) | PAD(B)), which serves\r\n     * to prevent an attacker who learns a user's verifier\r\n     * from being able to authenticate as that user.\r\n     */\r\n        calculateU: function(A, B) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!A || !B) throw 'Missing parameter(s).';\r\n\r\n            // Verify value of A and B.\r\n            if (A.mod(this.N).toString() == '0' ||\r\n                B.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            // Convert A and B to hexadecimal.\r\n            var toHash = [this.toHexString(A), this.toHexString(B)];\r\n\r\n            // Return hash as a BigInteger.\r\n            return this.paddedHash(toHash);\r\n\r\n        },\r\n\r\n        canCalculateA: function(a) {\r\n            if (!a) throw 'Missing parameter.';\r\n\r\n            return Math.ceil(a.bitLength() / 8) >= 256 / 8;\r\n\r\n        },\r\n\r\n        /*\r\n     * 2.5.4 Calculate the client's public value A = g^a % N,\r\n     * where a is a random number at least 256 bits in length.\r\n     */\r\n        calculateA: function(a) {\r\n\r\n            // Verify presence of parameter.\r\n            if (!a) throw 'Missing parameter.';\r\n\r\n            if (!this.canCalculateA(a))\r\n                throw 'Client key length is less than 256 bits.'\r\n\r\n            // Return A as a BigInteger.\r\n            var A = this.g.modPow(a, this.N);\r\n\r\n            if (A.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            return A;\r\n\r\n        },\r\n\r\n        /*\r\n    * Calculate match M = H(H(N) XOR H(g) | H(username) | s | A | B | K)\r\n    */\r\n        calculateM1: function(A, B, K, salt) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!A || !B || !K || !salt)\r\n                throw 'Missing parameter(s).';\r\n\r\n            // Verify value of A and B.\r\n            if (A.mod(this.N).toString() == '0' ||\r\n                B.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            var hashN = this.hexHash(this.toHexString(this.N));\r\n            var hashg = this.hexHash(this.toHexString(this.g));\r\n\r\n            var hashUsername = this.hash(this.username);\r\n\r\n            var xorNg_bytes = [],\r\n                hashN_bytes = this.hexToBytes(hashN),\r\n                hashg_bytes = this.hexToBytes(hashg);\r\n\r\n            for (var i = 0; i < hashN_bytes.length; i++)\r\n                xorNg_bytes[i] = hashN_bytes[i] ^ hashg_bytes[i];\r\n\r\n            var xorNg = this.bytesToHex(xorNg_bytes);\r\n\r\n            var aHex = this.toHexString(A);\r\n            var bHex = this.toHexString(B);\r\n\r\n            var toHash = [xorNg, hashUsername, salt, aHex, bHex, K];\r\n            var toHash_str = '';\r\n\r\n            for (var j = 0; j < toHash.length; j++) {\r\n                toHash_str += toHash[j];\r\n            }\r\n\r\n            return new BigInteger(this.hexHash(toHash_str), 16);\r\n        },\r\n\r\n        /*\r\n     * Calculate match M = H(H(N) XOR H(g) | H(username) | s | A | B | K) and return as hex string\r\n     */\r\n        calculateM: function (A, B, K, salt) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!A || !B || !K || !salt)\r\n                throw 'Missing parameter(s).';\r\n\r\n            // Verify value of A and B.\r\n            if (A.mod(this.N).toString() == '0' ||\r\n                B.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            var hashN = this.hexHash(this.toHexString(this.N));\r\n            var hashg = this.hexHash(this.toHexString(this.g));\r\n\r\n            var hashUsername = this.hash(this.username);\r\n\r\n            var xorNg_bytes = [],\r\n                hashN_bytes = this.hexToBytes(hashN),\r\n                hashg_bytes = this.hexToBytes(hashg);\r\n\r\n            for (var i = 0; i < hashN_bytes.length; i++)\r\n                xorNg_bytes[i] = hashN_bytes[i] ^ hashg_bytes[i];\r\n\r\n            var xorNg = this.bytesToHex(xorNg_bytes);\r\n\r\n            var aHex = this.toHexString(A);\r\n            var bHex = this.toHexString(B);\r\n\r\n            var toHash = [xorNg, hashUsername, salt, aHex, bHex, K];\r\n            var toHash_str = '';\r\n\r\n            for (var j = 0; j < toHash.length; j++) {\r\n                toHash_str += toHash[j];\r\n            }\r\n\r\n            return this.hexHash(toHash_str);\r\n        },\r\n        /*\r\n     * Calculate match M = H(A, B, K) or M = H(A, M, K)\r\n     */\r\n        calculateM2: function(A, B_or_M, K) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!A || !B_or_M || !K)\r\n                throw 'Missing parameter(s).';\r\n\r\n            // Verify value of A and B.\r\n            if (A.mod(this.N).toString() == '0' ||\r\n                B_or_M.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            var aHex = this.toHexString(A);\r\n            var bHex = this.toHexString(B_or_M);\r\n\r\n            var toHash = [aHex, bHex, K];\r\n            var toHash_str = '';\r\n\r\n            for (var j = 0; j < toHash.length; j++) {\r\n                toHash_str += toHash[j];\r\n            }\r\n\r\n            return new BigInteger(this.hexHash(toHash_str), 16);\r\n\r\n        },\r\n\r\n        /*\r\n     * Calculate the client's premaster secret\r\n     * S = (B - (k * g^x)) ^ (a + (u * x)) % N\r\n     */\r\n        calculateS: function(B, salt, uu, aa) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!B || !salt || !uu || !aa)\r\n                throw 'Missing parameters.';\r\n\r\n            // Verify value of B.\r\n            if (B.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            // Calculate X from the salt.\r\n            var x = this.calculateX(salt);\r\n\r\n            // Calculate bx = g^x % N\r\n            var bx = this.g.modPow(x, this.N);\r\n\r\n            // Calculate ((B + N * k) - k * bx) % N\r\n            var btmp = B.add(this.N.multiply(this.k))\r\n                .subtract(bx.multiply(this.k)).mod(this.N);\r\n\r\n            // Finish calculation of the premaster secret.\r\n            return btmp.modPow(x.multiply(uu).add(aa), this.N);\r\n\r\n        },\r\n\r\n        calculateK: function(S) {\r\n            return this.hexHash(this.toHexString(S));\r\n        },\r\n\r\n        /*\r\n     * Helper functions for random number\r\n     * generation and format conversion.\r\n     */\r\n\r\n        /* Generate a random big integer */\r\n        srpRandom: function() {\r\n\r\n            var words = sjcl.random.randomWords(8, 0);\r\n            var hex = sjcl.codec.hex.fromBits(words);\r\n\r\n            // Verify random number large enough.\r\n            if (hex.length != 64)\r\n                throw 'Invalid random number size.'\r\n\r\n            var r = new BigInteger(hex, 16);\r\n\r\n            if (r.compareTo(this.N) >= 0)\r\n                r = a.mod(this.N.subtract(this.one));\r\n\r\n            if (r.compareTo(this.two) < 0)\r\n                r = two;\r\n\r\n            return r;\r\n\r\n        },\r\n\r\n        /* Return a random hexadecimal salt */\r\n        randomHexSalt: function() {\r\n\r\n            var words = sjcl.random.randomWords(8, 0);\r\n            var hex = sjcl.codec.hex.fromBits(words);\r\n\r\n            return hex;\r\n\r\n        },\r\n\r\n        /*\r\n     * Helper functions for hasing/padding.\r\n     */\r\n\r\n        /*\r\n    * SHA1 hashing function with padding: input\r\n    * is prefixed with 0 to meet N hex width.\r\n    */\r\n        paddedHash: function(array) {\r\n\r\n            var nlen = 2 * ((this.toHexString(this.N).length * 4 + 7) >> 3);\r\n\r\n            var toHash = '';\r\n\r\n            for (var i = 0; i < array.length; i++) {\r\n                toHash += this.nZeros(nlen - array[i].length) + array[i];\r\n            }\r\n\r\n            var hash = new BigInteger(this.hexHash(toHash), 16);\r\n\r\n            return hash.mod(this.N);\r\n\r\n        },\r\n\r\n        /*\r\n     * Generic hashing function.\r\n     */\r\n        hash: function(str) {\r\n\r\n            switch (this.hashFn.toLowerCase()) {\r\n\r\n            case 'sha-256':\r\n                var s = sjcl.codec.hex.fromBits(\r\n                    sjcl.hash.sha256.hash(str));\r\n                return this.nZeros(64 - s.length) + s;\r\n\r\n            case 'sha-1':\r\n            default:\r\n                return sha1.calcSHA1(str);\r\n\r\n            }\r\n        },\r\n\r\n        /*\r\n     * Hexadecimal hashing function.\r\n     */\r\n        hexHash: function(str) {\r\n            switch (this.hashFn.toLowerCase()) {\r\n\r\n            case 'sha-256':\r\n                var s = sjcl.codec.hex.fromBits(\r\n                    sjcl.hash.sha256.hash(\r\n                        sjcl.codec.hex.toBits(str)));\r\n                return this.nZeros(64 - s.length) + s;\r\n\r\n            case 'sha-1':\r\n            default:\r\n                return this.hash(this.pack(str));\r\n\r\n            }\r\n        },\r\n\r\n        /*\r\n     * Hex to string conversion.\r\n     */\r\n        pack: function(hex) {\r\n\r\n            // To prevent null byte termination bug\r\n            if (hex.length % 2 != 0) hex = '0' + hex;\r\n\r\n            i = 0;\r\n            ascii = '';\r\n\r\n            while (i < hex.length / 2) {\r\n                ascii = ascii + String.fromCharCode(\r\n                    parseInt(hex.substr(i * 2, 2), 16));\r\n                i++;\r\n            }\r\n\r\n            return ascii;\r\n\r\n        },\r\n\r\n        /* Return a string with N zeros. */\r\n        nZeros: function(n) {\r\n\r\n            if (n < 1) return '';\r\n            var t = this.nZeros(n >> 1);\r\n\r\n            return ((n & 1) == 0) ?\r\n                t + t : t + t + '0';\r\n\r\n        },\r\n\r\n        /*\r\n     * SRP group parameters, composed of N (hexadecimal\r\n     * prime value) and g (decimal group generator).\r\n     * See http://tools.ietf.org/html/rfc5054#appendix-A\r\n     */\r\n        initVals: {\r\n            1024: {\r\n                N: 'EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C' +\r\n                    '9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE4' +\r\n                    '8E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B29' +\r\n                    '7BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9A' +\r\n                    'FD5138FE8376435B9FC61D2FC0EB06E3',\r\n                g: '2'\r\n\r\n            },\r\n\r\n            1536: {\r\n                N: '9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA961' +\r\n                    '4B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F843' +\r\n                    '80B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0B' +\r\n                    'E3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF5' +\r\n                    '6EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734A' +\r\n                    'F7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E' +\r\n                    '8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB',\r\n                g: '2'\r\n            },\r\n\r\n            2048: {\r\n                N: 'AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC319294' +\r\n                    '3DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310D' +\r\n                    'CD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FB' +\r\n                    'D5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF74' +\r\n                    '7359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A' +\r\n                    '436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D' +\r\n                    '5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E73' +\r\n                    '03CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB6' +\r\n                    '94B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F' +\r\n                    '9E4AFF73',\r\n                g: '2'\r\n            },\r\n\r\n            3072: {\r\n                N: 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E08' +\r\n                    '8A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B' +\r\n                    '302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9' +\r\n                    'A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE6' +\r\n                    '49286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8' +\r\n                    'FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D' +\r\n                    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C' +\r\n                    '180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF695581718' +\r\n                    '3995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D' +\r\n                    '04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7D' +\r\n                    'B3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D226' +\r\n                    '1AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +\r\n                    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFC' +\r\n                    'E0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF',\r\n                g: '5'\r\n            },\r\n\r\n            4096: {\r\n                N: 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E08' +\r\n                    '8A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B' +\r\n                    '302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9' +\r\n                    'A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE6' +\r\n                    '49286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8' +\r\n                    'FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D' +\r\n                    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C' +\r\n                    '180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF695581718' +\r\n                    '3995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D' +\r\n                    '04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7D' +\r\n                    'B3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D226' +\r\n                    '1AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +\r\n                    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFC' +\r\n                    'E0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B26' +\r\n                    '99C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB' +\r\n                    '04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2' +\r\n                    '233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127' +\r\n                    'D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199' +\r\n                    'FFFFFFFFFFFFFFFF',\r\n                g: '5'\r\n            },\r\n\r\n            6144: {\r\n                N: 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E08' +\r\n                    '8A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B' +\r\n                    '302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9' +\r\n                    'A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE6' +\r\n                    '49286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8' +\r\n                    'FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D' +\r\n                    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C' +\r\n                    '180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF695581718' +\r\n                    '3995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D' +\r\n                    '04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7D' +\r\n                    'B3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D226' +\r\n                    '1AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +\r\n                    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFC' +\r\n                    'E0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B26' +\r\n                    '99C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB' +\r\n                    '04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2' +\r\n                    '233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127' +\r\n                    'D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934028492' +\r\n                    '36C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406' +\r\n                    'AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918' +\r\n                    'DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B33205151' +\r\n                    '2BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03' +\r\n                    'F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97F' +\r\n                    'BEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AA' +\r\n                    'CC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58B' +\r\n                    'B7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632' +\r\n                    '387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E' +\r\n                    '6DCC4024FFFFFFFFFFFFFFFF',\r\n                g: '5'\r\n            },\r\n\r\n            8192: {\r\n                N: 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E08' +\r\n                    '8A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B' +\r\n                    '302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9' +\r\n                    'A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE6' +\r\n                    '49286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8' +\r\n                    'FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D' +\r\n                    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C' +\r\n                    '180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF695581718' +\r\n                    '3995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D' +\r\n                    '04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7D' +\r\n                    'B3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D226' +\r\n                    '1AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +\r\n                    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFC' +\r\n                    'E0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B26' +\r\n                    '99C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB' +\r\n                    '04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2' +\r\n                    '233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127' +\r\n                    'D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934028492' +\r\n                    '36C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406' +\r\n                    'AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918' +\r\n                    'DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B33205151' +\r\n                    '2BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03' +\r\n                    'F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97F' +\r\n                    'BEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AA' +\r\n                    'CC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58B' +\r\n                    'B7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632' +\r\n                    '387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E' +\r\n                    '6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA' +\r\n                    '3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C' +\r\n                    '5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD9' +\r\n                    '22222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC886' +\r\n                    '2F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A6' +\r\n                    '6D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC5' +\r\n                    '0846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268' +\r\n                    '359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6' +\r\n                    'FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E71' +\r\n                    '60C980DD98EDD3DFFFFFFFFFFFFFFFFF',\r\n                g: '19'\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n     * Server-side SRP functions. These should not\r\n     * be used on the client except for debugging.\r\n     */\r\n\r\n        /* Calculate the server's public value B. */\r\n        calculateB: function(b, v) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!b || !v) throw 'Missing parameters.';\r\n\r\n            var bb = this.g.modPow(b, this.N);\r\n            var B = bb.add(v.multiply(this.k)).mod(this.N);\r\n\r\n            return B;\r\n\r\n        },\r\n\r\n        /* Calculate the server's premaster secret */\r\n        calculateServerS: function(A, v, u, B) {\r\n\r\n            // Verify presence of parameters.\r\n            if (!A || !v || !u || !B)\r\n                throw 'Missing parameters.';\r\n\r\n            // Verify value of A and B.\r\n            if (A.mod(this.N).toString() == '0' ||\r\n                B.mod(this.N).toString() == '0')\r\n                throw 'ABORT: illegal_parameter';\r\n\r\n            return v.modPow(u, this.N).multiply(A)\r\n                .mod(this.N).modPow(B, this.N);\r\n        }\r\n\r\n    };\r\n\r\n    return SRPClient;\r\n});\r\n\r\n/*!\r\n * @overview es6-promise - a tiny implementation of Promises/A+.\r\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\r\n * @license   Licensed under MIT license\r\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\r\n * @version   3.0.2\r\n */\r\n\r\n;(function() {\r\n    \"use strict\";\r\n    function lib$es6$promise$utils$$objectOrFunction(x) {\r\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\r\n    }\r\n\r\n    function lib$es6$promise$utils$$isFunction(x) {\r\n      return typeof x === 'function';\r\n    }\r\n\r\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\r\n      return typeof x === 'object' && x !== null;\r\n    }\r\n\r\n    var lib$es6$promise$utils$$_isArray;\r\n    if (!Array.isArray) {\r\n      lib$es6$promise$utils$$_isArray = function (x) {\r\n        return Object.prototype.toString.call(x) === '[object Array]';\r\n      };\r\n    } else {\r\n      lib$es6$promise$utils$$_isArray = Array.isArray;\r\n    }\r\n\r\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\r\n    var lib$es6$promise$asap$$len = 0;\r\n    var lib$es6$promise$asap$$toString = {}.toString;\r\n    var lib$es6$promise$asap$$vertxNext;\r\n    var lib$es6$promise$asap$$customSchedulerFn;\r\n\r\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\r\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\r\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\r\n      lib$es6$promise$asap$$len += 2;\r\n      if (lib$es6$promise$asap$$len === 2) {\r\n        // If len is 2, that means that we need to schedule an async flush.\r\n        // If additional callbacks are queued before the queue is flushed, they\r\n        // will be processed by this flush that we are scheduling.\r\n        if (lib$es6$promise$asap$$customSchedulerFn) {\r\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\r\n        } else {\r\n          lib$es6$promise$asap$$scheduleFlush();\r\n        }\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\r\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\r\n    }\r\n\r\n    function lib$es6$promise$asap$$setAsap(asapFn) {\r\n      lib$es6$promise$asap$$asap = asapFn;\r\n    }\r\n\r\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\r\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\r\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\r\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\r\n\r\n    // test for web worker but not in IE10\r\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\r\n      typeof importScripts !== 'undefined' &&\r\n      typeof MessageChannel !== 'undefined';\r\n\r\n    // node\r\n    function lib$es6$promise$asap$$useNextTick() {\r\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\r\n      // see https://github.com/cujojs/when/issues/410 for details\r\n      return function() {\r\n        process.nextTick(lib$es6$promise$asap$$flush);\r\n      };\r\n    }\r\n\r\n    // vertx\r\n    function lib$es6$promise$asap$$useVertxTimer() {\r\n      return function() {\r\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\r\n      };\r\n    }\r\n\r\n    function lib$es6$promise$asap$$useMutationObserver() {\r\n      var iterations = 0;\r\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\r\n      var node = document.createTextNode('');\r\n      observer.observe(node, { characterData: true });\r\n\r\n      return function() {\r\n        node.data = (iterations = ++iterations % 2);\r\n      };\r\n    }\r\n\r\n    // web worker\r\n    function lib$es6$promise$asap$$useMessageChannel() {\r\n      var channel = new MessageChannel();\r\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\r\n      return function () {\r\n        channel.port2.postMessage(0);\r\n      };\r\n    }\r\n\r\n    function lib$es6$promise$asap$$useSetTimeout() {\r\n      return function() {\r\n        setTimeout(lib$es6$promise$asap$$flush, 1);\r\n      };\r\n    }\r\n\r\n    var lib$es6$promise$asap$$queue = new Array(1000);\r\n    function lib$es6$promise$asap$$flush() {\r\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\r\n        var callback = lib$es6$promise$asap$$queue[i];\r\n        var arg = lib$es6$promise$asap$$queue[i+1];\r\n\r\n        callback(arg);\r\n\r\n        lib$es6$promise$asap$$queue[i] = undefined;\r\n        lib$es6$promise$asap$$queue[i+1] = undefined;\r\n      }\r\n\r\n      lib$es6$promise$asap$$len = 0;\r\n    }\r\n\r\n    function lib$es6$promise$asap$$attemptVertx() {\r\n      try {\r\n        var r = require;\r\n        var vertx = r('vertx');\r\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\r\n        return lib$es6$promise$asap$$useVertxTimer();\r\n      } catch(e) {\r\n        return lib$es6$promise$asap$$useSetTimeout();\r\n      }\r\n    }\r\n\r\n    var lib$es6$promise$asap$$scheduleFlush;\r\n    // Decide what async method to use to triggering processing of queued callbacks:\r\n    if (lib$es6$promise$asap$$isNode) {\r\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\r\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\r\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\r\n    } else if (lib$es6$promise$asap$$isWorker) {\r\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\r\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\r\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\r\n    } else {\r\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$noop() {}\r\n\r\n    var lib$es6$promise$$internal$$PENDING   = void 0;\r\n    var lib$es6$promise$$internal$$FULFILLED = 1;\r\n    var lib$es6$promise$$internal$$REJECTED  = 2;\r\n\r\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\r\n\r\n    function lib$es6$promise$$internal$$selfFulfillment() {\r\n      return new TypeError(\"You cannot resolve a promise with itself\");\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\r\n      return new TypeError('A promises callback cannot return that same promise.');\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$getThen(promise) {\r\n      try {\r\n        return promise.then;\r\n      } catch(error) {\r\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\r\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\r\n      try {\r\n        then.call(value, fulfillmentHandler, rejectionHandler);\r\n      } catch(e) {\r\n        return e;\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\r\n       lib$es6$promise$asap$$asap(function(promise) {\r\n        var sealed = false;\r\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\r\n          if (sealed) { return; }\r\n          sealed = true;\r\n          if (thenable !== value) {\r\n            lib$es6$promise$$internal$$resolve(promise, value);\r\n          } else {\r\n            lib$es6$promise$$internal$$fulfill(promise, value);\r\n          }\r\n        }, function(reason) {\r\n          if (sealed) { return; }\r\n          sealed = true;\r\n\r\n          lib$es6$promise$$internal$$reject(promise, reason);\r\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\r\n\r\n        if (!sealed && error) {\r\n          sealed = true;\r\n          lib$es6$promise$$internal$$reject(promise, error);\r\n        }\r\n      }, promise);\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\r\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\r\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\r\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\r\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\r\n      } else {\r\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\r\n          lib$es6$promise$$internal$$resolve(promise, value);\r\n        }, function(reason) {\r\n          lib$es6$promise$$internal$$reject(promise, reason);\r\n        });\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {\r\n      if (maybeThenable.constructor === promise.constructor) {\r\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\r\n      } else {\r\n        var then = lib$es6$promise$$internal$$getThen(maybeThenable);\r\n\r\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\r\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\r\n        } else if (then === undefined) {\r\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\r\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\r\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\r\n        } else {\r\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\r\n        }\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$resolve(promise, value) {\r\n      if (promise === value) {\r\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\r\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\r\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);\r\n      } else {\r\n        lib$es6$promise$$internal$$fulfill(promise, value);\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$publishRejection(promise) {\r\n      if (promise._onerror) {\r\n        promise._onerror(promise._result);\r\n      }\r\n\r\n      lib$es6$promise$$internal$$publish(promise);\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\r\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\r\n\r\n      promise._result = value;\r\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\r\n\r\n      if (promise._subscribers.length !== 0) {\r\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$reject(promise, reason) {\r\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\r\n      promise._state = lib$es6$promise$$internal$$REJECTED;\r\n      promise._result = reason;\r\n\r\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\r\n      var subscribers = parent._subscribers;\r\n      var length = subscribers.length;\r\n\r\n      parent._onerror = null;\r\n\r\n      subscribers[length] = child;\r\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\r\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\r\n\r\n      if (length === 0 && parent._state) {\r\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$publish(promise) {\r\n      var subscribers = promise._subscribers;\r\n      var settled = promise._state;\r\n\r\n      if (subscribers.length === 0) { return; }\r\n\r\n      var child, callback, detail = promise._result;\r\n\r\n      for (var i = 0; i < subscribers.length; i += 3) {\r\n        child = subscribers[i];\r\n        callback = subscribers[i + settled];\r\n\r\n        if (child) {\r\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\r\n        } else {\r\n          callback(detail);\r\n        }\r\n      }\r\n\r\n      promise._subscribers.length = 0;\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$ErrorObject() {\r\n      this.error = null;\r\n    }\r\n\r\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\r\n\r\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\r\n      try {\r\n        return callback(detail);\r\n      } catch(e) {\r\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\r\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\r\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\r\n          value, error, succeeded, failed;\r\n\r\n      if (hasCallback) {\r\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\r\n\r\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\r\n          failed = true;\r\n          error = value.error;\r\n          value = null;\r\n        } else {\r\n          succeeded = true;\r\n        }\r\n\r\n        if (promise === value) {\r\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\r\n          return;\r\n        }\r\n\r\n      } else {\r\n        value = detail;\r\n        succeeded = true;\r\n      }\r\n\r\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\r\n        // noop\r\n      } else if (hasCallback && succeeded) {\r\n        lib$es6$promise$$internal$$resolve(promise, value);\r\n      } else if (failed) {\r\n        lib$es6$promise$$internal$$reject(promise, error);\r\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\r\n        lib$es6$promise$$internal$$fulfill(promise, value);\r\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\r\n        lib$es6$promise$$internal$$reject(promise, value);\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\r\n      try {\r\n        resolver(function resolvePromise(value){\r\n          lib$es6$promise$$internal$$resolve(promise, value);\r\n        }, function rejectPromise(reason) {\r\n          lib$es6$promise$$internal$$reject(promise, reason);\r\n        });\r\n      } catch(e) {\r\n        lib$es6$promise$$internal$$reject(promise, e);\r\n      }\r\n    }\r\n\r\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\r\n      var enumerator = this;\r\n\r\n      enumerator._instanceConstructor = Constructor;\r\n      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);\r\n\r\n      if (enumerator._validateInput(input)) {\r\n        enumerator._input     = input;\r\n        enumerator.length     = input.length;\r\n        enumerator._remaining = input.length;\r\n\r\n        enumerator._init();\r\n\r\n        if (enumerator.length === 0) {\r\n          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\r\n        } else {\r\n          enumerator.length = enumerator.length || 0;\r\n          enumerator._enumerate();\r\n          if (enumerator._remaining === 0) {\r\n            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\r\n          }\r\n        }\r\n      } else {\r\n        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());\r\n      }\r\n    }\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {\r\n      return lib$es6$promise$utils$$isArray(input);\r\n    };\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\r\n      return new Error('Array Methods must be provided an Array');\r\n    };\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {\r\n      this._result = new Array(this.length);\r\n    };\r\n\r\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\r\n      var enumerator = this;\r\n\r\n      var length  = enumerator.length;\r\n      var promise = enumerator.promise;\r\n      var input   = enumerator._input;\r\n\r\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\r\n        enumerator._eachEntry(input[i], i);\r\n      }\r\n    };\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\r\n      var enumerator = this;\r\n      var c = enumerator._instanceConstructor;\r\n\r\n      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {\r\n        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {\r\n          entry._onerror = null;\r\n          enumerator._settledAt(entry._state, i, entry._result);\r\n        } else {\r\n          enumerator._willSettleAt(c.resolve(entry), i);\r\n        }\r\n      } else {\r\n        enumerator._remaining--;\r\n        enumerator._result[i] = entry;\r\n      }\r\n    };\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\r\n      var enumerator = this;\r\n      var promise = enumerator.promise;\r\n\r\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\r\n        enumerator._remaining--;\r\n\r\n        if (state === lib$es6$promise$$internal$$REJECTED) {\r\n          lib$es6$promise$$internal$$reject(promise, value);\r\n        } else {\r\n          enumerator._result[i] = value;\r\n        }\r\n      }\r\n\r\n      if (enumerator._remaining === 0) {\r\n        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);\r\n      }\r\n    };\r\n\r\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\r\n      var enumerator = this;\r\n\r\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\r\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\r\n      }, function(reason) {\r\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\r\n      });\r\n    };\r\n    function lib$es6$promise$promise$all$$all(entries) {\r\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\r\n    }\r\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\r\n    function lib$es6$promise$promise$race$$race(entries) {\r\n      /*jshint validthis:true */\r\n      var Constructor = this;\r\n\r\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\r\n\r\n      if (!lib$es6$promise$utils$$isArray(entries)) {\r\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\r\n        return promise;\r\n      }\r\n\r\n      var length = entries.length;\r\n\r\n      function onFulfillment(value) {\r\n        lib$es6$promise$$internal$$resolve(promise, value);\r\n      }\r\n\r\n      function onRejection(reason) {\r\n        lib$es6$promise$$internal$$reject(promise, reason);\r\n      }\r\n\r\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\r\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\r\n      }\r\n\r\n      return promise;\r\n    }\r\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\r\n    function lib$es6$promise$promise$resolve$$resolve(object) {\r\n      /*jshint validthis:true */\r\n      var Constructor = this;\r\n\r\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\r\n        return object;\r\n      }\r\n\r\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\r\n      lib$es6$promise$$internal$$resolve(promise, object);\r\n      return promise;\r\n    }\r\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\r\n    function lib$es6$promise$promise$reject$$reject(reason) {\r\n      /*jshint validthis:true */\r\n      var Constructor = this;\r\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\r\n      lib$es6$promise$$internal$$reject(promise, reason);\r\n      return promise;\r\n    }\r\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\r\n\r\n    var lib$es6$promise$promise$$counter = 0;\r\n\r\n    function lib$es6$promise$promise$$needsResolver() {\r\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\r\n    }\r\n\r\n    function lib$es6$promise$promise$$needsNew() {\r\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\r\n    }\r\n\r\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\r\n    /**\r\n      Promise objects represent the eventual result of an asynchronous operation. The\r\n      primary way of interacting with a promise is through its `then` method, which\r\n      registers callbacks to receive either a promise's eventual value or the reason\r\n      why the promise cannot be fulfilled.\r\n      Terminology\r\n      -----------\r\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\r\n      - `thenable` is an object or function that defines a `then` method.\r\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\r\n      - `exception` is a value that is thrown using the throw statement.\r\n      - `reason` is a value that indicates why a promise was rejected.\r\n      - `settled` the final resting state of a promise, fulfilled or rejected.\r\n      A promise can be in one of three states: pending, fulfilled, or rejected.\r\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\r\n      state.  Promises that are rejected have a rejection reason and are in the\r\n      rejected state.  A fulfillment value is never a thenable.\r\n      Promises can also be said to *resolve* a value.  If this value is also a\r\n      promise, then the original promise's settled state will match the value's\r\n      settled state.  So a promise that *resolves* a promise that rejects will\r\n      itself reject, and a promise that *resolves* a promise that fulfills will\r\n      itself fulfill.\r\n      Basic Usage:\r\n      ------------\r\n      ```js\r\n      var promise = new Promise(function(resolve, reject) {\r\n        // on success\r\n        resolve(value);\r\n        // on failure\r\n        reject(reason);\r\n      });\r\n      promise.then(function(value) {\r\n        // on fulfillment\r\n      }, function(reason) {\r\n        // on rejection\r\n      });\r\n      ```\r\n      Advanced Usage:\r\n      ---------------\r\n      Promises shine when abstracting away asynchronous interactions such as\r\n      `XMLHttpRequest`s.\r\n      ```js\r\n      function getJSON(url) {\r\n        return new Promise(function(resolve, reject){\r\n          var xhr = new XMLHttpRequest();\r\n          xhr.open('GET', url);\r\n          xhr.onreadystatechange = handler;\r\n          xhr.responseType = 'json';\r\n          xhr.setRequestHeader('Accept', 'application/json');\r\n          xhr.send();\r\n          function handler() {\r\n            if (this.readyState === this.DONE) {\r\n              if (this.status === 200) {\r\n                resolve(this.response);\r\n              } else {\r\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\r\n              }\r\n            }\r\n          };\r\n        });\r\n      }\r\n      getJSON('/posts.json').then(function(json) {\r\n        // on fulfillment\r\n      }, function(reason) {\r\n        // on rejection\r\n      });\r\n      ```\r\n      Unlike callbacks, promises are great composable primitives.\r\n      ```js\r\n      Promise.all([\r\n        getJSON('/posts'),\r\n        getJSON('/comments')\r\n      ]).then(function(values){\r\n        values[0] // => postsJSON\r\n        values[1] // => commentsJSON\r\n        return values;\r\n      });\r\n      ```\r\n      @class Promise\r\n      @param {function} resolver\r\n      Useful for tooling.\r\n      @constructor\r\n    */\r\n    function lib$es6$promise$promise$$Promise(resolver) {\r\n      this._id = lib$es6$promise$promise$$counter++;\r\n      this._state = undefined;\r\n      this._result = undefined;\r\n      this._subscribers = [];\r\n\r\n      if (lib$es6$promise$$internal$$noop !== resolver) {\r\n        if (!lib$es6$promise$utils$$isFunction(resolver)) {\r\n          lib$es6$promise$promise$$needsResolver();\r\n        }\r\n\r\n        if (!(this instanceof lib$es6$promise$promise$$Promise)) {\r\n          lib$es6$promise$promise$$needsNew();\r\n        }\r\n\r\n        lib$es6$promise$$internal$$initializePromise(this, resolver);\r\n      }\r\n    }\r\n\r\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\r\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\r\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\r\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\r\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\r\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\r\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\r\n\r\n    lib$es6$promise$promise$$Promise.prototype = {\r\n      constructor: lib$es6$promise$promise$$Promise,\r\n\r\n    /**\r\n      The primary way of interacting with a promise is through its `then` method,\r\n      which registers callbacks to receive either a promise's eventual value or the\r\n      reason why the promise cannot be fulfilled.\r\n      ```js\r\n      findUser().then(function(user){\r\n        // user is available\r\n      }, function(reason){\r\n        // user is unavailable, and you are given the reason why\r\n      });\r\n      ```\r\n      Chaining\r\n      --------\r\n      The return value of `then` is itself a promise.  This second, 'downstream'\r\n      promise is resolved with the return value of the first promise's fulfillment\r\n      or rejection handler, or rejected if the handler throws an exception.\r\n      ```js\r\n      findUser().then(function (user) {\r\n        return user.name;\r\n      }, function (reason) {\r\n        return 'default name';\r\n      }).then(function (userName) {\r\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\r\n        // will be `'default name'`\r\n      });\r\n      findUser().then(function (user) {\r\n        throw new Error('Found user, but still unhappy');\r\n      }, function (reason) {\r\n        throw new Error('`findUser` rejected and we're unhappy');\r\n      }).then(function (value) {\r\n        // never reached\r\n      }, function (reason) {\r\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\r\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\r\n      });\r\n      ```\r\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\r\n      ```js\r\n      findUser().then(function (user) {\r\n        throw new PedagogicalException('Upstream error');\r\n      }).then(function (value) {\r\n        // never reached\r\n      }).then(function (value) {\r\n        // never reached\r\n      }, function (reason) {\r\n        // The `PedgagocialException` is propagated all the way down to here\r\n      });\r\n      ```\r\n      Assimilation\r\n      ------------\r\n      Sometimes the value you want to propagate to a downstream promise can only be\r\n      retrieved asynchronously. This can be achieved by returning a promise in the\r\n      fulfillment or rejection handler. The downstream promise will then be pending\r\n      until the returned promise is settled. This is called *assimilation*.\r\n      ```js\r\n      findUser().then(function (user) {\r\n        return findCommentsByAuthor(user);\r\n      }).then(function (comments) {\r\n        // The user's comments are now available\r\n      });\r\n      ```\r\n      If the assimliated promise rejects, then the downstream promise will also reject.\r\n      ```js\r\n      findUser().then(function (user) {\r\n        return findCommentsByAuthor(user);\r\n      }).then(function (comments) {\r\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\r\n      }, function (reason) {\r\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\r\n      });\r\n      ```\r\n      Simple Example\r\n      --------------\r\n      Synchronous Example\r\n      ```javascript\r\n      var result;\r\n      try {\r\n        result = findResult();\r\n        // success\r\n      } catch(reason) {\r\n        // failure\r\n      }\r\n      ```\r\n      Errback Example\r\n      ```js\r\n      findResult(function(result, err){\r\n        if (err) {\r\n          // failure\r\n        } else {\r\n          // success\r\n        }\r\n      });\r\n      ```\r\n      Promise Example;\r\n      ```javascript\r\n      findResult().then(function(result){\r\n        // success\r\n      }, function(reason){\r\n        // failure\r\n      });\r\n      ```\r\n      Advanced Example\r\n      --------------\r\n      Synchronous Example\r\n      ```javascript\r\n      var author, books;\r\n      try {\r\n        author = findAuthor();\r\n        books  = findBooksByAuthor(author);\r\n        // success\r\n      } catch(reason) {\r\n        // failure\r\n      }\r\n      ```\r\n      Errback Example\r\n      ```js\r\n      function foundBooks(books) {\r\n      }\r\n      function failure(reason) {\r\n      }\r\n      findAuthor(function(author, err){\r\n        if (err) {\r\n          failure(err);\r\n          // failure\r\n        } else {\r\n          try {\r\n            findBoooksByAuthor(author, function(books, err) {\r\n              if (err) {\r\n                failure(err);\r\n              } else {\r\n                try {\r\n                  foundBooks(books);\r\n                } catch(reason) {\r\n                  failure(reason);\r\n                }\r\n              }\r\n            });\r\n          } catch(error) {\r\n            failure(err);\r\n          }\r\n          // success\r\n        }\r\n      });\r\n      ```\r\n      Promise Example;\r\n      ```javascript\r\n      findAuthor().\r\n        then(findBooksByAuthor).\r\n        then(function(books){\r\n          // found books\r\n      }).catch(function(reason){\r\n        // something went wrong\r\n      });\r\n      ```\r\n      @method then\r\n      @param {Function} onFulfilled\r\n      @param {Function} onRejected\r\n      Useful for tooling.\r\n      @return {Promise}\r\n    */\r\n      then: function(onFulfillment, onRejection) {\r\n        var parent = this;\r\n        var state = parent._state;\r\n\r\n        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\r\n          return this;\r\n        }\r\n\r\n        var child = new this.constructor(lib$es6$promise$$internal$$noop);\r\n        var result = parent._result;\r\n\r\n        if (state) {\r\n          var callback = arguments[state - 1];\r\n          lib$es6$promise$asap$$asap(function(){\r\n            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\r\n          });\r\n        } else {\r\n          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\r\n        }\r\n\r\n        return child;\r\n      },\r\n\r\n    /**\r\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\r\n      as the catch block of a try/catch statement.\r\n      ```js\r\n      function findAuthor(){\r\n        throw new Error('couldn't find that author');\r\n      }\r\n      // synchronous\r\n      try {\r\n        findAuthor();\r\n      } catch(reason) {\r\n        // something went wrong\r\n      }\r\n      // async with promises\r\n      findAuthor().catch(function(reason){\r\n        // something went wrong\r\n      });\r\n      ```\r\n      @method catch\r\n      @param {Function} onRejection\r\n      Useful for tooling.\r\n      @return {Promise}\r\n    */\r\n      'catch': function(onRejection) {\r\n        return this.then(null, onRejection);\r\n      }\r\n    };\r\n    function lib$es6$promise$polyfill$$polyfill() {\r\n      var local;\r\n\r\n      if (typeof global !== 'undefined') {\r\n          local = global;\r\n      } else if (typeof self !== 'undefined') {\r\n          local = self;\r\n      } else {\r\n          try {\r\n              local = Function('return this')();\r\n          } catch (e) {\r\n              throw new Error('polyfill failed because global object is unavailable in this environment');\r\n          }\r\n      }\r\n\r\n      var P = local.Promise;\r\n\r\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\r\n        return;\r\n      }\r\n\r\n      local.Promise = lib$es6$promise$promise$$default;\r\n    }\r\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\r\n\r\n    var lib$es6$promise$umd$$ES6Promise = {\r\n      'Promise': lib$es6$promise$promise$$default,\r\n      'polyfill': lib$es6$promise$polyfill$$default\r\n    };\r\n\r\n    /* global define:true module:true window: true */\r\n    if (typeof define === 'function' && define['amd']) {\r\n        define('ES6Promise',function() { return lib$es6$promise$umd$$ES6Promise; });\r\n    } else if (typeof module !== 'undefined' && module['exports']) {\r\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\r\n    } else if (typeof this !== 'undefined') {\r\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\r\n    }\r\n\r\n    lib$es6$promise$polyfill$$default();\r\n}).call(this);\r\n\r\n\r\n; (function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore', [], factory);\r\n    } else {\r\n        window.WebSdkCore = factory();\r\n    }\r\n})(function () {\r\n    var WebSdk = {\r\n        Promise: null,      // allows passing custom implementation of promises,\r\n        debug: false,       // if true browser console will be used to output debug messages\r\n        version: 4\r\n    };\r\n\r\n    var WebSdkEncryptionSupport = {\r\n        None: 1,\r\n        Encoding: 2,\r\n        Encryption: 3,\r\n        AESEncryption: 4\r\n    };\r\n\r\n    var WebSdkDataSupport = {\r\n        Binary: 1,\r\n        String: 2\r\n    };\r\n\r\n    var core = {\r\n        WebSdk: WebSdk,\r\n        WebSdkEncryptionSupport: WebSdkEncryptionSupport,\r\n        WebSdkDataSupport: WebSdkDataSupport\r\n    };\r\n\r\n    core.log = function () {\r\n        if (!core.WebSdk.debug) return;\r\n\r\n        if (console.log.apply)\r\n            console.log.apply(console, [].slice.call(arguments));\r\n        else\r\n            console.log(arguments[0]);\r\n    }\r\n\r\n    return core;\r\n});\r\n;\r\n(function(factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore.utils', [\r\n            'WebSdkCore'\r\n        ], factory);\r\n    } else {\r\n        if (!window.WebSdkCore)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n      window.WebSdkCore.utils = factory(window.WebSdkCore);\r\n    }\r\n})(function (core) {\r\n\r\n    function getQueryParam(url, name) {\r\n        var match = RegExp('[?&]' + name + '=([^&]*)').exec(url);\r\n        return match ? decodeURIComponent(match[1].replace(/\\+/g, ' ')) : null;\r\n    }\r\n\r\n    function ajax(method, url, data) {\r\n        var promise = new window.Promise(function (resolve, reject) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(method, url, true);\r\n            xhr.responseType = \"json\";\r\n            xhr.setRequestHeader(\"Accept\", \"application/json\");\r\n            xhr.onreadystatechange = function onreadystatechange() {\r\n                if (this.readyState === XMLHttpRequest.DONE) {\r\n                    if (this.status === 200) {\r\n                        var data;\r\n                        if (this.responseType === '' && typeof this.responseText === \"string\")\r\n                            data = JSON.parse(this.responseText);\r\n                        else\r\n                            data = this.response;\r\n                        resolve(data);\r\n                    } else {\r\n                        reject(this);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (method.toLowerCase() === \"post\" && data) {\r\n                var urlEncodedData = \"\";\r\n                var urlEncodedDataPairs = [];\r\n                var name;\r\n                for (name in data) {\r\n                    urlEncodedDataPairs.push(encodeURIComponent(name) + '=' + encodeURIComponent(data[name]));\r\n                }\r\n                urlEncodedData = urlEncodedDataPairs.join('&').replace(/%20/g, '+');\r\n                xhr.send(urlEncodedData);\r\n            } else {\r\n                xhr.send();\r\n            }\r\n        });\r\n\r\n        return promise;\r\n    }\r\n\r\n    function defer(deferred) {\r\n        deferred.promise = new window.Promise(function (resolve, reject) {\r\n            deferred.resolve = resolve;\r\n            deferred.reject = reject;\r\n        });\r\n        return deferred;\r\n    }\r\n\r\n    function Deferred() {\r\n        if (this instanceof Deferred) return defer(this);\r\n        else return defer(Object.create(Deferred.prototype));\r\n    }\r\n\r\n    function tryParseJson(str) {\r\n        if (!str)\r\n            return null;\r\n\r\n        var obj;\r\n        try {\r\n            obj = JSON.parse(str);\r\n        } catch (e) {\r\n            obj = null;\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    var FixedQueue = (function () {\r\n        function FixedQueue(maxSize) {\r\n            this.m_items = [];\r\n            this.m_maxSize = maxSize;\r\n        }\r\n\r\n        Object.defineProperty(FixedQueue.prototype, \"length\", {\r\n            get: function () {\r\n                return this.m_items.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n\r\n        Object.defineProperty(FixedQueue.prototype, \"items\", {\r\n            get: function () {\r\n                return this.m_items;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n\r\n        FixedQueue.prototype.trimHead = function () {\r\n            if (this.m_items.length <= this.m_maxSize)\r\n                return;\r\n            Array.prototype.splice.call(this.m_items, 0, this.m_items.length - this.m_maxSize);\r\n        };\r\n\r\n        FixedQueue.prototype.trimTail = function () {\r\n            if (this.m_items.length <= this.m_maxSize)\r\n                return;\r\n            Array.prototype.splice.call(this.m_items, this.m_maxSize, this.m_items.length - this.m_maxSize);\r\n        };\r\n\r\n        FixedQueue.prototype.push = function () {\r\n            var result = Array.prototype.push.apply(this.m_items, arguments);\r\n            this.trimHead();\r\n            return result;\r\n        };\r\n\r\n        FixedQueue.prototype.splice = function () {\r\n\r\n            var result = Array.prototype.splice.apply(this.m_items, arguments);\r\n            this.trimTail();\r\n            return result;\r\n        };\r\n\r\n        FixedQueue.prototype.unshift = function () {\r\n\r\n            var result = Array.prototype.unshift.apply(this.m_items, arguments);\r\n            this.trimTail();\r\n            return result;\r\n        };\r\n        return FixedQueue;\r\n    })();\r\n\r\n    return {\r\n        getQueryParam: getQueryParam,\r\n        ajax: ajax,\r\n        tryParseJson: tryParseJson,\r\n\r\n        Deferred: Deferred,\r\n        FixedQueue: FixedQueue\r\n    };\r\n});\r\n;(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore.configurator', [\r\n            'WebSdkCore',\r\n            'WebSdkCore.utils'\r\n        ], factory);\r\n    } else {\r\n        if (!window.WebSdkCore)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n        window.WebSdkCore.configurator = factory(window.WebSdkCore, window.WebSdkCore.utils);\r\n    }\r\n})(function (core, utils) {\r\n\r\n    /**\r\n    * Loads configuration parameters from configuration server and saves it in session storage.\r\n    */\r\n    function Configurator() {\r\n        this.m_key = \"websdk\";\r\n\r\n        var sessionData = utils.tryParseJson(sessionStorage.getItem(this.m_key));\r\n        if (sessionData) {\r\n            this.m_port = parseInt(sessionData.port);\r\n            this.m_host = sessionData.host || \"127.0.0.1\";\r\n            this.m_isSecure = sessionData.isSecure;\r\n            this.m_srp = sessionData.srp;\r\n        }\r\n    }\r\n\r\n    Object.defineProperty(Configurator.prototype, \"url\", {\r\n        get: function () {\r\n            if (!this.m_port || !this.m_host) return null;\r\n\r\n            var protocol = this.m_isSecure ? \"https\" : \"http\";\r\n            return protocol + \"://\" + this.m_host + \":\" + this.m_port.toString();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n\r\n    Object.defineProperty(Configurator.prototype, \"srp\", {\r\n        get: function () {\r\n            return this.m_srp;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n\r\n    Object.defineProperty(Configurator.prototype, \"sessionId\", {\r\n        get: function () {\r\n            return sessionStorage.getItem(\"websdk.sessionId\");\r\n        },\r\n        set: function (value) {\r\n            return sessionStorage.setItem(\"websdk.sessionId\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n\r\n    Configurator.prototype.ensureLoaded = function (callback) {\r\n        core.log(\"Configurator: ensureLoaded\");\r\n\r\n        if (!!this.url && !!this.srp) return callback(null);\r\n\r\n        var self = this,\r\n            uri = \"https://127.0.0.1:52181/get_connection\";\r\n\r\n        utils.ajax('get', uri)\r\n            .then(function (response) {\r\n                core.log(\"Configurator: findConfiguration -> \", response);\r\n                if (response && response.endpoint && self.tryParse(response.endpoint)) {\r\n                    callback(null);\r\n                } else {\r\n                    callback(new Error(\"Cannot load configuration\"));\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                core.log(\"Configurator: findConfiguration -> ERROR \", err);\r\n                callback(err);\r\n            });\r\n    };\r\n\r\n    Configurator.prototype.tryParse = function (connectionString) {\r\n        core.log(\"Configurator: tryParse \" + connectionString);\r\n\r\n        var urlEl = document.createElement(\"a\");\r\n        urlEl.href = connectionString;\r\n\r\n        var port = parseInt(utils.getQueryParam(urlEl.search, \"web_sdk_port\") || \"\"),\r\n            isSecure = utils.getQueryParam(urlEl.search, \"web_sdk_secure\") == \"true\",\r\n            host = urlEl.hostname;\r\n\r\n        var p1 = utils.getQueryParam(urlEl.search, \"web_sdk_username\"),\r\n            p2 = utils.getQueryParam(urlEl.search, \"web_sdk_password\"),\r\n            salt = utils.getQueryParam(urlEl.search, \"web_sdk_salt\");\r\n\r\n        if (!port || !host || !p1 || !p2 || !salt) return false;\r\n\r\n        this.m_port = port;\r\n        this.m_host = host;\r\n        this.m_isSecure = isSecure;\r\n        this.m_srp = {\r\n            p1: p1,\r\n            p2: p2,\r\n            salt: salt\r\n        };\r\n\r\n        sessionStorage.setItem(this.m_key, JSON.stringify({\r\n            port: this.m_port,\r\n            host: this.m_host,\r\n            isSecure: this.m_isSecure,\r\n            srp: this.m_srp\r\n        }));\r\n\r\n        return true;\r\n    };\r\n\r\n    return new Configurator();\r\n});\r\n; (function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore.cipher', [\r\n            'WebSdkCore'\r\n        ], factory);\r\n    } else {\r\n        if (!window.WebSdkCore)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n        window.WebSdkCore.cipher = factory(window.WebSdkCore);\r\n    }\r\n})(function (core) {\r\n\r\n    var WebSdkAESVersion = 1;\r\n\r\n    var WebSdkAESDataType = {\r\n        Binary: 1,\r\n        UnicodeString: 2,\r\n        UTF8String: 3\r\n    };\r\n\r\n    var crypt = window.crypto || window.msCrypto;\r\n\r\n    function utf8ToBase64(str) {\r\n        var binstr = utf8ToBinaryString(str);\r\n        return btoa(binstr);\r\n    }\r\n\r\n    function base64ToUtf8(b64) {\r\n        var binstr = atob(b64);\r\n\r\n        return binaryStringToUtf8(binstr);\r\n    }\r\n\r\n    function utf8ToBinaryString(str) {\r\n        var escstr = encodeURIComponent(str);\r\n        var binstr = escstr.replace(/%([0-9A-F]{2})/g, function (match, p1) {\r\n            return String.fromCharCode(parseInt(p1, 16));\r\n        });\r\n\r\n        return binstr;\r\n    }\r\n\r\n    function binaryStringToUtf8(binstr) {\r\n        var escstr = binstr.replace(/(.)/g, function (m, p) {\r\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\r\n            if (code.length < 2) {\r\n                code = '0' + code;\r\n            }\r\n            return '%' + code;\r\n        });\r\n\r\n        return decodeURIComponent(escstr);\r\n    }\r\n\r\n    function keyCharAt(key, i) {\r\n        return key.charCodeAt(Math.floor(i % key.length));\r\n    }\r\n\r\n    function xor(key, data) {\r\n        var strArr = Array.prototype.map.call(data, function (x) { return x });\r\n        return strArr.map(function (c, i) {\r\n            return String.fromCharCode(c.charCodeAt(0) ^ keyCharAt(key, i));\r\n        }).join(\"\");\r\n    }\r\n\r\n    function getHdr(buf) {\r\n        var dv = new DataView(buf);\r\n        var version = dv.getUint8(0);\r\n        var type = dv.getUint8(1);\r\n        var length = dv.getUint32(2, true);\r\n        var offset = dv.getUint16(6, true);\r\n        return { version: version, type: type, length: length, offset: offset };\r\n    }\r\n\r\n    function setHdr(buf, type)\r\n    {\r\n        var dv = new DataView(buf);\r\n        // set version\r\n        dv.setUint8(0, WebSdkAESVersion);\r\n        // set type\r\n        dv.setUint8(1, type);\r\n        // set length\r\n        dv.setUint32(2, buf.byteLength - 8, true);\r\n        // set offset\r\n        dv.setUint16(6, 8, true);\r\n    }\r\n\r\n    function ab2str(buf) {\r\n\r\n        return new window.Promise(function (resolve, reject) {\r\n            var blob = new Blob([new Uint8Array(buf)]);\r\n            var fileReader = new FileReader();\r\n            fileReader.onload = function (event) {\r\n                return resolve(event.target.result);\r\n            };\r\n            fileReader.onerror = function (event) {\r\n                return reject(event.target.error);\r\n            };\r\n            fileReader.readAsText(blob, 'utf-16');\r\n        });\r\n    }\r\n    function str2ab(str) {\r\n        var buf = new ArrayBuffer(str.length * 2 + 8); // 2 bytes for each char\r\n        setHdr(buf, WebSdkAESDataType.UnicodeString); // unicode string\r\n        var bufView = new Uint16Array(buf, 8);\r\n        for (var i = 0, strLen = str.length; i < strLen; i++) {\r\n            bufView[i] = str.charCodeAt(i);\r\n        }\r\n        return buf;\r\n    }\r\n    function binary2ab(bin) {\r\n        var buf = new ArrayBuffer(bin.length + 8);\r\n        setHdr(buf, WebSdkAESDataType.Binary); // binary string\r\n        var bufSrc = new Uint8Array(bin);\r\n        var bufDest = new Uint8Array(buf, 8);\r\n        bufDest.set(bufSrc);\r\n        return buf;\r\n    }\r\n\r\n    // AES encryption wrappers\r\n    // So far we will use AES-CBC 256bit encryption with 128bit IV vector.\r\n\r\n    // You can use crypto.generateKey or crypto.importKey,\r\n    // but since I'm always either going to share, store, or receive a key\r\n    // I don't see the point of using 'generateKey' directly\r\n    function generateKey(rawKey) {\r\n        var usages = ['encrypt', 'decrypt'];\r\n        var extractable = false;\r\n\r\n        return crypt.subtle.importKey(\r\n          'raw'\r\n        , rawKey\r\n        , { name: 'AES-CBC' }\r\n        , extractable\r\n        , usages\r\n        );\r\n    }\r\n\r\n    function encrypt(data, key, iv) {\r\n        // a public value that should be generated for changes each time\r\n        return crypt.subtle.encrypt(\r\n          { name: 'AES-CBC', iv: iv }\r\n        , key\r\n        , data\r\n        );\r\n    };\r\n\r\n    function decrypt(data, key, iv) {\r\n        // a public value that should be generated for changes each time\r\n        return crypt.subtle.decrypt(\r\n          { name: 'AES-CBC', iv: iv }\r\n        , key\r\n        , data\r\n        );\r\n    };\r\n\r\n    function msGenerateKey(rawKey) {\r\n        var usages = ['encrypt', 'decrypt'];\r\n        var extractable = false;\r\n        return new window.Promise(function (resolve, reject) {\r\n\r\n            var keyOpp = crypt.subtle.importKey(\r\n              'raw'\r\n            , rawKey\r\n            , { name: 'AES-CBC' }\r\n            , extractable\r\n            , usages\r\n            );\r\n            keyOpp.oncomplete = function (e) {\r\n                resolve(keyOpp.result);\r\n            }\r\n\r\n            keyOpp.onerror = function (e) {\r\n                reject(new Error(\"Cannot create a key...\"));\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    function msEncrypt(data, key, iv) {\r\n        return new window.Promise(function (resolve, reject) {\r\n            // a public value that should be generated for changes each time\r\n            var encOpp = crypt.subtle.encrypt(\r\n              { name: 'AES-CBC', iv: iv }\r\n            , key\r\n            , data\r\n            );\r\n            encOpp.oncomplete = function (e) {\r\n                resolve(encOpp.result);\r\n            };\r\n            encOpp.onerror = function (e) {\r\n                reject(new Error(\"Fail to encrypt data...\"));\r\n            }\r\n        });\r\n    }\r\n\r\n    function msDecrypt(data, key, iv) {\r\n        return new window.Promise(function (resolve, reject) {\r\n            // a public value that should be generated for changes each time\r\n            var decOpp = crypt.subtle.decrypt(\r\n              { name: 'AES-CBC', iv: iv }\r\n            , key\r\n            , data\r\n            );\r\n            decOpp.oncomplete = function (e) {\r\n                resolve(decOpp.result);\r\n            };\r\n            decOpp.onerror = function (e) {\r\n                reject(new Error(\"Fail to encrypt data...\"));\r\n            }\r\n        });\r\n    }\r\n\r\n    function encryptAES(data, key, iv) {\r\n        if (typeof window.crypto !== 'undefined') {\r\n            return generateKey(key).then(function (key) {\r\n                return encrypt(data, key, iv);\r\n            });\r\n        } else { // Microsoft IE\r\n            return msGenerateKey(key).then(function (key) {\r\n                return msEncrypt(data, key, iv);\r\n            });\r\n        }\r\n    };\r\n\r\n    function decryptAES(data, key, iv) {\r\n        if (typeof window.crypto !== 'undefined') {\r\n            return generateKey(key).then(function (key) {\r\n                return decrypt(data, key, iv);\r\n            });\r\n        } else {\r\n            return msGenerateKey(key).then(function (key) {\r\n                return msDecrypt(data, key, iv);\r\n            });\r\n        }\r\n    };\r\n\r\n    /////////////////////////////////////////////\r\n\r\n    function hexToArray(hex) {\r\n        if (hex.length % 2 === 1) throw new Error(\"hexToBytes can't have a string with an odd number of characters.\");\r\n        if (hex.indexOf(\"0x\") === 0) hex = hex.slice(2);\r\n        return new Uint8Array(hex.match(/../g).map(function (x) { return parseInt(x, 16) }));\r\n    };\r\n\r\n    function promisefy(data) {\r\n        return new window.Promise(function (resolve, reject) {\r\n            setTimeout(function () {\r\n                resolve(data);\r\n            });\r\n        });\r\n    }\r\n\r\n    function AESEncryption(key, M1, data) {\r\n        var iv = new Uint8Array(hexToArray(M1).buffer, 0, 16);\r\n        var buff;\r\n        if (typeof data === 'string')\r\n            buff = str2ab(data);\r\n        else\r\n            buff = binary2ab(data);\r\n        return encryptAES(buff, key, iv);\r\n    }\r\n    function AESDecryption(key, M1, data) {\r\n        var iv = new Uint8Array(hexToArray(M1).buffer, 0, 16);\r\n        return decryptAES(data, key, iv).then(function (data) {\r\n            var hdr = getHdr(data);\r\n            if (hdr.version !== WebSdkAESVersion)\r\n                throw new Error(\"Invalid data version!\");\r\n            switch (hdr.type) {\r\n                case WebSdkAESDataType.Binary:\r\n                    return data.slice(hdr.offset);\r\n                case WebSdkAESDataType.UnicodeString:\r\n                    return ab2str(data.slice(hdr.offset));\r\n                default:\r\n                    throw new Error(\"Invalid data type!\");\r\n            }\r\n            return ab2str(data);\r\n        });\r\n    }\r\n\r\n    return {\r\n        encode: function (key, M1, data) {\r\n            switch (core.WebSdk.version) {\r\n                case core.WebSdkEncryptionSupport.AESEncryption:\r\n                    return AESEncryption(key, M1, data);\r\n                case core.WebSdkEncryptionSupport.Encryption:\r\n                    return promisefy(utf8ToBase64(xor(M1, data)));\r\n                case core.WebSdkEncryptionSupport.Encoding:\r\n                    return promisefy(utf8ToBase64(data));\r\n                default:\r\n                    return promisefy(data);\r\n            }\r\n        },\r\n        decode: function (key, M1, data) {\r\n            switch (core.WebSdk.version) {\r\n                case core.WebSdkEncryptionSupport.AESEncryption:\r\n                    return AESDecryption(key, M1, data);\r\n                case core.WebSdkEncryptionSupport.Encryption:\r\n                    return promisefy(xor(M1, base64ToUtf8(data)));\r\n                case core.WebSdkEncryptionSupport.Encoding:\r\n                    return promisefy(base64ToUtf8(data));\r\n                default:\r\n                    return promisefy(data);\r\n            }\r\n        },\r\n        isCryptoSupported: function () {\r\n            return ((typeof crypt !== 'undefined') && crypt.subtle && crypt.subtle.importKey && crypt.subtle.encrypt);\r\n        },\r\n        hexToBytes: function(hex) {\r\n            return hexToArray(hex);\r\n        }\r\n    };\r\n});\r\n; (function (factory) {\r\n    'use strict';\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore.channelOptions', [\r\n            'WebSdkCore'\r\n        ], factory);\r\n    } else {\r\n        var core = window.WebSdkCore;\r\n        if (!core)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n        window.WebSdkCore.channelOptions = factory(core);\r\n    }\r\n})(function (core) {\r\n\r\n    function WebChannelOptions(options) {\r\n        if (!options) options = {};\r\n\r\n        var version = core.WebSdkEncryptionSupport.AESEncryption,\r\n            debug = options.debug === true;\r\n\r\n        if (!!options.version) {\r\n            validateVersion(options.version);\r\n            version = options.version;\r\n        }\r\n\r\n        Object.defineProperties(this, {\r\n            \"version\": {\r\n                get: function () { return version; },\r\n                set: function (value) {\r\n                    validateVersion(value);\r\n                    version = value;\r\n                },\r\n                enumerable: true\r\n            },\r\n            \"debug\": {\r\n                get: function () { return debug; },\r\n                set: function () { debug = value; },\r\n                enumerable: true\r\n            }\r\n        });\r\n\r\n        function validateVersion(v) {\r\n            for (var supportedVersion in core.WebSdkEncryptionSupport) {\r\n                if (core.WebSdkEncryptionSupport.hasOwnProperty(supportedVersion) &&\r\n                    core.WebSdkEncryptionSupport[supportedVersion] === v)\r\n                    return;\r\n            }\r\n            throw new Error(\"invalid WebSdk version requested\");\r\n        }\r\n    }\r\n    return WebChannelOptions;\r\n\r\n});\r\n\r\n; (function (factory) {\r\n    'use strict';\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdkCore.channelClientImplementation', [\r\n            'async',\r\n            'sjcl',\r\n            'BigInteger',\r\n            'SRPClient',\r\n            'ES6Promise',\r\n            'WebSdkCore',\r\n            'WebSdkCore.utils',\r\n            'WebSdkCore.configurator',\r\n            'WebSdkCore.cipher'\r\n        ], factory);\r\n    } else {\r\n        var core = window.WebSdkCore;\r\n        if (!core)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n        window.WebSdkCore.channelClientImplementation = factory(async, sjcl, BigInteger, SRPClient, ES6Promise, core, core.utils, core.configurator, core.cipher);\r\n    }\r\n})(function (async, sjcl, BigInteger, SRPClient, ES6Promise, core, utils, configurator, cipher) {\r\n\r\n    if (!window.Promise)\r\n        window.Promise = ES6Promise.Promise;\r\n\r\n    function WebChannelClientImpl(clientPath) {\r\n\r\n        if (!clientPath)\r\n            throw new Error(\"clientPath cannot be empty\");\r\n\r\n        core.log(\"WebSdkVersion: \", core.WebSdk.version, \"clientPath: \", clientPath);\r\n\r\n        this.clientPath = clientPath;\r\n\r\n        this.wsThreshold = 10240; // max number of buffered bytes (10k)\r\n        this.wsQueueInterval = 1000; // interval to process message queue and send data over web-socket if buffer size is less then the threshold\r\n        this.wsQueueLimit = 100; // maximum queue size, when reaching this limit the oldest messages will be removed from the queue.\r\n        this.wsReconnectInterval = 5000;\r\n\r\n        this.queue = new utils.FixedQueue(this.wsQueueLimit);\r\n        this.queueInterval = null;\r\n        this.webSocket = null;\r\n\r\n        this.sessionKey = null;\r\n        this.M1 = null;\r\n\r\n        this.reconnectTimer = null;\r\n\r\n        this.onConnectionFailed = null;\r\n        this.onConnectionSucceed = null;\r\n        this.onDataReceivedBin = null;\r\n        this.onDataReceivedTxt = null;\r\n\r\n        var self = this;\r\n\r\n        window.parent.parent.addEventListener(\"blur\", function () {\r\n            self.resetReconnectTimer();\r\n            self.notifyFocusChanged(false);\r\n        });\r\n        window.parent.parent.addEventListener(\"focus\", function () {\r\n            self.notifyFocusChanged(true);\r\n        });\r\n\r\n    }\r\n\r\n    WebChannelClientImpl.prototype.notifyFocusChanged = function(isFocused) {\r\n        if (!this.isConnected()) return;\r\n\r\n        core.log('WebChannelClientImpl: notifyFocusChanged ->', isFocused);\r\n\r\n        var data = {\r\n            type: 'sdk.focusChanged',\r\n            data: isFocused\r\n        }\r\n\r\n        this.sendData(JSON.stringify(data));\r\n    }\r\n    WebChannelClientImpl.prototype.fireConnectionFailed = function() {\r\n        if (window.parent.parent.document.hasFocus()) {\r\n            this.setReconnectTimer();\r\n        }\r\n\r\n        if (this.onConnectionFailed) {\r\n            this.onConnectionFailed();\r\n        }\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.fireConnectionSucceed = function() {\r\n        if (this.onConnectionSucceed) {\r\n            this.onConnectionSucceed();\r\n        }\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.resetReconnectTimer = function() {\r\n        if (this.reconnectTimer) {\r\n            clearInterval(this.reconnectTimer);\r\n            this.reconnectTimer = null;\r\n        }\r\n    }\r\n\r\n    WebChannelClientImpl.prototype.setReconnectTimer = function() {\r\n        this.resetReconnectTimer();\r\n\r\n        var self = this;\r\n        this.reconnectTimer = setInterval(function() {\r\n            self.connectInternal(false);\r\n        }, this.wsReconnectInterval);\r\n    }\r\n\r\n    /**\r\n    * Connects to web socket server and setups all event listeners\r\n    */\r\n    WebChannelClientImpl.prototype.wsconnect = function(url) {\r\n        core.log(\"WebChannelClientImpl: wsconnect \" + url);\r\n        var self = this;\r\n\r\n        var $q = utils.Deferred();\r\n        if (this.webSocket && this.webSocket.readyState !== WebSocket.CLOSED)\r\n            throw new Error(\"wsdisconnect has not been called\");\r\n\r\n        this.webSocket = new WebSocket(url);\r\n        // we need binary type 'arraybuffer' because default type 'blob' is not working\r\n        this.webSocket.binaryType = 'arraybuffer';\r\n\r\n\r\n        this.webSocket.onclose = function(event) {\r\n            core.log(\"WebChannelClientImpl: wsonclose\");\r\n            return self.wsonclose(true);\r\n        };\r\n        this.webSocket.onopen = function(event) {\r\n            core.log(\"WebChannelClientImpl: wsonopen\");\r\n            $q.resolve();\r\n\r\n            if (window.parent.parent.document.hasFocus()) {\r\n                self.notifyFocusChanged(true);\r\n            }else{\r\n                self.notifyFocusChanged(false);\r\n            }\r\n        };\r\n        this.webSocket.onerror = function(event) {\r\n            core.log(\"WebChannelClientImpl: wsonerror \" + arguments);\r\n            return $q.reject(new Error(\"WebSocket connection failed.\"));\r\n        };\r\n        this.webSocket.onmessage = function(event) {\r\n            return self.wsonmessage(event);\r\n        };\r\n\r\n        return $q.promise;\r\n    };\r\n\r\n    /**\r\n    * Closes web socket connection and cleans up all event listeners\r\n    */\r\n    WebChannelClientImpl.prototype.wsdisconnect = function() {\r\n        var self = this;\r\n        var $q = utils.Deferred();\r\n\r\n        if (!this.webSocket || this.webSocket.readyState !== WebSocket.OPEN) {\r\n            $q.resolve();\r\n        } else {\r\n            this.webSocket.onclose = function(event) {\r\n                self.wsonclose(false);\r\n                $q.resolve();\r\n            };\r\n            this.webSocket.close();\r\n        }\r\n\r\n        return $q.promise;\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.wsonclose = function(isFailed) {\r\n        core.log(\"WebChannelClientImpl: connection closed\");\r\n\r\n        this.webSocket.onclose = null;\r\n        this.webSocket.onopen = null;\r\n        this.webSocket.onmessage = null;\r\n        this.webSocket.onerror = null;\r\n\r\n        this.deactivateBufferCheck();\r\n\r\n        if (isFailed) {\r\n            this.fireConnectionFailed();\r\n        }\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.wsonmessage = function(event) {\r\n        var self = this;\r\n        cipher.decode(this.sessionKey, this.M1, event.data).then(function (data) {\r\n            if (typeof data === 'string') {\r\n                if (self.onDataReceivedTxt) {\r\n                    self.onDataReceivedTxt(data);\r\n                }\r\n            } else {\r\n                if (self.onDataReceivedBin) {\r\n                    self.onDataReceivedBin(data);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n    * Sends data over web socket\r\n    */\r\n    WebChannelClientImpl.prototype.wssend = function(data) {\r\n        if (!this.isConnected())\r\n            return false;\r\n\r\n        if (this.webSocket.bufferedAmount >= this.wsThreshold) {\r\n            this.activateBufferCheck();\r\n            return false;\r\n        }\r\n\r\n        this.webSocket.send(data);\r\n        return true;\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.generateSessionKey = function(callback) {\r\n        var srpData = configurator.srp;\r\n        if (!srpData.p1 || !srpData.p2 || !srpData.salt)\r\n            return callback(new Error(\"No data available for authentication\"));\r\n\r\n        var self = this;\r\n\r\n        var srp = new SRPClient(srpData.p1, srpData.p2);\r\n        var a;\r\n        do {\r\n            a = srp.srpRandom();\r\n        } while (!srp.canCalculateA(a));\r\n\r\n        var A = srp.calculateA(a);\r\n\r\n        if (core.WebSdk.version >= core.WebSdkEncryptionSupport.AESEncryption && !cipher.isCryptoSupported())\r\n            core.WebSdk.version = core.WebSdkEncryptionSupport.Encryption; // if AES encryption is not supported by Browser, set data encryption to old one.\r\n\r\n        utils.ajax('post', configurator.url + '/connect', {\r\n            username: srpData.p1,\r\n            A: srp.toHexString(A),\r\n            version: core.WebSdk.version.toString()\r\n        }).then(function (response) {\r\n\r\n            if (response.version === undefined) // old client\r\n                core.WebSdk.version = Math.min(core.WebSdk.version, core.WebSdkEncryptionSupport.Encryption);\r\n            else core.WebSdk.version = response.version;\r\n\r\n            var B = new BigInteger(response.B, 16),\r\n                u = srp.calculateU(A, B),\r\n                S = srp.calculateS(B, srpData.salt, u, a),\r\n                K = srp.calculateK(S),\r\n                M1 = srp.calculateM(A, B, K, srpData.salt);\r\n\r\n            // we will use SHA256 from K as AES 256bit session key\r\n            self.sessionKey = cipher.hexToBytes(sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(sjcl.codec.hex.toBits(K))));\r\n            self.M1 = M1;\r\n\r\n            callback(null, M1);\r\n        }).catch(callback);\r\n    }\r\n\r\n    /**\r\n    * Sets up connection with parameters from configurator (generates session key and connects to websocket server).\r\n    */\r\n    WebChannelClientImpl.prototype.setupSecureChannel = function(callback) {\r\n        core.log('WebChannelClientImpl.setupSecureChannel');\r\n\r\n        var self = this;\r\n        async.waterfall([\r\n            function(callback) {\r\n                self.generateSessionKey(callback);\r\n            },\r\n            function(sessionKey, callback) {\r\n               // self.sessionKey = sessionKey;\r\n\r\n                var connectionUrl = configurator.url.replace('http', 'ws') +\r\n                    '/' + self.clientPath +\r\n                    '?username=' + configurator.srp.p1 +\r\n                    '&M1=' + self.M1;\r\n\r\n                //adding sessionId to url\r\n                if (!configurator.sessionId) {\r\n                    configurator.sessionId = sjcl.codec.hex.fromBits(sjcl.random.randomWords(2, 0));\r\n                }\r\n                connectionUrl += \"&sessionId=\" + configurator.sessionId;\r\n\r\n                //adding version to url\r\n                connectionUrl += \"&version=\" + core.WebSdk.version.toString();\r\n\r\n                self.wsconnect(connectionUrl)\r\n                    .then(function() {\r\n                        callback(null);\r\n                    })\r\n                    .catch(function(err) {\r\n                        core.log(err);\r\n                        callback(err);\r\n                    });\r\n            }\r\n        ], callback);\r\n    };\r\n\r\n    /**\r\n    * @result {boolean} True if web socket is ready for transferring data\r\n    */\r\n    WebChannelClientImpl.prototype.isConnected = function() {\r\n        return !!this.webSocket && this.webSocket.readyState === WebSocket.OPEN;\r\n    };\r\n\r\n    /**\r\n    * Sends message if channel is ready\r\n    * Otherwise, adds message to the queue.\r\n    */\r\n    WebChannelClientImpl.prototype.sendData = function(data) {\r\n        if (!this.wssend(data)) {\r\n            this.queue.push(data);\r\n        }\r\n    };\r\n    WebChannelClientImpl.prototype.deactivateBufferCheck = function() {\r\n        if (!this.queueInterval) return;\r\n\r\n        clearInterval(this.queueInterval);\r\n        this.queueInterval = null;\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.activateBufferCheck = function() {\r\n        if (this.queueInterval) return;\r\n\r\n        var self = this;\r\n        this.queueInterval = setInterval(function() {\r\n            self.processMessageQueue();\r\n\r\n            if (self.queue.length === 0) {\r\n                self.deactivateBufferCheck();\r\n            }\r\n        }, this.wsQueueInterval);\r\n    }\r\n\r\n    /**\r\n    * Sends messages from a queue if any. Initiates secure connection if needed and has not been yet initiated.\r\n    */\r\n    WebChannelClientImpl.prototype.processMessageQueue = function() {\r\n        core.log(\"WebChannelClientImpl: processMessageQueue \" + this.queue.length);\r\n        if (this.queue.length === 0)\r\n            return;\r\n\r\n        for (var i = 0; i < this.queue.length;) {\r\n            if (!this.wssend(this.queue.items[i])) break;\r\n            this.queue.splice(i, 1);\r\n        }\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.connectInternal = function(multipleAttempts) {\r\n        core.log('WebChannelClientImpl.connectInternal');\r\n\r\n        this.resetReconnectTimer();\r\n\r\n        var self = this;\r\n        async.waterfall([\r\n            function(callback) {\r\n                configurator.ensureLoaded(callback);\r\n            },\r\n            function(callback) {\r\n                async.retry(multipleAttempts ? 3 : 1, function() {\r\n                    self.setupSecureChannel(callback);\r\n                }, callback);\r\n            }\r\n        ], function(err) {\r\n            if (err) return self.fireConnectionFailed();\r\n\r\n            self.fireConnectionSucceed();\r\n            self.processMessageQueue();\r\n        });\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.connect = function() {\r\n        this.connectInternal(true);\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.disconnect = function() {\r\n        this.wsdisconnect();\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.sendDataBin = function (data) {\r\n        var self = this;\r\n        cipher.encode(this.sessionKey, this.M1, data).then(function (data) {\r\n            self.sendData(data);\r\n        });\r\n    };\r\n\r\n    WebChannelClientImpl.prototype.sendDataTxt = function(data) {\r\n        var self = this;\r\n        cipher.encode(this.sessionKey, this.M1, data).then(function (data) {\r\n            self.sendData(data);\r\n        });\r\n    };\r\n\r\n    return WebChannelClientImpl;\r\n});\r\n\r\n; (function (factory) {\r\n\t'use strict';\r\n\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('WebSdkCore.channelClient', [\r\n            'WebSdkCore',\r\n            'WebSdkCore.channelOptions',\r\n            'WebSdkCore.channelClientImplementation'\r\n\t\t], factory);\r\n\t} else {\r\n\t\tvar core = window.WebSdkCore;\r\n\t\tif (!core)\r\n\t\t\tthrow new Error(\"WebSdkCore is not loaded.\");\r\n\r\n\t\twindow.WebSdkCore.channelClient = factory(core, core.channelOptions, core.channelClientImplementation);\r\n    }\r\n})(function (core, WebChannelOptions, WebChannelClientImpl) {\r\n\r\n    function WebChannelClient(clientPath, options) {\r\n        if (options) {\r\n            core.log(options);\r\n\r\n            var webChannelOptions = new WebChannelOptions(options);\r\n\r\n            core.WebSdk.debug = webChannelOptions.debug;\r\n            core.WebSdk.version = webChannelOptions.version;\r\n        }\r\n\r\n        var client = new WebChannelClientImpl(clientPath);\r\n\r\n        Object.defineProperties(this, {\r\n            \"path\": {\r\n                get: function () { return clientPath; },\r\n                enumerable: true\r\n            },\r\n            \"onConnectionFailed\": {\r\n                get: function () { return client.onConnectionFailed; },\r\n                set: function (value) { client.onConnectionFailed = value; },\r\n                enumerable: true\r\n            },\r\n            \"onConnectionSucceed\": {\r\n                get: function () { return client.onConnectionSucceed; },\r\n                set: function (value) { client.onConnectionSucceed = value; },\r\n                enumerable: true\r\n            },\r\n            \"onDataReceivedBin\": {\r\n                get: function () { return client.onDataReceivedBin; },\r\n                set: function (value) { client.onDataReceivedBin = value; },\r\n                enumerable: true\r\n            },\r\n            \"onDataReceivedTxt\": {\r\n                get: function () { return client.onDataReceivedTxt; },\r\n                set: function (value) { client.onDataReceivedTxt = value; },\r\n                enumerable: true\r\n            }\r\n        });\r\n\r\n        this.connect = function () {\r\n            client.connect();\r\n        }\r\n\r\n        this.disconnect = function () {\r\n            client.disconnect();\r\n        }\r\n\r\n        this.isConnected = function () {\r\n            return client.isConnected();\r\n        }\r\n\r\n        this.sendDataBin = function (data) {\r\n            client.sendDataBin(data);\r\n        }\r\n\r\n        this.sendDataTxt = function (data) {\r\n            client.sendDataTxt(data);\r\n        }\r\n\r\n        this.resetReconnectTimer = function () {\r\n            client.resetReconnectTimer();\r\n        }\r\n    }\r\n\r\n    return WebChannelClient;\r\n});\r\n\r\n; (function (factory) {\r\n    'use strict';\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('WebSdk', [\r\n            'WebSdkCore',\r\n            'WebSdkCore.channelOptions',\r\n            'WebSdkCore.channelClient'\r\n        ], factory);\r\n    } else {\r\n        var core = window.WebSdkCore;\r\n        if (!core)\r\n            throw new Error(\"WebSdkCore is not loaded.\");\r\n\r\n        window.WebSdk = factory(core, core.channelOptions, core.channelClient);\r\n    }\r\n})(function (core, WebChannelOptions, WebChannelClient) {\r\n    core.log('loaded websdk.client');\r\n\r\n    return {\r\n        WebChannelOptions: WebChannelOptions,\r\n        WebChannelClient: WebChannelClient\r\n    };\r\n});","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\r\nimport React, { useRef, useEffect } from 'react'\r\n\r\nconst Canvas = ({canvasRef, style}) => {\r\n  \r\n  return <canvas ref={canvasRef} style={style} width=\"640\" height=\"480\" />\r\n}\r\n\r\nexport default Canvas"],"sourceRoot":""}